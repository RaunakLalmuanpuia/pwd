import{Q as rt}from"./QImg-CGHk-Oy7.js";import{T as ut,r as _,o as s,c as d,a as y,u as m,w as ct,F as D,Z as mt,b as t,t as o,e as p,g as l,p as tt,n as et,d as pt,y as nt,V as gt,s as ft}from"./app-C0WcL7Dl.js";import{Q as bt}from"./QPage-D37SS-vL.js";import{A as yt}from"./ApplicantLayout-BMN0PiOQ.js";import{u as xt}from"./use-quasar-DmPLqApz.js";import"./QLayout-DH5XpFfV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const wt={class:"p-4 bg-background rounded-lg shadow-md"},vt={class:"text-base"},kt={class:"text-base"},ht={class:"text-base"},Dt={class:"text-base"},Ct={class:"mt-6 flex justify-between w-full"},Pt={key:0,class:"p-4"},Nt={key:0,class:"flex flex-col md:flex-row p-4 bg-background rounded-lg shadow-md"},St={class:"w-full md:w-1/2 p-4 border-r border-border"},jt={class:"flex items-center mb-4"},At={class:"text-md font-bold"},Ot={class:"w-full md:w-1/2 p-4"},zt={key:1,class:"p-4 bg-background rounded-lg shadow-md"},Tt={class:"grid grid-cols-2 gap-4"},Vt={class:"col-xs-8 flex items-center text-grey-6"},Et={class:"block text-sm font-medium"},It={class:"col-xs-4"},Lt=["id","onChange"],Bt={key:2,class:"p-4 bg-background rounded-lg shadow-md"},Ut={class:"grid grid-cols-2 gap-4"},Qt={class:"col-xs-8 flex items-center text-grey-6"},$t={class:"block text-sm font-medium"},Ft={class:"col-xs-4"},Mt=["id","onChange"],qt={class:"p-4 bg-background rounded-lg shadow-md col-xs-12 col-sm-12"},Ht={class:"flex justify-between items-center"},Rt={class:"flex q-gutter-md"},Jt={key:0,class:"input-error"},Yt={class:"mx-auto bg-white dark:bg-card shadow-lg rounded-lg p-6 flex flex-col items-center mt-2"},Zt={class:"mt-6 flex justify-between w-full"},Gt={class:"text-red-500"},Kt={class:"flex items-center justify-end flex-col"},Wt=["src"],Xt={class:"flex items-center gap-8 justify-center mt-4"},_t=["disabled"],te=["disabled"],ee=["disabled"],re=Object.assign({layout:yt},{__name:"SubmitApplication",props:["jobDetail","mandatoryDocuments","applicant","application","optionalDocuments"],setup(n){var N;const c=xt(),g=n,r=ut({document_id:null,file:null,application_id:g.application.id,mizo_proficiency:(N=g.application)!=null&&N.mizo_proficiency?parseInt(g.application.mizo_proficiency):null}),w=_(!1);function C(i,e){r.document_id=e,r.file=i.target.files[0]}const ot=()=>{c.dialog({title:"Confirmation",message:"Do you want to update the Application?",ok:"Proceed",cancel:"Back"}).onOk(()=>{r.post(route("application.update",{jobDetail:g.jobDetail.id}),{onSuccess:()=>{c.notify({type:"info",color:"primary",message:"Application Updated Successfully."})}})})},v=_(!1),lt=()=>{v.value=!v.value},it=i=>{const e=new Date(i),u={year:"numeric",month:"long",day:"numeric"};return e.toLocaleDateString("en-IN",u)},at=i=>{c.dialog({title:"Confirmation",message:"Do you want to delete the Application?",ok:"Proceed",cancel:"Back"}).onOk(()=>{gt.delete(route("application.delete_draft",i))})},st=i=>{if(!i)return"";const e={day:"2-digit",month:"2-digit",year:"numeric"};return new Intl.DateTimeFormat("en-IN",e).format(new Date(i))},P=i=>{let e=document.createElement("a");e.target="_blank",e.href=`/storage/${i==null?void 0:i.document_path}`,e.click()},dt=()=>{c.dialog({title:"Confirmation",message:"Application is draft by default and you can pay later. Do you want to proceed with payment",ok:"Proceed",cancel:"Back"}).onOk(()=>{c.loading.show(),ft.post("/paytm/initiate",{job_ids:g.jobDetail.id,application_id:g.application.id}).then(i=>{const{token:e,order_id:u,amount:k}=i.data;var h={root:"",flow:"DEFAULT",data:{orderId:u,token:e,tokenType:"TXN_TOKEN",amount:k},handler:{notifyMerchant:function(f,b){console.log("notifyMerchant handler function called"),console.log("eventName => ",f),console.log("data => ",b)}}};window.Paytm&&window.Paytm.CheckoutJS?window.Paytm.CheckoutJS.init(h).then(function(){window.Paytm.CheckoutJS.invoke()}).catch(function(b){console.log("error => ",b)}):(console.log("Error Paytm"),c.notify({type:"warning",message:"Unable to load Checkout Page: Please Reload to try again"}))}).catch(i=>{var e,u;console.log(i),c.notify({type:"negative",message:((u=(e=i==null?void 0:i.response)==null?void 0:e.data)==null?void 0:u.message)||i.toString()})}).finally(()=>{c.loading.hide()})})};return(i,e)=>(s(),d(D,null,[y(m(mt),{title:"Draft Application"}),y(bt,{padding:""},{default:ct(()=>{var u,k,h,f,b,S,j,A,O,z,T,V,E,I,L,B,U,Q,$,F,M,q,H,R,J,Y,Z,G,K,W,X;return[t("div",wt,[e[3]||(e[3]=t("h2",{class:"text-lg font-bold"},"Name of Post",-1)),t("p",vt,o(n.jobDetail.post_name),1),e[4]||(e[4]=t("h2",{class:"text-lg font-bold mt-4"},"Number of Post",-1)),t("p",kt,o(n.jobDetail.no_of_post),1),e[5]||(e[5]=t("h2",{class:"text-lg font-bold mt-4"},"Application Last Date",-1)),t("p",ht,o(st(n.jobDetail.application_deadline)),1),e[6]||(e[6]=t("h2",{class:"text-lg font-bold mt-4"},"Application Fee ",-1)),t("p",Dt,"General -"+o(n.jobDetail.application_fee_general)+". SC\\ST\\Others- "+o(n.jobDetail.application_fee_other),1)]),t("div",Ct,[n.applicant?(s(),d("div",Pt,[t("button",{onClick:lt,class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"},o(v.value?"Hide Profile":"Show Profile"),1)])):p("",!0)]),v.value?(s(),d("div",Nt,[t("div",St,[t("div",jt,[y(rt,{src:`/storage/${n.applicant.passport_photo}`,alt:"Passport Size Photo",class:"mr-4",style:{width:"120px",height:"120px","object-fit":"cover"}},null,8,["src"]),t("div",null,[t("h3",At,o((u=n.applicant)==null?void 0:u.user.name),1),e[7]||(e[7]=t("p",{class:"text-muted-foreground"},"Name (As HSLC Cert. / Service Book)",-1))])]),t("p",null,[e[8]||(e[8]=t("strong",null,"Sex:",-1)),l(" "+o((k=n.applicant)==null?void 0:k.sex),1)]),t("p",null,[e[9]||(e[9]=t("strong",null,"Mobile No:",-1)),l(" "+o((h=n.applicant)==null?void 0:h.user.phone),1)]),t("p",null,[e[10]||(e[10]=t("strong",null,"Parent's Name:",-1)),l(" "+o((f=n.applicant)==null?void 0:f.parents_name),1)]),t("p",null,[e[11]||(e[11]=t("strong",null,"Date of Birth:",-1)),l(" "+o((b=n.applicant)==null?void 0:b.date_of_birth),1)]),t("p",null,[e[12]||(e[12]=t("strong",null,"Community:",-1)),l(" "+o((S=n.applicant)==null?void 0:S.community),1)]),t("p",null,[e[13]||(e[13]=t("strong",null,"Religion:",-1)),l(" "+o((j=n.applicant)==null?void 0:j.religion),1)]),t("p",null,[e[14]||(e[14]=t("strong",null,"Nationality:",-1)),l(" "+o((A=n.applicant)==null?void 0:A.nationality),1)]),t("p",null,[e[15]||(e[15]=t("strong",null,"Qualification:",-1)),l(o((O=n.applicant)==null?void 0:O.qualification)+", "+o((z=n.applicant)==null?void 0:z.graduateDegree),1)]),t("p",null,[e[16]||(e[16]=t("strong",null,"Working knowledge of Mizo Language:",-1)),l(" "+o((T=n.applicant)!=null&&T.mizo_proficiency?"YES":"NO"),1)]),t("p",null,[e[17]||(e[17]=t("strong",null,"Person with Disability:",-1)),l(" "+o((V=n.applicant)!=null&&V.disability?"YES":"NO"),1)]),t("p",null,[e[18]||(e[18]=t("strong",null,"Person with Disability Detail:",-1)),l(o((E=n.applicant)==null?void 0:E.disability_type),1)])]),t("div",Ot,[e[35]||(e[35]=t("h2",{class:"text-lg font-semibold"},"Permanent Address",-1)),t("p",null,[e[19]||(e[19]=t("strong",null,"House No:",-1)),l(o((I=n.applicant)==null?void 0:I.user.address.permanent_house_no),1)]),t("p",null,[e[20]||(e[20]=t("strong",null,"Street:",-1)),l(" "+o((L=n.applicant)==null?void 0:L.user.address.permanent_street),1)]),t("p",null,[e[21]||(e[21]=t("strong",null,"Locality (Veng):",-1)),l(" "+o((B=n.applicant)==null?void 0:B.user.address.permanent_locality),1)]),t("p",null,[e[22]||(e[22]=t("strong",null,"Landmark:",-1)),l(" "+o((U=n.applicant)==null?void 0:U.user.address.permanent_landmark),1)]),t("p",null,[e[23]||(e[23]=t("strong",null,"Town / City:",-1)),l(" "+o((Q=n.applicant)==null?void 0:Q.user.address.permanent_city),1)]),t("p",null,[e[24]||(e[24]=t("strong",null,"District:",-1)),l(" "+o(($=n.applicant)==null?void 0:$.user.address.permanent_district),1)]),t("p",null,[e[25]||(e[25]=t("strong",null,"State / UT:",-1)),l(" "+o((F=n.applicant)==null?void 0:F.user.address.permanent_state),1)]),t("p",null,[e[26]||(e[26]=t("strong",null,"PIN:",-1)),l(" "+o((M=n.applicant)==null?void 0:M.user.address.permanent_pin_code),1)]),e[36]||(e[36]=t("h2",{class:"text-lg font-semibold mt-4"},"Communication Address",-1)),t("p",null,[e[27]||(e[27]=t("strong",null,"House No:",-1)),l(" "+o((q=n.applicant)==null?void 0:q.user.address.communication_house_no),1)]),t("p",null,[e[28]||(e[28]=t("strong",null,"Street:",-1)),l(" "+o((H=n.applicant)==null?void 0:H.user.address.communication_street),1)]),t("p",null,[e[29]||(e[29]=t("strong",null,"Locality (Veng):",-1)),l(" "+o((R=n.applicant)==null?void 0:R.user.address.communication_locality),1)]),t("p",null,[e[30]||(e[30]=t("strong",null,"Landmark:",-1)),l(" "+o((J=n.applicant)==null?void 0:J.user.address.communication_landmark),1)]),t("p",null,[e[31]||(e[31]=t("strong",null,"Town / City:",-1)),l(" "+o((Y=n.applicant)==null?void 0:Y.user.address.communication_city),1)]),t("p",null,[e[32]||(e[32]=t("strong",null,"District:",-1)),l(" "+o((Z=n.applicant)==null?void 0:Z.user.address.communication_district),1)]),t("p",null,[e[33]||(e[33]=t("strong",null,"State / UT:",-1)),l(o((G=n.applicant)==null?void 0:G.user.address.communication_state),1)]),t("p",null,[e[34]||(e[34]=t("strong",null,"PIN:",-1)),l(" "+o((K=n.applicant)==null?void 0:K.user.address.communication_pin_code),1)])])])):p("",!0),n.mandatoryDocuments.length!==0?(s(),d("div",zt,[e[37]||(e[37]=t("h2",{class:"text-lg font-bold mb-3"},"Mandatory Documents",-1)),t("div",Tt,[(s(!0),d(D,null,tt(n.mandatoryDocuments,a=>(s(),d("div",{key:a.id,class:"row col-xs-12 col-sm-6 print-hide"},[t("div",Vt,[t("label",Et,o(a.document_name),1),y(et,{label:(i.$q.screen.lt.sm,"OPEN"),color:"primary",flat:"",onClick:x=>P(a.document_attachments)},null,8,["label","onClick"])]),t("div",It,[t("input",{type:"file",id:"file-"+a.id,onChange:x=>C(x,a.id),class:"text-sm mt-2"},null,40,Lt)])]))),128))])])):p("",!0),n.optionalDocuments.length!==0?(s(),d("div",Bt,[e[38]||(e[38]=t("h2",{class:"text-lg font-bold mb-3"},"Optional Documents",-1)),t("div",Ut,[(s(!0),d(D,null,tt(n.optionalDocuments,a=>(s(),d("div",{key:a.id,class:"row col-xs-12 col-sm-6 print-hide"},[t("div",Qt,[t("label",$t,o(a.document_name),1),a.document_attachments.document_path?(s(),pt(et,{key:0,label:(i.$q.screen.lt.sm,"OPEN"),color:"primary",flat:"",onClick:x=>P(a.document_attachments)},null,8,["label","onClick"])):p("",!0)]),t("div",Ft,[t("input",{type:"file",id:"file-"+a.id,onChange:x=>C(x,a.id),class:"text-sm mt-2"},null,40,Mt)])]))),128))])])):p("",!0),t("div",qt,[t("div",Ht,[t("div",null," Did you study MIZO language in "+o(n.jobDetail.mizo_proficiency),1),t("div",Rt,[y(nt,{modelValue:m(r).mizo_proficiency,"onUpdate:modelValue":e[0]||(e[0]=a=>m(r).mizo_proficiency=a),dense:"",val:1,label:"Yes"},null,8,["modelValue"]),y(nt,{modelValue:m(r).mizo_proficiency,"onUpdate:modelValue":e[1]||(e[1]=a=>m(r).mizo_proficiency=a),dense:"",val:0,label:"No"},null,8,["modelValue"]),m(r).errors.mizo_proficiency?(s(),d("div",Jt,o(m(r).errors.mizo_proficiency),1)):p("",!0)])])]),t("div",Yt,[e[41]||(e[41]=t("h2",{class:"text-red-500 text-2xl font-bold text-center tracking-widest"},"D E C L A R A T I O N",-1)),e[42]||(e[42]=t("p",{class:"text-red-500 mt-4"}," I hereby declare that the information given above and in the enclosed documents is true to the best of my knowledge and belief and nothing has been concealed therein. I understand that if the information given by me is proved false / not true, I will have to face the punishment as per the law. Also, all the benefits availed by me shall be summarily withdrawn. ",-1)),t("div",Zt,[t("div",null,[e[39]||(e[39]=t("span",{class:"text-red-500 font-semibold"},"Date :",-1)),t("span",Gt,o(it(n.application.created_at)),1)]),t("div",Kt,[(W=n.applicant)!=null&&W.signature_photo?(s(),d("img",{key:0,alt:"Signature of the Candidate",src:`/storage/${(X=n.applicant)==null?void 0:X.signature_photo}`,class:"border border-zinc-300 rounded w-40 h-40 object-contain"},null,8,Wt)):p("",!0),e[40]||(e[40]=t("p",{class:"text-red-500 text-center mt-2"},"Signature of the Candidate",-1))])])]),t("div",Xt,[t("button",{onClick:e[2]||(e[2]=a=>at(n.jobDetail.id)),class:"bg-red-600 text-white px-6 py-3 rounded-md hover:bg-red-700 transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50",disabled:w.value}," Delete Draft ",8,_t),t("button",{onClick:ot,class:"bg-yellow-500 text-white px-6 py-3 rounded-md hover:bg-yellow-600 transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-yellow-400 disabled:opacity-50",disabled:w.value}," Update ",8,te),t("button",{class:"bg-accent text-accent-foreground text-white px-6 py-3 rounded-md hover:bg-accent/80 transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50",disabled:w.value,onClick:dt},o(w.value?"Submitting...":"Make Payment"),9,ee)])]}),_:1})],64))}});export{re as default};
