import{d as U,a as v,c as f}from"./QLayout-BB2XopTk.js";import{Q as T}from"./QTabs-Bs1TsQE9.js";import{Q as m}from"./QSelect-CFNXDJzL.js";import{r as g,M as q,T as D,o as d,c as V,a as s,w as n,F as I,R as y,d as c,g as E,U as w,b as o,u as r,m as R,n as x,Y as B,P as C,ae as Q}from"./app-E6ognuAK.js";import{Q as F}from"./QForm-BXsPBvtM.js";import{Q as L}from"./QPage-BZ14hUW4.js";import{A as j}from"./Admin-BgVQiMpM.js";import{u as M}from"./use-quasar-C2N8U00u.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./rtl-DFPa-2ov.js";import"./QChip-DdLaQN4v.js";import"./QMenu-CfonVZ_W.js";const O={class:"col-xs-12 col-sm-6"},$={class:"col-xs-12 col-sm-6"},G={class:"col-xs-12 col-sm-6"},z={key:0},X={key:2},J={class:"col-xs-12 col-sm-6"},Y={class:"col-xs-12 col-sm-6"},H={class:"col-xs-12 col-sm-6"},K={class:"col-xs-12"},W={class:"col-xs-12"},Z=Object.assign({layout:j},{__name:"SubmittedReport",props:["departments","jobs"],setup(b){g("mails");const p=M();q();const a=D({status:"",state:"",district:"",gender:"",posts:""}),i=g(null);g(null);const S=()=>{i.value&&B.get(route("report.submitted"),{department:i.value.value},{preserveState:!0,replace:!0})},k=[{value:["ELIGIBLE"],label:"Eligible"},{value:["SUBMITTED"],label:"Pending"},{value:["APPROVED"],label:"Approved"},{value:["ELIGIBLE","SUBMITTED","APPROVED"],label:"All"}],A=[{value:"Male",label:"Male"},{value:"Female",label:"Female"}],P=()=>{p.loading.show(),(!i||!a.posts)&&(p.notify({type:"warning",message:i?"No Job Avaliable for the selected department.":"Please select a department.",position:"bottom"}),p.loading.hide());const l=route("report.application.download");C.post(l,a,{responseType:"blob"}).then(e=>{const t=window.URL.createObjectURL(new Blob([e.data])),u=document.createElement("a");u.href=t,u.setAttribute("download",Date.now()+".xlsx"),u.click()}).catch(e=>{var t,u;p.notify({type:"negative",message:((u=(t=e.response)==null?void 0:t.data)==null?void 0:u.message)||"Failed to download file"})}).finally(()=>{p.loading.hide()})};return(l,e)=>(d(),V(I,null,[s(U,{padding:"",class:"card justify-center"},{default:n(()=>[s(T,{padding:""},{default:n(()=>[y((d(),c(f,{clickable:"",active:l.route().current()==="report.submitted",class:w({"q-item--active":l.route().current()==="report.submitted"}),onClick:e[0]||(e[0]=t=>l.$inertia.get(l.route("report.submitted")))},{default:n(()=>[s(v,null,{default:n(()=>e[9]||(e[9]=[E(" APPLICATIONS ")])),_:1})]),_:1},8,["active","class"])),[[Q]]),y((d(),c(f,{clickable:"",class:w({"q-item--active":l.route().current()==="report.writtenExam"}),active:l.route().current()==="report.writtenExam",onClick:e[1]||(e[1]=t=>l.$inertia.get(l.route("report.writtenExam")))},{default:n(()=>[s(v,null,{default:n(()=>e[10]||(e[10]=[E(" EXAM REPORT ")])),_:1})]),_:1},8,["class","active"])),[[Q]]),y((d(),c(f,{clickable:"",class:w({"q-item--active":l.route().current()==="report.exam_center"}),active:l.route().current()==="report.exam_center",onClick:e[2]||(e[2]=t=>l.$inertia.get(l.route("report.exam_center")))},{default:n(()=>[s(v,null,{default:n(()=>e[11]||(e[11]=[E(" EXAM CENTER ")])),_:1})]),_:1},8,["class","active"])),[[Q]])]),_:1})]),_:1}),s(L,{padding:""},{default:n(()=>[e[14]||(e[14]=o("p",{class:"q-ma-none page-title py-3"}," Applications",-1)),e[15]||(e[15]=o("br",null,null,-1)),s(F,{onSubmit:P,class:"row q-col-gutter-md q-pa-md"},{default:n(()=>[o("div",O,[s(m,{modelValue:i.value,"onUpdate:modelValue":[e[3]||(e[3]=t=>i.value=t),S],outlined:"",dense:"",options:b.departments,clearable:"",label:"Select Department",rules:[t=>!!t||"Department is required"]},null,8,["modelValue","options","rules"])]),o("div",$,[s(m,{modelValue:r(a).status,"onUpdate:modelValue":e[4]||(e[4]=t=>r(a).status=t),outlined:"",class:"my-input",dense:"",label:"Application Status",options:k,rules:[t=>!!t||"Status is required"]},null,8,["modelValue","rules"])]),o("div",G,[i.value?b.jobs.length>0?(d(),c(m,{key:1,modelValue:r(a).posts,"onUpdate:modelValue":e[5]||(e[5]=t=>r(a).posts=t),outlined:"",class:"my-input",dense:"",options:b.jobs,clearable:"",label:"Post",rules:[t=>!!t||"Post is required"]},null,8,["modelValue","options","rules"])):(d(),V("p",X,"No jobs available for the selected department.")):(d(),V("p",z,"Please select a department."))]),e[12]||(e[12]=o("div",{class:"col-xs-12 col-sm-6"},null,-1)),e[13]||(e[13]=o("div",{class:"col-xs-12"},[o("p",{class:"ztext q-ma-none"},"optional")],-1)),o("div",J,[s(m,{modelValue:r(a).state,"onUpdate:modelValue":[e[6]||(e[6]=t=>r(a).state=t),l.onStateChange],outlined:"",class:"my-input",dense:"",options:l.states,clearable:"",label:"State"},null,8,["modelValue","onUpdate:modelValue","options"])]),o("div",Y,[s(m,{modelValue:r(a).district,"onUpdate:modelValue":e[7]||(e[7]=t=>r(a).district=t),outlined:"",class:"my-input",dense:"",options:l.districts,clearable:"",label:"District"},null,8,["modelValue","options"])]),o("div",H,[s(m,{modelValue:r(a).gender,"onUpdate:modelValue":e[8]||(e[8]=t=>r(a).gender=t),outlined:"",class:"my-input",dense:"",options:A,clearable:"",label:"Gender"},null,8,["modelValue"])]),o("div",K,[s(R)]),o("div",W,[s(x,{type:"submit",color:"primary",rounded:"",label:"Generate"})])]),_:1})]),_:1})],64))}}),ue=N(Z,[["__scopeId","data-v-d8246358"]]);export{ue as default};
