import{j as w,by as Ct,bz as nn,N as Pe,aV as an,ab as kt,ad as xt,bA as on,r as j,bB as rn,h as A,S as y,aK as Me,U as Ke,V as Te,bC as ln,Y as We,n as W,b3 as sn,v as un,a8 as cn,ay as dn,b5 as Ne,ag as fn,az as vn,b6 as hn,aA as mn,b7 as gn,aB as yn,b8 as pn,a7 as Ye,at as ut,ao as ct,ah as bn,X as Tt,ar as wn,b0 as _t,aq as dt,z as Sn,bD as Mn,aU as Dn,B as Ht,bE as ft,bF as Cn,_ as kn}from"./app-CT4IdWBm.js";import{p as q,m as vt,a as ht,c as xn}from"./QLayout-C_sxsBBR.js";import{u as Tn,a as qt,Q as _n,b as Hn,v as mt,c as qn,p as gt,d as On,r as yt,s as Yn,e as Pn}from"./QMenu-B9S4OOrq.js";import{Q as $n}from"./QBtnDropdown-CC_LiteJ.js";function En(){let e=Object.create(null);return{getCache:(t,a)=>e[t]===void 0?e[t]=typeof a=="function"?a():a:e[t],setCache(t,a){e[t]=a},hasCache(t){return Object.hasOwnProperty.call(e,t)},clearCache(t){t!==void 0?delete e[t]:e=Object.create(null)}}}const fe=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function zn(e,t,a){return Object.prototype.toString.call(e)==="[object Date]"&&(a=e.getDate(),t=e.getMonth()+1,e=e.getFullYear()),Fn(Je(e,t,a))}function pt(e,t,a){return Yt(Ln(e,t,a))}function Bn(e){return jn(e)===0}function Oe(e,t){return t<=6?31:t<=11||Bn(e)?30:29}function jn(e){const t=fe.length;let a=fe[0],r,i,s,f,u;if(e<a||e>=fe[t-1])throw new Error("Invalid Jalaali year "+e);for(u=1;u<t&&(r=fe[u],i=r-a,!(e<r));u+=1)a=r;return f=e-a,i-f<6&&(f=f-i+$(i+4,33)*33),s=R(R(f+1,33)-1,4),s===-1&&(s=4),s}function Ot(e,t){const a=fe.length,r=e+621;let i=-14,s=fe[0],f,u,g,M,c;if(e<s||e>=fe[a-1])throw new Error("Invalid Jalaali year "+e);for(c=1;c<a&&(f=fe[c],u=f-s,!(e<f));c+=1)i=i+$(u,33)*8+$(R(u,33),4),s=f;M=e-s,i=i+$(M,33)*8+$(R(M,33)+3,4),R(u,33)===4&&u-M===4&&(i+=1);const b=$(r,4)-$(($(r,100)+1)*3,4)-150,E=20+i-b;return t||(u-M<6&&(M=M-u+$(u+4,33)*33),g=R(R(M+1,33)-1,4),g===-1&&(g=4)),{leap:g,gy:r,march:E}}function Ln(e,t,a){const r=Ot(e,!0);return Je(r.gy,3,r.march)+(t-1)*31-$(t,7)*(t-7)+a-1}function Fn(e){const t=Yt(e).gy;let a=t-621,r,i,s;const f=Ot(a,!1),u=Je(t,3,f.march);if(s=e-u,s>=0){if(s<=185)return i=1+$(s,31),r=R(s,31)+1,{jy:a,jm:i,jd:r};s-=186}else a-=1,s+=179,f.leap===1&&(s+=1);return i=7+$(s,30),r=R(s,30)+1,{jy:a,jm:i,jd:r}}function Je(e,t,a){let r=$((e+$(t-8,6)+100100)*1461,4)+$(153*R(t+9,12)+2,5)+a-34840408;return r=r-$($(e+100100+$(t-8,6),100)*3,4)+752,r}function Yt(e){let t=4*e+139361631;t=t+$($(4*e+183187720,146097)*3,4)*4-3908;const a=$(R(t,1461),4)*5+308,r=$(R(a,153),5)+1,i=R($(a,153),12)+1;return{gy:$(t,1461)-100100+$(8-i,6),gm:i,gd:r}}function $(e,t){return~~(e/t)}function R(e,t){return e-~~(e/t)*t}const Nn=["gregorian","persian"],bt={mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Nn.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},In=["update:modelValue"];function ce(e){return e.year+"/"+q(e.month)+"/"+q(e.day)}function An(e,t){const a=w(()=>e.disable!==!0&&e.readonly!==!0),r=w(()=>a.value===!0?0:-1),i=w(()=>{const u=[];return e.color!==void 0&&u.push(`bg-${e.color}`),e.textColor!==void 0&&u.push(`text-${e.textColor}`),u.join(" ")});function s(){return e.locale!==void 0?{...t.lang.date,...e.locale}:t.lang.date}function f(u){const g=new Date,M=u===!0?null:0;if(e.calendar==="persian"){const c=zn(g);return{year:c.jy,month:c.jm,day:c.jd}}return{year:g.getFullYear(),month:g.getMonth()+1,day:g.getDate(),hour:M,minute:M,second:M,millisecond:M}}return{editable:a,tabindex:r,headerClass:i,getLocale:s,getCurrentDate:f}}const Pt=864e5,Rn=36e5,Xe=6e4,$t="YYYY-MM-DDTHH:mm:ss.SSSZ",Qn=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,Un=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,Ie={};function Zn(e,t){const a="("+t.days.join("|")+")",r=e+a;if(Ie[r]!==void 0)return Ie[r];const i="("+t.daysShort.join("|")+")",s="("+t.months.join("|")+")",f="("+t.monthsShort.join("|")+")",u={};let g=0;const M=e.replace(Un,b=>{switch(g++,b){case"YY":return u.YY=g,"(-?\\d{1,2})";case"YYYY":return u.YYYY=g,"(-?\\d{1,4})";case"M":return u.M=g,"(\\d{1,2})";case"Mo":return u.M=g++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return u.M=g,"(\\d{2})";case"MMM":return u.MMM=g,f;case"MMMM":return u.MMMM=g,s;case"D":return u.D=g,"(\\d{1,2})";case"Do":return u.D=g++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return u.D=g,"(\\d{2})";case"H":return u.H=g,"(\\d{1,2})";case"HH":return u.H=g,"(\\d{2})";case"h":return u.h=g,"(\\d{1,2})";case"hh":return u.h=g,"(\\d{2})";case"m":return u.m=g,"(\\d{1,2})";case"mm":return u.m=g,"(\\d{2})";case"s":return u.s=g,"(\\d{1,2})";case"ss":return u.s=g,"(\\d{2})";case"S":return u.S=g,"(\\d{1})";case"SS":return u.S=g,"(\\d{2})";case"SSS":return u.S=g,"(\\d{3})";case"A":return u.A=g,"(AM|PM)";case"a":return u.a=g,"(am|pm)";case"aa":return u.aa=g,"(a\\.m\\.|p\\.m\\.)";case"ddd":return i;case"dddd":return a;case"Q":case"d":case"E":return"(\\d{1})";case"do":return g++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return g++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return g++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return u.Z=g,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return u.ZZ=g,"(Z|[+-]\\d{2}\\d{2})";case"X":return u.X=g,"(-?\\d+)";case"x":return u.x=g,"(-?\\d{4,})";default:return g--,b[0]==="["&&(b=b.substring(1,b.length-1)),b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),c={map:u,regex:new RegExp("^"+M)};return Ie[r]=c,c}function Et(e,t){return e!==void 0?e:t!==void 0?t.date:nn.date}function wt(e,t=""){const a=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),s=r%60;return a+q(i)+t+q(s)}function Wn(e,t,a,r,i){const s={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(i!==void 0&&Object.assign(s,i),e==null||e===""||typeof e!="string")return s;t===void 0&&(t=$t);const f=Et(a,Ct.props),u=f.months,g=f.monthsShort,{regex:M,map:c}=Zn(t,f),b=e.match(M);if(b===null)return s;let E="";if(c.X!==void 0||c.x!==void 0){const x=parseInt(b[c.X!==void 0?c.X:c.x],10);if(isNaN(x)===!0||x<0)return s;const z=new Date(x*(c.X!==void 0?1e3:1));s.year=z.getFullYear(),s.month=z.getMonth()+1,s.day=z.getDate(),s.hour=z.getHours(),s.minute=z.getMinutes(),s.second=z.getSeconds(),s.millisecond=z.getMilliseconds()}else{if(c.YYYY!==void 0)s.year=parseInt(b[c.YYYY],10);else if(c.YY!==void 0){const x=parseInt(b[c.YY],10);s.year=x<0?x:2e3+x}if(c.M!==void 0){if(s.month=parseInt(b[c.M],10),s.month<1||s.month>12)return s}else c.MMM!==void 0?s.month=g.indexOf(b[c.MMM])+1:c.MMMM!==void 0&&(s.month=u.indexOf(b[c.MMMM])+1);if(c.D!==void 0){if(s.day=parseInt(b[c.D],10),s.year===null||s.month===null||s.day<1)return s;const x=r!=="persian"?new Date(s.year,s.month,0).getDate():Oe(s.year,s.month);if(s.day>x)return s}c.H!==void 0?s.hour=parseInt(b[c.H],10)%24:c.h!==void 0&&(s.hour=parseInt(b[c.h],10)%12,(c.A&&b[c.A]==="PM"||c.a&&b[c.a]==="pm"||c.aa&&b[c.aa]==="p.m.")&&(s.hour+=12),s.hour=s.hour%24),c.m!==void 0&&(s.minute=parseInt(b[c.m],10)%60),c.s!==void 0&&(s.second=parseInt(b[c.s],10)%60),c.S!==void 0&&(s.millisecond=parseInt(b[c.S],10)*10**(3-b[c.S].length)),(c.Z!==void 0||c.ZZ!==void 0)&&(E=c.Z!==void 0?b[c.Z].replace(":",""):b[c.ZZ],s.timezoneOffset=(E[0]==="+"?-1:1)*(60*E.slice(1,3)+1*E.slice(3,5)))}return s.dateHash=q(s.year,6)+"/"+q(s.month)+"/"+q(s.day),s.timeHash=q(s.hour)+":"+q(s.minute)+":"+q(s.second)+E,s}function Ae(e){const t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);const a=new Date(t.getFullYear(),0,4);a.setDate(a.getDate()-(a.getDay()+6)%7+3);const r=t.getTimezoneOffset()-a.getTimezoneOffset();t.setHours(t.getHours()-r);const i=(t-a)/(Pt*7);return 1+Math.floor(i)}function se(e,t,a){const r=new Date(e),i=`set${a===!0?"UTC":""}`;switch(t){case"year":case"years":r[`${i}Month`](0);case"month":case"months":r[`${i}Date`](1);case"day":case"days":case"date":r[`${i}Hours`](0);case"hour":case"hours":r[`${i}Minutes`](0);case"minute":case"minutes":r[`${i}Seconds`](0);case"second":case"seconds":r[`${i}Milliseconds`](0)}return r}function qe(e,t,a){return(e.getTime()-e.getTimezoneOffset()*Xe-(t.getTime()-t.getTimezoneOffset()*Xe))/a}function zt(e,t,a="days"){const r=new Date(e),i=new Date(t);switch(a){case"years":case"year":return r.getFullYear()-i.getFullYear();case"months":case"month":return(r.getFullYear()-i.getFullYear())*12+r.getMonth()-i.getMonth();case"days":case"day":case"date":return qe(se(r,"day"),se(i,"day"),Pt);case"hours":case"hour":return qe(se(r,"hour"),se(i,"hour"),Rn);case"minutes":case"minute":return qe(se(r,"minute"),se(i,"minute"),Xe);case"seconds":case"second":return qe(se(r,"second"),se(i,"second"),1e3)}}function Re(e){return zt(e,se(e,"year"),"days")+1}function we(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const St={YY(e,t,a){const r=this.YYYY(e,t,a)%100;return r>=0?q(r):"-"+q(Math.abs(r))},YYYY(e,t,a){return a??e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return we(e.getMonth()+1)},MM(e){return q(e.getMonth()+1)},MMM(e,t){return t.monthsShort[e.getMonth()]},MMMM(e,t){return t.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return we(this.Q(e))},D(e){return e.getDate()},Do(e){return we(e.getDate())},DD(e){return q(e.getDate())},DDD(e){return Re(e)},DDDo(e){return we(Re(e))},DDDD(e){return q(Re(e),3)},d(e){return e.getDay()},do(e){return we(e.getDay())},dd(e,t){return t.days[e.getDay()].slice(0,2)},ddd(e,t){return t.daysShort[e.getDay()]},dddd(e,t){return t.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return Ae(e)},wo(e){return we(Ae(e))},ww(e){return q(Ae(e))},H(e){return e.getHours()},HH(e){return q(e.getHours())},h(e){const t=e.getHours();return t===0?12:t>12?t%12:t},hh(e){return q(this.h(e))},m(e){return e.getMinutes()},mm(e){return q(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return q(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return q(Math.floor(e.getMilliseconds()/10))},SSS(e){return q(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,t,a,r){const i=r??e.getTimezoneOffset();return wt(i,":")},ZZ(e,t,a,r){const i=r??e.getTimezoneOffset();return wt(i)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function Xn(e,t,a,r,i){if(e!==0&&!e||e===1/0||e===-1/0)return;const s=new Date(e);if(isNaN(s))return;t===void 0&&(t=$t);const f=Et(a,Ct.props);return t.replace(Qn,(u,g)=>u in St?St[u](s,f,r,i):g===void 0?u:g.split("\\]").join("]"))}const me=20,Kn=["Calendar","Years","Months"],Mt=e=>Kn.includes(e),Qe=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Se=" â€” ";function de(e){return e.year+"/"+q(e.month)}const va=Pe({name:"QDate",props:{...bt,...an,...kt,modelValue:{required:!0,validator:e=>typeof e=="string"||Array.isArray(e)===!0||Object(e)===e||e===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...bt.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:Qe},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:Qe},navigationMaxYearMonth:{type:String,validator:Qe},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Mt}},emits:[...In,"rangeStart","rangeEnd","navigation"],setup(e,{slots:t,emit:a}){const{proxy:r}=Te(),{$q:i}=r,s=xt(e,i),{getCache:f}=En(),{tabindex:u,headerClass:g,getLocale:M,getCurrentDate:c}=An(e,i);let b;const E=on(e),x=ln(E),z=j(null),C=j(nt()),T=j(M()),te=w(()=>nt()),ge=w(()=>M()),F=w(()=>c()),S=j(at(C.value,T.value)),k=j(e.defaultView),ye=w(()=>i.lang.rtl===!0?"right":"left"),Q=j(ye.value),ve=j(ye.value),ne=S.value.year,ae=j(ne-ne%me-(ne<0?me:0)),B=j(null),De=w(()=>{const n=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${n} q-date--${n}-${e.minimal===!0?"minimal":"standard"}`+(s.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),X=w(()=>e.color||"primary"),G=w(()=>e.textColor||"white"),oe=w(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),K=w(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),N=w(()=>K.value.filter(n=>typeof n=="string").map(n=>ze(n,C.value,T.value)).filter(n=>n.dateHash!==null&&n.day!==null&&n.month!==null&&n.year!==null)),ee=w(()=>{const n=o=>ze(o,C.value,T.value);return K.value.filter(o=>rn(o)===!0&&o.from!==void 0&&o.to!==void 0).map(o=>({from:n(o.from),to:n(o.to)})).filter(o=>o.from.dateHash!==null&&o.to.dateHash!==null&&o.from.dateHash<o.to.dateHash)}),re=w(()=>e.calendar!=="persian"?n=>new Date(n.year,n.month-1,n.day):n=>{const o=pt(n.year,n.month,n.day);return new Date(o.gy,o.gm-1,o.gd)}),le=w(()=>e.calendar==="persian"?ce:(n,o,l)=>Xn(new Date(n.year,n.month-1,n.day,n.hour,n.minute,n.second,n.millisecond),o===void 0?C.value:o,l===void 0?T.value:l,n.year,n.timezoneOffset)),J=w(()=>N.value.length+ee.value.reduce((n,o)=>n+1+zt(re.value(o.to),re.value(o.from)),0)),ue=w(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(B.value!==null){const l=B.value.init,h=re.value(l);return T.value.daysShort[h.getDay()]+", "+T.value.monthsShort[l.month-1]+" "+l.day+Se+"?"}if(J.value===0)return Se;if(J.value>1)return`${J.value} ${T.value.pluralDay}`;const n=N.value[0],o=re.value(n);return isNaN(o.valueOf())===!0?Se:T.value.headerTitle!==void 0?T.value.headerTitle(o,n):T.value.daysShort[o.getDay()]+", "+T.value.monthsShort[n.month-1]+" "+n.day}),Y=w(()=>N.value.concat(ee.value.map(o=>o.from)).sort((o,l)=>o.year-l.year||o.month-l.month)[0]),ie=w(()=>N.value.concat(ee.value.map(o=>o.to)).sort((o,l)=>l.year-o.year||l.month-o.month)[0]),U=w(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(J.value===0)return Se;if(J.value>1){const n=Y.value,o=ie.value,l=T.value.monthsShort;return l[n.month-1]+(n.year!==o.year?" "+n.year+Se+l[o.month-1]+" ":n.month!==o.month?Se+l[o.month-1]:"")+" "+o.year}return N.value[0].year}),d=w(()=>{const n=[i.iconSet.datetime.arrowLeft,i.iconSet.datetime.arrowRight];return i.lang.rtl===!0?n.reverse():n}),v=w(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):T.value.firstDayOfWeek),_=w(()=>{const n=T.value.daysShort,o=v.value;return o>0?n.slice(o,7).concat(n.slice(0,o)):n}),O=w(()=>{const n=S.value;return e.calendar!=="persian"?new Date(n.year,n.month,0).getDate():Oe(n.year,n.month)}),V=w(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),L=w(()=>{if(e.navigationMinYearMonth===void 0)return null;const n=e.navigationMinYearMonth.split("/");return{year:parseInt(n[0],10),month:parseInt(n[1],10)}}),I=w(()=>{if(e.navigationMaxYearMonth===void 0)return null;const n=e.navigationMaxYearMonth.split("/");return{year:parseInt(n[0],10),month:parseInt(n[1],10)}}),$e=w(()=>{const n={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return L.value!==null&&L.value.year>=S.value.year&&(n.year.prev=!1,L.value.year===S.value.year&&L.value.month>=S.value.month&&(n.month.prev=!1)),I.value!==null&&I.value.year<=S.value.year&&(n.year.next=!1,I.value.year===S.value.year&&I.value.month<=S.value.month&&(n.month.next=!1)),n}),_e=w(()=>{const n={};return N.value.forEach(o=>{const l=de(o);n[l]===void 0&&(n[l]=[]),n[l].push(o.day)}),n}),Ge=w(()=>{const n={};return ee.value.forEach(o=>{const l=de(o.from),h=de(o.to);if(n[l]===void 0&&(n[l]=[]),n[l].push({from:o.from.day,to:l===h?o.to.day:void 0,range:o}),l<h){let m;const{year:H,month:p}=o.from,D=p<12?{year:H,month:p+1}:{year:H+1,month:1};for(;(m=de(D))<=h;)n[m]===void 0&&(n[m]=[]),n[m].push({from:void 0,to:m===h?o.to.day:void 0,range:o}),D.month++,D.month>12&&(D.year++,D.month=1)}}),n}),Ce=w(()=>{if(B.value===null)return;const{init:n,initHash:o,final:l,finalHash:h}=B.value,[m,H]=o<=h?[n,l]:[l,n],p=de(m),D=de(H);if(p!==Z.value&&D!==Z.value)return;const P={};return p===Z.value?(P.from=m.day,P.includeFrom=!0):P.from=1,D===Z.value?(P.to=H.day,P.includeTo=!0):P.to=O.value,P}),Z=w(()=>de(S.value)),It=w(()=>{const n={};if(e.options===void 0){for(let l=1;l<=O.value;l++)n[l]=!0;return n}const o=typeof e.options=="function"?e.options:l=>e.options.includes(l);for(let l=1;l<=O.value;l++){const h=Z.value+"/"+q(l);n[l]=o(h)}return n}),At=w(()=>{const n={};if(e.events===void 0)for(let o=1;o<=O.value;o++)n[o]=!1;else{const o=typeof e.events=="function"?e.events:l=>e.events.includes(l);for(let l=1;l<=O.value;l++){const h=Z.value+"/"+q(l);n[l]=o(h)===!0&&V.value(h)}}return n}),Rt=w(()=>{let n,o;const{year:l,month:h}=S.value;if(e.calendar!=="persian")n=new Date(l,h-1,1),o=new Date(l,h-1,0).getDate();else{const m=pt(l,h,1);n=new Date(m.gy,m.gm-1,m.gd);let H=h-1,p=l;H===0&&(H=12,p--),o=Oe(p,H)}return{days:n.getDay()-v.value-1,endDay:o}}),et=w(()=>{const n=[],{days:o,endDay:l}=Rt.value,h=o<0?o+7:o;if(h<6)for(let p=l-h;p<=l;p++)n.push({i:p,fill:!0});const m=n.length;for(let p=1;p<=O.value;p++){const D={i:p,event:At.value[p],classes:[]};It.value[p]===!0&&(D.in=!0,D.flat=!0),n.push(D)}if(_e.value[Z.value]!==void 0&&_e.value[Z.value].forEach(p=>{const D=m+p-1;Object.assign(n[D],{selected:!0,unelevated:!0,flat:!1,color:X.value,textColor:G.value})}),Ge.value[Z.value]!==void 0&&Ge.value[Z.value].forEach(p=>{if(p.from!==void 0){const D=m+p.from-1,P=m+(p.to||O.value)-1;for(let ke=D;ke<=P;ke++)Object.assign(n[ke],{range:p.range,unelevated:!0,color:X.value,textColor:G.value});Object.assign(n[D],{rangeFrom:!0,flat:!1}),p.to!==void 0&&Object.assign(n[P],{rangeTo:!0,flat:!1})}else if(p.to!==void 0){const D=m+p.to-1;for(let P=m;P<=D;P++)Object.assign(n[P],{range:p.range,unelevated:!0,color:X.value,textColor:G.value});Object.assign(n[D],{flat:!1,rangeTo:!0})}else{const D=m+O.value-1;for(let P=m;P<=D;P++)Object.assign(n[P],{range:p.range,unelevated:!0,color:X.value,textColor:G.value})}}),Ce.value!==void 0){const p=m+Ce.value.from-1,D=m+Ce.value.to-1;for(let P=p;P<=D;P++)n[P].color=X.value,n[P].editRange=!0;Ce.value.includeFrom===!0&&(n[p].editRangeFrom=!0),Ce.value.includeTo===!0&&(n[D].editRangeTo=!0)}S.value.year===F.value.year&&S.value.month===F.value.month&&(n[m+F.value.day-1].today=!0);const H=n.length%7;if(H>0){const p=7-H;for(let D=1;D<=p;D++)n.push({i:D,fill:!0})}return n.forEach(p=>{let D="q-date__calendar-item ";p.fill===!0?D+="q-date__calendar-item--fill":(D+=`q-date__calendar-item--${p.in===!0?"in":"out"}`,p.range!==void 0&&(D+=` q-date__range${p.rangeTo===!0?"-to":p.rangeFrom===!0?"-from":""}`),p.editRange===!0&&(D+=` q-date__edit-range${p.editRangeFrom===!0?"-from":""}${p.editRangeTo===!0?"-to":""}`),(p.range!==void 0||p.editRange===!0)&&(D+=` text-${p.color}`)),p.classes=D}),n}),Qt=w(()=>e.disable===!0?{"aria-disabled":"true"}:{});A(()=>e.modelValue,n=>{if(b===n)b=0;else{const o=at(C.value,T.value);pe(o.year,o.month,o)}}),A(k,()=>{z.value!==null&&r.$el.contains(document.activeElement)===!0&&z.value.focus()}),A(()=>S.value.year+"|"+S.value.month,()=>{a("navigation",{year:S.value.year,month:S.value.month})}),A(te,n=>{st(n,T.value,"mask"),C.value=n}),A(ge,n=>{st(C.value,n,"locale"),T.value=n});function tt(){const{year:n,month:o,day:l}=F.value,h={...S.value,year:n,month:o,day:l},m=_e.value[de(h)];(m===void 0||m.includes(h.day)===!1)&&je(h),Ee(h.year,h.month)}function Ut(n){Mt(n)===!0&&(k.value=n)}function Zt(n,o){["month","year"].includes(n)&&(n==="month"?rt:Be)(o===!0?-1:1)}function Ee(n,o){k.value="Calendar",pe(n,o)}function Wt(n,o){if(e.range===!1||!n){B.value=null;return}const l=Object.assign({...S.value},n),h=o!==void 0?Object.assign({...S.value},o):l;B.value={init:l,initHash:ce(l),final:h,finalHash:ce(h)},Ee(l.year,l.month)}function nt(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function ze(n,o,l){return Wn(n,o,l,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function at(n,o){const l=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(l.length===0)return ot();const h=l[l.length-1],m=ze(h.from!==void 0?h.from:h,n,o);return m.dateHash===null?ot():m}function ot(){let n,o;if(e.defaultYearMonth!==void 0){const l=e.defaultYearMonth.split("/");n=parseInt(l[0],10),o=parseInt(l[1],10)}else{const l=F.value!==void 0?F.value:c();n=l.year,o=l.month}return{year:n,month:o,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:n+"/"+q(o)+"/01"}}function rt(n){let o=S.value.year,l=Number(S.value.month)+n;l===13?(l=1,o++):l===0&&(l=12,o--),pe(o,l),oe.value===!0&&He("month")}function Be(n){const o=Number(S.value.year)+n;pe(o,S.value.month),oe.value===!0&&He("year")}function Xt(n){pe(n,S.value.month),k.value=e.defaultView==="Years"?"Months":"Calendar",oe.value===!0&&He("year")}function Kt(n){pe(S.value.year,n),k.value="Calendar",oe.value===!0&&He("month")}function Jt(n,o){const l=_e.value[o];(l!==void 0&&l.includes(n.day)===!0?Le:je)(n)}function he(n){return{year:n.year,month:n.month,day:n.day}}function pe(n,o,l){if(L.value!==null&&n<=L.value.year&&((o<L.value.month||n<L.value.year)&&(o=L.value.month),n=L.value.year),I.value!==null&&n>=I.value.year&&((o>I.value.month||n>I.value.year)&&(o=I.value.month),n=I.value.year),l!==void 0){const{hour:m,minute:H,second:p,millisecond:D,timezoneOffset:P,timeHash:ke}=l;Object.assign(S.value,{hour:m,minute:H,second:p,millisecond:D,timezoneOffset:P,timeHash:ke})}const h=n+"/"+q(o)+"/01";h!==S.value.dateHash&&(Q.value=S.value.dateHash<h==(i.lang.rtl!==!0)?"left":"right",n!==S.value.year&&(ve.value=Q.value),We(()=>{ae.value=n-n%me-(n<0?me:0),Object.assign(S.value,{year:n,month:o,day:1,dateHash:h})}))}function lt(n,o,l){const h=n!==null&&n.length===1&&e.multiple===!1?n[0]:n;b=h;const{reason:m,details:H}=it(o,l);a("update:modelValue",h,m,H)}function He(n){const o=N.value[0]!==void 0&&N.value[0].dateHash!==null?{...N.value[0]}:{...S.value};We(()=>{o.year=S.value.year,o.month=S.value.month;const l=e.calendar!=="persian"?new Date(o.year,o.month,0).getDate():Oe(o.year,o.month);o.day=Math.min(Math.max(1,o.day),l);const h=be(o);b=h;const{details:m}=it("",o);a("update:modelValue",h,n,m)})}function it(n,o){return o.from!==void 0?{reason:`${n}-range`,details:{...he(o.target),from:he(o.from),to:he(o.to)}}:{reason:`${n}-day`,details:he(o)}}function be(n,o,l){return n.from!==void 0?{from:le.value(n.from,o,l),to:le.value(n.to,o,l)}:le.value(n,o,l)}function je(n){let o;if(e.multiple===!0)if(n.from!==void 0){const l=ce(n.from),h=ce(n.to),m=N.value.filter(p=>p.dateHash<l||p.dateHash>h),H=ee.value.filter(({from:p,to:D})=>D.dateHash<l||p.dateHash>h);o=m.concat(H).concat(n).map(p=>be(p))}else{const l=K.value.slice();l.push(be(n)),o=l}else o=be(n);lt(o,"add",n)}function Le(n){if(e.noUnset===!0)return;let o=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const l=be(n);n.from!==void 0?o=e.modelValue.filter(h=>h.from!==void 0?h.from!==l.from&&h.to!==l.to:!0):o=e.modelValue.filter(h=>h!==l),o.length===0&&(o=null)}lt(o,"remove",n)}function st(n,o,l){const h=N.value.concat(ee.value).map(m=>be(m,n,o)).filter(m=>m.from!==void 0?m.from.dateHash!==null&&m.to.dateHash!==null:m.dateHash!==null);a("update:modelValue",(e.multiple===!0?h:h[0])||null,l)}function Vt(){if(e.minimal!==!0)return y("div",{class:"q-date__header "+g.value},[y("div",{class:"relative-position"},[y(Me,{name:"q-transition--fade"},()=>y("div",{key:"h-yr-"+U.value,class:"q-date__header-subtitle q-date__header-link "+(k.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:u.value,...f("vY",{onClick(){k.value="Years"},onKeyup(n){n.keyCode===13&&(k.value="Years")}})},[U.value]))]),y("div",{class:"q-date__header-title relative-position flex no-wrap"},[y("div",{class:"relative-position col"},[y(Me,{name:"q-transition--fade"},()=>y("div",{key:"h-sub"+ue.value,class:"q-date__header-title-label q-date__header-link "+(k.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:u.value,...f("vC",{onClick(){k.value="Calendar"},onKeyup(n){n.keyCode===13&&(k.value="Calendar")}})},[ue.value]))]),e.todayBtn===!0?y(W,{class:"q-date__header-today self-start",icon:i.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:u.value,onClick:tt}):null])])}function Fe({label:n,type:o,key:l,dir:h,goTo:m,boundaries:H,cls:p}){return[y("div",{class:"row items-center q-date__arrow"},[y(W,{round:!0,dense:!0,size:"sm",flat:!0,icon:d.value[0],tabindex:u.value,disable:H.prev===!1,...f("go-#"+o,{onClick(){m(-1)}})})]),y("div",{class:"relative-position overflow-hidden flex flex-center"+p},[y(Me,{name:"q-transition--jump-"+h},()=>y("div",{key:l},[y(W,{flat:!0,dense:!0,noCaps:!0,label:n,tabindex:u.value,...f("view#"+o,{onClick:()=>{k.value=o}})})]))]),y("div",{class:"row items-center q-date__arrow"},[y(W,{round:!0,dense:!0,size:"sm",flat:!0,icon:d.value[1],tabindex:u.value,disable:H.next===!1,...f("go+#"+o,{onClick(){m(1)}})})])]}const Gt={Calendar:()=>[y("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[y("div",{class:"q-date__navigation row items-center no-wrap"},Fe({label:T.value.months[S.value.month-1],type:"Months",key:S.value.month,dir:Q.value,goTo:rt,boundaries:$e.value.month,cls:" col"}).concat(Fe({label:S.value.year,type:"Years",key:S.value.year,dir:ve.value,goTo:Be,boundaries:$e.value.year,cls:""}))),y("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},_.value.map(n=>y("div",{class:"q-date__calendar-item"},[y("div",n)]))),y("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[y(Me,{name:"q-transition--slide-"+Q.value},()=>y("div",{key:Z.value,class:"q-date__calendar-days fit"},et.value.map(n=>y("div",{class:n.classes},[n.in===!0?y(W,{class:n.today===!0?"q-date__today":"",dense:!0,flat:n.flat,unelevated:n.unelevated,color:n.color,textColor:n.textColor,label:n.i,tabindex:u.value,...f("day#"+n.i,{onClick:()=>{en(n.i)},onMouseover:()=>{tn(n.i)}})},n.event!==!1?()=>y("div",{class:"q-date__event bg-"+n.event}):null):y("div",""+n.i)]))))])])],Months(){const n=S.value.year===F.value.year,o=h=>L.value!==null&&S.value.year===L.value.year&&L.value.month>h||I.value!==null&&S.value.year===I.value.year&&I.value.month<h,l=T.value.monthsShort.map((h,m)=>{const H=S.value.month===m+1;return y("div",{class:"q-date__months-item flex flex-center"},[y(W,{class:n===!0&&F.value.month===m+1?"q-date__today":null,flat:H!==!0,label:h,unelevated:H,color:H===!0?X.value:null,textColor:H===!0?G.value:null,tabindex:u.value,disable:o(m+1),...f("month#"+m,{onClick:()=>{Kt(m+1)}})})])});return e.yearsInMonthView===!0&&l.unshift(y("div",{class:"row no-wrap full-width"},[Fe({label:S.value.year,type:"Years",key:S.value.year,dir:ve.value,goTo:Be,boundaries:$e.value.year,cls:" col"})])),y("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},l)},Years(){const n=ae.value,o=n+me,l=[],h=m=>L.value!==null&&L.value.year>m||I.value!==null&&I.value.year<m;for(let m=n;m<=o;m++){const H=S.value.year===m;l.push(y("div",{class:"q-date__years-item flex flex-center"},[y(W,{key:"yr"+m,class:F.value.year===m?"q-date__today":null,flat:!H,label:m,dense:!0,unelevated:H,color:H===!0?X.value:null,textColor:H===!0?G.value:null,tabindex:u.value,disable:h(m),...f("yr#"+m,{onClick:()=>{Xt(m)}})})]))}return y("div",{class:"q-date__view q-date__years flex flex-center"},[y("div",{class:"col-auto"},[y(W,{round:!0,dense:!0,flat:!0,icon:d.value[0],tabindex:u.value,disable:h(n),...f("y-",{onClick:()=>{ae.value-=me}})})]),y("div",{class:"q-date__years-content col self-stretch row items-center"},l),y("div",{class:"col-auto"},[y(W,{round:!0,dense:!0,flat:!0,icon:d.value[1],tabindex:u.value,disable:h(o),...f("y+",{onClick:()=>{ae.value+=me}})})])])}};function en(n){const o={...S.value,day:n};if(e.range===!1){Jt(o,Z.value);return}if(B.value===null){const l=et.value.find(m=>m.fill!==!0&&m.i===n);if(e.noUnset!==!0&&l.range!==void 0){Le({target:o,from:l.range.from,to:l.range.to});return}if(l.selected===!0){Le(o);return}const h=ce(o);B.value={init:o,initHash:h,final:o,finalHash:h},a("rangeStart",he(o))}else{const l=B.value.initHash,h=ce(o),m=l<=h?{from:B.value.init,to:o}:{from:o,to:B.value.init};B.value=null,je(l===h?o:{target:o,...m}),a("rangeEnd",{from:he(m.from),to:he(m.to)})}}function tn(n){if(B.value!==null){const o={...S.value,day:n};Object.assign(B.value,{final:o,finalHash:ce(o)})}}return Object.assign(r,{setToday:tt,setView:Ut,offsetCalendar:Zt,setCalendarTo:Ee,setEditingRange:Wt}),()=>{const n=[y("div",{class:"q-date__content col relative-position"},[y(Me,{name:"q-transition--fade"},Gt[k.value])])],o=Ke(t.default);return o!==void 0&&n.push(y("div",{class:"q-date__actions"},o)),e.name!==void 0&&e.disable!==!0&&x(n,"push"),y("div",{class:De.value,...Qt.value},[Vt(),y("div",{ref:z,class:"q-date__main col column",tabindex:-1},n)])}}}),ha=Pe({name:"QPopupProxy",props:{...Tn,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:t,emit:a,attrs:r}){const{proxy:i}=Te(),{$q:s}=i,f=j(!1),u=j(null),g=w(()=>parseInt(e.breakpoint,10)),{canShow:M}=qt({showing:f});function c(){return s.screen.width<g.value||s.screen.height<g.value?"dialog":"menu"}const b=j(c()),E=w(()=>b.value==="menu"?{maxHeight:"99vh"}:{});A(()=>c(),C=>{f.value!==!0&&(b.value=C)});function x(C){f.value=!0,a("show",C)}function z(C){f.value=!1,b.value=c(),a("hide",C)}return Object.assign(i,{show(C){M(C)===!0&&u.value.show(C)},hide(C){u.value.hide(C)},toggle(C){u.value.toggle(C)}}),sn(i,"currentComponent",()=>({type:b.value,ref:u.value})),()=>{const C={ref:u,...E.value,...r,onShow:x,onHide:z};let T;return b.value==="dialog"?T=un:(T=_n,Object.assign(C,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),y(T,C,t.default)}}});function Bt(e,t){if(t&&e===t)return null;const a=e.nodeName.toLowerCase();if(["div","li","ul","ol","blockquote"].includes(a)===!0)return e;const r=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,i=r.display;return i==="block"||i==="table"?e:Bt(e.parentNode)}function Ue(e,t,a){return!e||e===document.body?!1:a===!0&&e===t||(t===document?document.body:t).contains(e.parentNode)}function jt(e,t,a){if(a||(a=document.createRange(),a.selectNode(e),a.setStart(e,0)),t.count===0)a.setEnd(e,t.count);else if(t.count>0)if(e.nodeType===Node.TEXT_NODE)e.textContent.length<t.count?t.count-=e.textContent.length:(a.setEnd(e,t.count),t.count=0);else for(let r=0;t.count!==0&&r<e.childNodes.length;r++)a=jt(e.childNodes[r],t,a);return a}const Jn=/^https?:\/\//;class Vn{constructor(t,a){this.el=t,this.eVm=a,this._range=null}get selection(){if(this.el){const t=document.getSelection();if(Ue(t.anchorNode,this.el,!0)&&Ue(t.focusNode,this.el,!0))return t}return null}get hasSelection(){return this.selection!==null?this.selection.toString().length!==0:!1}get range(){const t=this.selection;return t!==null&&t.rangeCount?t.getRangeAt(0):this._range}get parent(){const t=this.range;if(t!==null){const a=t.startContainer;return a.nodeType===document.ELEMENT_NODE?a:a.parentNode}return null}get blockParent(){const t=this.parent;return t!==null?Bt(t,this.el):null}save(t=this.range){t!==null&&(this._range=t)}restore(t=this._range){const a=document.createRange(),r=document.getSelection();t!==null?(a.setStart(t.startContainer,t.startOffset),a.setEnd(t.endContainer,t.endOffset),r.removeAllRanges(),r.addRange(a)):(r.selectAllChildren(this.el),r.collapseToEnd())}savePosition(){let t=-1,a;const r=document.getSelection(),i=this.el.parentNode;if(r.focusNode&&Ue(r.focusNode,i))for(a=r.focusNode,t=r.focusOffset;a&&a!==i;)a!==this.el&&a.previousSibling?(a=a.previousSibling,t+=a.textContent.length):a=a.parentNode;this.savedPos=t}restorePosition(t=0){if(this.savedPos>0&&this.savedPos<t){const a=window.getSelection(),r=jt(this.el,{count:this.savedPos});r&&(r.collapse(!1),a.removeAllRanges(),a.addRange(r))}}hasParent(t,a){const r=a?this.parent:this.blockParent;return r!==null?r.nodeName.toLowerCase()===t.toLowerCase():!1}hasParents(t,a,r=this.parent){return r===null?!1:t.includes(r.nodeName.toLowerCase())===!0?!0:a===!0?this.hasParents(t,a,r.parentNode):!1}is(t,a){if(this.selection===null)return!1;switch(t){case"formatBlock":return a==="DIV"&&this.parent===this.el||this.hasParent(a,a==="PRE");case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(t)===a;case"fontName":const r=document.queryCommandValue(t);return r===`"${a}"`||r===a;case"fullscreen":return this.eVm.inFullscreen.value;case"viewsource":return this.eVm.isViewingSource.value;case void 0:return!1;default:const i=document.queryCommandState(t);return a!==void 0?i===a:i}}getParentAttribute(t){return this.parent!==null?this.parent.getAttribute(t):null}can(t){if(t==="outdent")return this.hasParents(["blockquote","li"],!0);if(t==="indent")return this.hasParents(["li"],!0);if(t==="link")return this.selection!==null||this.is("link")}apply(t,a,r=cn){if(t==="formatBlock")["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(a)&&this.is(t,a)&&(t="outdent",a=null),a==="PRE"&&this.is(t,"PRE")&&(a="P");else if(t==="print"){r();const i=window.open();i.document.write(`
        <!doctype html>
        <html>
          <head>
            <title>Print - ${document.title}</title>
          </head>
          <body>
            <div>${this.el.innerHTML}</div>
          </body>
        </html>
      `),i.print(),i.close();return}else if(t==="link"){const i=this.getParentAttribute("href");if(i===null){const s=this.selectWord(this.selection),f=s?s.toString():"";if(!f.length&&(!this.range||!this.range.cloneContents().querySelector("img")))return;this.eVm.editLinkUrl.value=Jn.test(f)?f:"https://",document.execCommand("createLink",!1,this.eVm.editLinkUrl.value),this.save(s.getRangeAt(0))}else this.eVm.editLinkUrl.value=i,this.range.selectNodeContents(this.parent),this.save();return}else if(t==="fullscreen"){this.eVm.toggleFullscreen(),r();return}else if(t==="viewsource"){this.eVm.isViewingSource.value=this.eVm.isViewingSource.value===!1,this.eVm.setContent(this.eVm.props.modelValue),r();return}document.execCommand(t,!1,a),r()}selectWord(t){if(t===null||t.isCollapsed!==!0||t.modify===void 0)return t;const a=document.createRange();a.setStart(t.anchorNode,t.anchorOffset),a.setEnd(t.focusNode,t.focusOffset);const r=a.collapsed?["backward","forward"]:["forward","backward"];a.detach();const i=t.focusNode,s=t.focusOffset;return t.collapse(t.anchorNode,t.anchorOffset),t.modify("move",r[0],"character"),t.modify("move",r[1],"word"),t.extend(i,s),t.modify("extend",r[1],"character"),t.modify("extend",r[0],"word"),t}}const Gn=Pe({name:"QTooltip",inheritAttrs:!1,props:{...Hn,...dn,...Ne,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...Ne.transitionShow,default:"jump-down"},transitionHide:{...Ne.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:mt},self:{type:String,default:"top middle",validator:mt},offset:{type:Array,default:()=>[14,14],validator:qn},scrollTarget:fn,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...vn],setup(e,{slots:t,emit:a,attrs:r}){let i,s;const f=Te(),{proxy:{$q:u}}=f,g=j(null),M=j(!1),c=w(()=>gt(e.anchor,u.lang.rtl)),b=w(()=>gt(e.self,u.lang.rtl)),E=w(()=>e.persistent!==!0),{registerTick:x,removeTick:z}=hn(),{registerTimeout:C}=mn(),{transitionProps:T,transitionStyle:te}=gn(e),{localScrollTarget:ge,changeScrollEvent:F,unconfigureScrollTarget:S}=On(e,le),{anchorEl:k,canShow:ye,anchorEvents:Q}=qt({showing:M,configureAnchorEl:re}),{show:ve,hide:ne}=yn({showing:M,canShow:ye,handleShow:X,handleHide:G,hideOnRouteChange:E,processOnMount:!0});Object.assign(Q,{delayShow:N,delayHide:ee});const{showPortal:ae,hidePortal:B,renderPortal:De}=pn(f,g,ue,"tooltip");if(u.platform.is.mobile===!0){const Y={anchorEl:k,innerRef:g,onClickOutside(U){return ne(U),U.target.classList.contains("q-dialog__backdrop")&&Tt(U),!0}},ie=w(()=>e.modelValue===null&&e.persistent!==!0&&M.value===!0);A(ie,U=>{(U===!0?Pn:yt)(Y)}),Ye(()=>{yt(Y)})}function X(Y){ae(),x(()=>{s=new MutationObserver(()=>K()),s.observe(g.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),K(),le()}),i===void 0&&(i=A(()=>u.screen.width+"|"+u.screen.height+"|"+e.self+"|"+e.anchor+"|"+u.lang.rtl,K)),C(()=>{ae(!0),a("show",Y)},e.transitionDuration)}function G(Y){z(),B(),oe(),C(()=>{B(!0),a("hide",Y)},e.transitionDuration)}function oe(){s!==void 0&&(s.disconnect(),s=void 0),i!==void 0&&(i(),i=void 0),S(),ut(Q,"tooltipTemp")}function K(){Yn({targetEl:g.value,offset:e.offset,anchorEl:k.value,anchorOrigin:c.value,selfOrigin:b.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function N(Y){if(u.platform.is.mobile===!0){vt(),document.body.classList.add("non-selectable");const ie=k.value,U=["touchmove","touchcancel","touchend","click"].map(d=>[ie,d,"delayHide","passiveCapture"]);ct(Q,"tooltipTemp",U)}C(()=>{ve(Y)},e.delay)}function ee(Y){u.platform.is.mobile===!0&&(ut(Q,"tooltipTemp"),vt(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),C(()=>{ne(Y)},e.hideDelay)}function re(){if(e.noParentEvent===!0||k.value===null)return;const Y=u.platform.is.mobile===!0?[[k.value,"touchstart","delayShow","passive"]]:[[k.value,"mouseenter","delayShow","passive"],[k.value,"mouseleave","delayHide","passive"]];ct(Q,"anchor",Y)}function le(){if(k.value!==null||e.scrollTarget!==void 0){ge.value=bn(k.value,e.scrollTarget);const Y=e.noParentEvent===!0?K:ne;F(ge.value,Y)}}function J(){return M.value===!0?y("div",{...r,ref:g,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",r.class],style:[r.style,te.value],role:"tooltip"},Ke(t.default)):null}function ue(){return y(Me,T.value,J)}return Ye(oe),Object.assign(f.proxy,{updatePosition:K}),De}});function Lt(e,t,a){t.handler?t.handler(e,a,a.caret):a.runCmd(t.cmd,t.param)}function Ve(e){return y("div",{class:"q-editor__toolbar-group"},e)}function Ft(e,t,a,r=!1){const i=r||(t.type==="toggle"?t.toggled?t.toggled(e):t.cmd&&e.caret.is(t.cmd,t.param):!1),s=[];if(t.tip&&e.$q.platform.is.desktop){const f=t.key?y("div",[y("small",`(CTRL + ${String.fromCharCode(t.key)})`)]):null;s.push(y(Gn,{delay:1e3},()=>[y("div",{innerHTML:t.tip}),f]))}return y(W,{...e.buttonProps.value,icon:t.icon!==null?t.icon:void 0,color:i?t.toggleColor||e.props.toolbarToggleColor:t.color||e.props.toolbarColor,textColor:i&&!e.props.toolbarPush?null:t.textColor||e.props.toolbarTextColor,label:t.label,disable:t.disable?typeof t.disable=="function"?t.disable(e):!0:!1,size:"sm",onClick(f){a&&a(),Lt(f,t,e)}},()=>s)}function ea(e,t){const a=t.list==="only-icons";let r=t.label,i=t.icon!==null?t.icon:void 0,s,f;function u(){M.component.proxy.hide()}if(a)f=t.options.map(c=>{const b=c.type===void 0?e.caret.is(c.cmd,c.param):!1;return b&&(r=c.tip,i=c.icon!==null?c.icon:void 0),Ft(e,c,u,b)}),s=e.toolbarBackgroundClass.value,f=[Ve(f)];else{const c=e.props.toolbarToggleColor!==void 0?`text-${e.props.toolbarToggleColor}`:null,b=e.props.toolbarTextColor!==void 0?`text-${e.props.toolbarTextColor}`:null,E=t.list==="no-icons";f=t.options.map(x=>{const z=x.disable?x.disable(e):!1,C=x.type===void 0?e.caret.is(x.cmd,x.param):!1;C&&(r=x.tip,i=x.icon!==null?x.icon:void 0);const T=x.htmlTip;return y(xn,{active:C,activeClass:c,clickable:!0,disable:z,dense:!0,onClick(te){u(),e.contentRef.value!==null&&e.contentRef.value.focus(),e.caret.restore(),Lt(te,x,e)}},()=>[E===!0?null:y(ht,{class:C?c:b,side:!0},()=>y(Sn,{name:x.icon!==null?x.icon:void 0})),y(ht,T?()=>y("div",{class:"text-no-wrap",innerHTML:x.htmlTip}):x.tip?()=>y("div",{class:"text-no-wrap"},x.tip):void 0)])}),s=[e.toolbarBackgroundClass.value,b]}const g=t.highlight&&r!==t.label,M=y($n,{...e.buttonProps.value,noCaps:!0,noWrap:!0,color:g?e.props.toolbarToggleColor:e.props.toolbarColor,textColor:g&&!e.props.toolbarPush?null:e.props.toolbarTextColor,label:t.fixedLabel?t.label:r,icon:t.fixedIcon?t.icon!==null?t.icon:void 0:i,contentClass:s,onShow:c=>e.emit("dropdownShow",c),onHide:c=>e.emit("dropdownHide",c),onBeforeShow:c=>e.emit("dropdownBeforeShow",c),onBeforeHide:c=>e.emit("dropdownBeforeHide",c)},()=>f);return M}function ta(e){if(e.caret)return e.buttons.value.filter(t=>!e.isViewingSource.value||t.find(a=>a.cmd==="viewsource")).map(t=>Ve(t.map(a=>e.isViewingSource.value&&a.cmd!=="viewsource"?!1:a.type==="slot"?Ke(e.slots[a.slot]):a.type==="dropdown"?ea(e,a):Ft(e,a))))}function na(e,t,a,r={}){const i=Object.keys(r);if(i.length===0)return{};const s={default_font:{cmd:"fontName",param:e,icon:a,tip:t}};return i.forEach(f=>{const u=r[f];s[f]={cmd:"fontName",param:u,icon:a,tip:u,htmlTip:`<font face="${u}">${u}</font>`}}),s}function aa(e){if(e.caret){const t=e.props.toolbarColor||e.props.toolbarTextColor;let a=e.editLinkUrl.value;const r=()=>{e.caret.restore(),a!==e.editLinkUrl.value&&document.execCommand("createLink",!1,a===""?" ":a),e.editLinkUrl.value=null};return[y("div",{class:`q-mx-xs text-${t}`},`${e.$q.lang.editor.url}: `),y("input",{key:"qedt_btm_input",class:"col q-editor__link-input",value:a,onInput:i=>{wn(i),a=i.target.value},onKeydown:i=>{if(_t(i)!==!0)switch(i.keyCode){case 13:return dt(i),r();case 27:dt(i),e.caret.restore(),(!e.editLinkUrl.value||e.editLinkUrl.value==="https://")&&document.execCommand("unlink"),e.editLinkUrl.value=null;break}}}),Ve([y(W,{key:"qedt_btm_rem",tabindex:-1,...e.buttonProps.value,label:e.$q.lang.label.remove,noCaps:!0,onClick:()=>{e.caret.restore(),document.execCommand("unlink"),e.editLinkUrl.value=null}}),y(W,{key:"qedt_btm_upd",...e.buttonProps.value,label:e.$q.lang.label.update,noCaps:!0,onClick:r})])]}}let xe=0;const oa={fullscreen:Boolean,noRouteFullscreenExit:Boolean},ra=["update:fullscreen","fullscreen"];function la(){const e=Te(),{props:t,emit:a,proxy:r}=e;let i,s,f;const u=j(!1);Mn(e)===!0&&A(()=>r.$route.fullPath,()=>{t.noRouteFullscreenExit!==!0&&c()}),A(()=>t.fullscreen,b=>{u.value!==b&&g()}),A(u,b=>{a("update:fullscreen",b),a("fullscreen",b)});function g(){u.value===!0?c():M()}function M(){u.value!==!0&&(u.value=!0,f=r.$el.parentNode,f.replaceChild(s,r.$el),document.body.appendChild(r.$el),xe++,xe===1&&document.body.classList.add("q-body--fullscreen-mixin"),i={handler:c},ft.add(i))}function c(){u.value===!0&&(i!==void 0&&(ft.remove(i),i=void 0),f.replaceChild(r.$el,s),u.value=!1,xe=Math.max(0,xe-1),xe===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),r.$el.scrollIntoView!==void 0&&setTimeout(()=>{r.$el.scrollIntoView()})))}return Dn(()=>{s=document.createElement("span")}),Ht(()=>{t.fullscreen===!0&&M()}),Ye(c),Object.assign(r,{toggleFullscreen:g,setFullscreen:M,exitFullscreen:c}),{inFullscreen:u,toggleFullscreen:g}}const ia=Object.prototype.toString,Ze=Object.prototype.hasOwnProperty,sa=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map(e=>"[object "+e+"]"));function Dt(e){if(e!==Object(e)||sa.has(ia.call(e))===!0||e.constructor&&Ze.call(e,"constructor")===!1&&Ze.call(e.constructor.prototype,"isPrototypeOf")===!1)return!1;let t;for(t in e);return t===void 0||Ze.call(e,t)}function Nt(){let e,t,a,r,i,s,f=arguments[0]||{},u=1,g=!1;const M=arguments.length;for(typeof f=="boolean"&&(g=f,f=arguments[1]||{},u=2),Object(f)!==f&&typeof f!="function"&&(f={}),M===u&&(f=this,u--);u<M;u++)if((e=arguments[u])!==null)for(t in e)a=f[t],r=e[t],f!==r&&(g===!0&&r&&((i=Array.isArray(r))||Dt(r)===!0)?(i===!0?s=Array.isArray(a)===!0?a:[]:s=Dt(a)===!0?a:{},f[t]=Nt(g,s,r)):r!==void 0&&(f[t]=r));return f}const ma=Pe({name:"QEditor",props:{...kt,...oa,modelValue:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:e=>e.length===0||e.every(t=>t.length),default:()=>[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:e=>["div","p"].includes(e),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean},emits:[...ra,"update:modelValue","keydown","click","focus","blur","dropdownShow","dropdownHide","dropdownBeforeShow","dropdownBeforeHide","linkShow","linkHide"],setup(e,{slots:t,emit:a}){const{proxy:r}=Te(),{$q:i}=r,s=xt(e,i),{inFullscreen:f,toggleFullscreen:u}=la(),g=Cn(),M=j(null),c=j(null),b=j(null),E=j(!1),x=w(()=>!e.readonly&&!e.disable);let z,C,T=e.modelValue;document.execCommand("defaultParagraphSeparator",!1,e.paragraphTag),z=window.getComputedStyle(document.body).fontFamily;const te=w(()=>e.toolbarBg?` bg-${e.toolbarBg}`:""),ge=w(()=>({type:"a",flat:e.toolbarOutline!==!0&&e.toolbarPush!==!0,noWrap:!0,outline:e.toolbarOutline,push:e.toolbarPush,rounded:e.toolbarRounded,dense:!0,color:e.toolbarColor,disable:!x.value,size:"sm"})),F=w(()=>{const d=i.lang.editor,v=i.iconSet.editor;return{bold:{cmd:"bold",icon:v.bold,tip:d.bold,key:66},italic:{cmd:"italic",icon:v.italic,tip:d.italic,key:73},strike:{cmd:"strikeThrough",icon:v.strikethrough,tip:d.strikethrough,key:83},underline:{cmd:"underline",icon:v.underline,tip:d.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:v.unorderedList,tip:d.unorderedList},ordered:{cmd:"insertOrderedList",icon:v.orderedList,tip:d.orderedList},subscript:{cmd:"subscript",icon:v.subscript,tip:d.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:v.superscript,tip:d.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:_=>_.caret&&!_.caret.can("link"),icon:v.hyperlink,tip:d.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:v.toggleFullscreen,tip:d.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:v.viewSource,tip:d.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:v.quote,tip:d.quote,key:81},left:{cmd:"justifyLeft",icon:v.left,tip:d.left},center:{cmd:"justifyCenter",icon:v.center,tip:d.center},right:{cmd:"justifyRight",icon:v.right,tip:d.right},justify:{cmd:"justifyFull",icon:v.justify,tip:d.justify},print:{type:"no-state",cmd:"print",icon:v.print,tip:d.print,key:80},outdent:{type:"no-state",disable:_=>_.caret&&!_.caret.can("outdent"),cmd:"outdent",icon:v.outdent,tip:d.outdent},indent:{type:"no-state",disable:_=>_.caret&&!_.caret.can("indent"),cmd:"indent",icon:v.indent,tip:d.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:v.removeFormat,tip:d.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:v.hr,tip:d.hr},undo:{type:"no-state",cmd:"undo",icon:v.undo,tip:d.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:v.redo,tip:d.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:v.heading1||v.heading,tip:d.heading1,htmlTip:`<h1 class="q-ma-none">${d.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:v.heading2||v.heading,tip:d.heading2,htmlTip:`<h2 class="q-ma-none">${d.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:v.heading3||v.heading,tip:d.heading3,htmlTip:`<h3 class="q-ma-none">${d.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:v.heading4||v.heading,tip:d.heading4,htmlTip:`<h4 class="q-ma-none">${d.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:v.heading5||v.heading,tip:d.heading5,htmlTip:`<h5 class="q-ma-none">${d.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:v.heading6||v.heading,tip:d.heading6,htmlTip:`<h6 class="q-ma-none">${d.heading6}</h6>`},p:{cmd:"formatBlock",param:e.paragraphTag,icon:v.heading,tip:d.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:v.code,htmlTip:`<code>${d.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:v.size1||v.size,tip:d.size1,htmlTip:`<font size="1">${d.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:v.size2||v.size,tip:d.size2,htmlTip:`<font size="2">${d.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:v.size3||v.size,tip:d.size3,htmlTip:`<font size="3">${d.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:v.size4||v.size,tip:d.size4,htmlTip:`<font size="4">${d.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:v.size5||v.size,tip:d.size5,htmlTip:`<font size="5">${d.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:v.size6||v.size,tip:d.size6,htmlTip:`<font size="6">${d.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:v.size7||v.size,tip:d.size7,htmlTip:`<font size="7">${d.size7}</font>`}}}),S=w(()=>{const d=e.definitions||{},v=e.definitions||e.fonts?Nt(!0,{},F.value,d,na(z,i.lang.editor.defaultFont,i.iconSet.editor.font,e.fonts)):F.value;return e.toolbar.map(_=>_.map(O=>{if(O.options)return{type:"dropdown",icon:O.icon,label:O.label,size:"sm",dense:!0,fixedLabel:O.fixedLabel,fixedIcon:O.fixedIcon,highlight:O.highlight,list:O.list,options:O.options.map(L=>v[L])};const V=v[O];return V?V.type==="no-state"||d[O]&&(V.cmd===void 0||F.value[V.cmd]&&F.value[V.cmd].type==="no-state")?V:Object.assign({type:"toggle"},V):{type:"slot",slot:O}}))}),k={$q:i,props:e,slots:t,emit:a,inFullscreen:f,toggleFullscreen:u,runCmd:ue,isViewingSource:E,editLinkUrl:b,toolbarBackgroundClass:te,buttonProps:ge,contentRef:c,buttons:S,setContent:J};A(()=>e.modelValue,d=>{T!==d&&(T=d,J(d,!0))}),A(b,d=>{a(`link${d?"Show":"Hide"}`)});const ye=w(()=>e.toolbar&&e.toolbar.length!==0),Q=w(()=>{const d={},v=_=>{_.key&&(d[_.key]={cmd:_.cmd,param:_.param})};return S.value.forEach(_=>{_.forEach(O=>{O.options?O.options.forEach(v):v(O)})}),d}),ve=w(()=>f.value?e.contentStyle:[{minHeight:e.minHeight,height:e.height,maxHeight:e.maxHeight},e.contentStyle]),ne=w(()=>`q-editor q-editor--${E.value===!0?"source":"default"}`+(e.disable===!0?" disabled":"")+(f.value===!0?" fullscreen column":"")+(e.square===!0?" q-editor--square no-border-radius":"")+(e.flat===!0?" q-editor--flat":"")+(e.dense===!0?" q-editor--dense":"")+(s.value===!0?" q-editor--dark q-dark":"")),ae=w(()=>[e.contentClass,"q-editor__content",{col:f.value,"overflow-auto":f.value||e.maxHeight}]),B=w(()=>e.disable===!0?{"aria-disabled":"true"}:{});function De(){if(c.value!==null){const d=`inner${E.value===!0?"Text":"HTML"}`,v=c.value[d];v!==e.modelValue&&(T=v,a("update:modelValue",v))}}function X(d){if(a("keydown",d),d.ctrlKey!==!0||_t(d)===!0){Y();return}const v=d.keyCode,_=Q.value[v];if(_!==void 0){const{cmd:O,param:V}=_;Tt(d),ue(O,V,!1)}}function G(d){Y(),a("click",d)}function oe(d){if(c.value!==null){const{scrollTop:v,scrollHeight:_}=c.value;C=_-v}k.caret.save(),a("blur",d)}function K(d){We(()=>{c.value!==null&&C!==void 0&&(c.value.scrollTop=c.value.scrollHeight-C)}),a("focus",d)}function N(d){const v=M.value;if(v!==null&&v.contains(d.target)===!0&&(d.relatedTarget===null||v.contains(d.relatedTarget)!==!0)){const _=`inner${E.value===!0?"Text":"HTML"}`;k.caret.restorePosition(c.value[_].length),Y()}}function ee(d){const v=M.value;v!==null&&v.contains(d.target)===!0&&(d.relatedTarget===null||v.contains(d.relatedTarget)!==!0)&&(k.caret.savePosition(),Y())}function re(){C=void 0}function le(d){k.caret.save()}function J(d,v){if(c.value!==null){v===!0&&k.caret.savePosition();const _=`inner${E.value===!0?"Text":"HTML"}`;c.value[_]=d,v===!0&&(k.caret.restorePosition(c.value[_].length),Y())}}function ue(d,v,_=!0){ie(),k.caret.restore(),k.caret.apply(d,v,()=>{ie(),k.caret.save(),_&&Y()})}function Y(){setTimeout(()=>{b.value=null,r.$forceUpdate()},1)}function ie(){kn(()=>{c.value!==null&&c.value.focus({preventScroll:!0})})}function U(){return c.value}return Ht(()=>{k.caret=r.caret=new Vn(c.value,k),J(e.modelValue),Y(),document.addEventListener("selectionchange",le)}),Ye(()=>{document.removeEventListener("selectionchange",le)}),Object.assign(r,{runCmd:ue,refreshToolbar:Y,focus:ie,getContentEl:U}),()=>{let d;if(ye.value){const v=[y("div",{key:"qedt_top",class:"q-editor__toolbar row no-wrap scroll-x"+te.value},ta(k))];b.value!==null&&v.push(y("div",{key:"qedt_btm",class:"q-editor__toolbar row no-wrap items-center scroll-x"+te.value},aa(k))),d=y("div",{key:"toolbar_ctainer",class:"q-editor__toolbars-container"},v)}return y("div",{ref:M,class:ne.value,style:{height:f.value===!0?"100%":null},...B.value,onFocusin:N,onFocusout:ee},[d,y("div",{ref:c,style:ve.value,class:ae.value,contenteditable:x.value,placeholder:e.placeholder,...g.listeners.value,onInput:De,onKeydown:X,onClick:G,onBlur:oe,onFocus:K,onMousedown:re,onTouchstartPassive:re})])}}});export{ha as Q,va as a,ma as b};
