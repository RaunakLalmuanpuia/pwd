import{d as R,a as V,c as y}from"./QLayout-DKSVaOqH.js";import{Q as A}from"./QTabs--A_uAsUi.js";import{Q as p}from"./QSelect-CMuBc1me.js";import{r as g,x as F,T,o as r,c,a as s,w as n,F as D,Y as w,d as x,g as k,$ as E,b as a,u,e as P,m as $,n as B,V as S,s as I,ah as Q}from"./app-CD7Aou6H.js";import{Q as J}from"./QForm-sAYSQaeO.js";import{Q as L}from"./QPage-e2gGNbuH.js";import{A as M}from"./Admin-DQU-cB5c.js";import{u as O}from"./use-quasar-BpGjrcA7.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./rtl-DFPa-2ov.js";import"./QChip-Bfh08MFe.js";import"./QMenu-B1JK35e2.js";const G={class:"col-xs-12 col-sm-6"},W={class:"col-xs-12 col-sm-6"},X={key:0},_={key:2},Y={key:0,class:"col-xs-12 col-sm-6"},H={key:0},K={key:2},Z={class:"col-xs-12 col-sm-6"},h={class:"col-xs-12 col-sm-6"},ee={class:"col-xs-12 col-sm-6"},te={class:"col-xs-12"},le={class:"col-xs-12"},oe=Object.assign({layout:M},{__name:"WrittenReport",props:["departments","jobs","exams"],setup(j){g("mails");const v=O();F();const o=T({status:"",state:"",district:"",gender:"",exam:null,posts:"",department:""}),i=g(null),d=g(null),b=g([]),f=g([]),q=()=>{d.value=null,f.value=[],i.value?S.get(route("report.writtenExam"),{department:i.value.value},{preserveState:!0,replace:!0,onSuccess:l=>{b.value=l.props.jobs}}):b.value=[]},C=()=>{o.exam=null,d.value?S.get(route("report.writtenExam"),{job_id:d.value.value},{preserveState:!0,replace:!0,onSuccess:l=>{f.value=l.props.exams}}):f.value=[]},U=[{value:"Male",label:"Male"},{value:"Female",label:"Female"}],N=()=>{v.loading.show(),console.log(d),o.posts=d,o.department=i,(!i||!o.posts)&&(v.notify({type:"warning",message:i?"No Job Avaliable for the selected department.":"Please select a department.",position:"bottom"}),v.loading.hide());const l=route("report.written.download");I.post(l,o,{responseType:"blob"}).then(e=>{const t=window.URL.createObjectURL(new Blob([e.data])),m=document.createElement("a");m.href=t,m.setAttribute("download",Date.now()+".xlsx"),m.click()}).catch(e=>{var t,m;v.notify({type:"negative",message:((m=(t=e.response)==null?void 0:t.data)==null?void 0:m.message)||"Failed to download file"})}).finally(()=>{v.loading.hide()})};return(l,e)=>(r(),c(D,null,[s(R,{padding:"",class:"card justify-center"},{default:n(()=>[s(A,{padding:""},{default:n(()=>[w((r(),x(y,{clickable:"",active:l.route().current()==="report.submitted",class:E({"q-item--active":l.route().current()==="report.submitted"}),onClick:e[0]||(e[0]=t=>l.$inertia.get(l.route("report.submitted")))},{default:n(()=>[s(V,null,{default:n(()=>e[9]||(e[9]=[k(" APPLICATIONS ")])),_:1})]),_:1},8,["active","class"])),[[Q]]),w((r(),x(y,{clickable:"",class:E({"q-item--active":l.route().current()==="report.writtenExam"}),active:l.route().current()==="report.writtenExam",onClick:e[1]||(e[1]=t=>l.$inertia.get(l.route("report.writtenExam")))},{default:n(()=>[s(V,null,{default:n(()=>e[10]||(e[10]=[k(" EXAM REPORT ")])),_:1})]),_:1},8,["class","active"])),[[Q]]),w((r(),x(y,{clickable:"",class:E({"q-item--active":l.route().current()==="report.exam_center"}),active:l.route().current()==="report.exam_center",onClick:e[2]||(e[2]=t=>l.$inertia.get(l.route("report.exam_center")))},{default:n(()=>[s(V,null,{default:n(()=>e[11]||(e[11]=[k(" EXAM CENTER ")])),_:1})]),_:1},8,["class","active"])),[[Q]])]),_:1})]),_:1}),s(L,{padding:""},{default:n(()=>[e[14]||(e[14]=a("p",{class:"q-ma-none page-title py-3"}," Exam Report ",-1)),e[15]||(e[15]=a("br",null,null,-1)),s(J,{onSubmit:N,class:"row q-col-gutter-md q-pa-md"},{default:n(()=>[a("div",G,[s(p,{modelValue:i.value,"onUpdate:modelValue":[e[3]||(e[3]=t=>i.value=t),q],outlined:"",dense:"",options:j.departments,clearable:"",label:"Select Department",rules:[t=>!!t||"Department is required"]},null,8,["modelValue","options","rules"])]),a("div",W,[i.value?b.value.length>0?(r(),x(p,{key:1,modelValue:d.value,"onUpdate:modelValue":[e[4]||(e[4]=t=>d.value=t),C],outlined:"",dense:"",clearable:"",options:b.value,label:"Select Job",rules:[t=>!!t||"Job is required"]},null,8,["modelValue","options","rules"])):(r(),c("p",_,"No jobs available for the selected department.")):(r(),c("p",X,"Please select a department to see jobs."))]),b.value.length>0?(r(),c("div",Y,[d.value?f.value.length>0?(r(),x(p,{key:1,modelValue:u(o).exam,"onUpdate:modelValue":e[5]||(e[5]=t=>u(o).exam=t),outlined:"",dense:"",clearable:"",options:f.value,label:"Select Exam",rules:[t=>!!t||"Exam is required"]},null,8,["modelValue","options","rules"])):(r(),c("p",K,"No exams available for the selected job.")):(r(),c("p",H,"Please select a job to see exams."))])):P("",!0),e[12]||(e[12]=a("div",{class:"col-xs-12 col-sm-6"},null,-1)),e[13]||(e[13]=a("div",{class:"col-xs-12"},[a("p",{class:"ztext q-ma-none"},"optional")],-1)),a("div",Z,[s(p,{modelValue:u(o).state,"onUpdate:modelValue":[e[6]||(e[6]=t=>u(o).state=t),l.onStateChange],outlined:"",class:"my-input",dense:"",options:l.states,clearable:"",label:"State"},null,8,["modelValue","onUpdate:modelValue","options"])]),a("div",h,[s(p,{modelValue:u(o).district,"onUpdate:modelValue":e[7]||(e[7]=t=>u(o).district=t),outlined:"",class:"my-input",dense:"",options:l.districts,clearable:"",label:"District"},null,8,["modelValue","options"])]),a("div",ee,[s(p,{modelValue:u(o).gender,"onUpdate:modelValue":e[8]||(e[8]=t=>u(o).gender=t),outlined:"",class:"my-input",dense:"",options:U,clearable:"",label:"Gender"},null,8,["modelValue"])]),a("div",te,[s($)]),a("div",le,[s(B,{type:"submit",color:"primary",rounded:"",label:"Generate"})])]),_:1})]),_:1})],64))}}),fe=z(oe,[["__scopeId","data-v-08ecdb85"]]);export{fe as default};
