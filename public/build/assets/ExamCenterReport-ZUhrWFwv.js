import{d as R,a as V,c as y}from"./QLayout-ZDwzylqV.js";import{Q as A}from"./QTabs-DkuBSKsT.js";import{Q as p}from"./QSelect-I4aTOHy_.js";import{r as g,M as F,T as P,o as r,c,a,w as n,F as T,R as k,d as x,g as w,U as E,b as s,u as d,e as D,m as B,n as $,Y as C,P as I,ae as Q}from"./app-CvGHsHiU.js";import{Q as J}from"./QForm-Dz_YbOHh.js";import{Q as M}from"./QPage-D5oDhkgJ.js";import{A as L}from"./Admin-c0sW0rbi.js";import{u as O}from"./use-quasar-CkbsZlVu.js";import{_}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./rtl-DFPa-2ov.js";import"./QChip-E4z-7s2U.js";import"./QMenu-By029ty0.js";const z={class:"col-xs-12 col-sm-6"},G={class:"col-xs-12 col-sm-6"},X={key:0},Y={key:2},H={key:0,class:"col-xs-12 col-sm-6"},K={key:0},W={key:2},Z={class:"col-xs-12 col-sm-6"},h={class:"col-xs-12 col-sm-6"},ee={class:"col-xs-12 col-sm-6"},te={class:"col-xs-12"},le={class:"col-xs-12"},oe=Object.assign({layout:L},{__name:"ExamCenterReport",props:["departments","jobs","exams"],setup(S){g("mails");const v=O();F();const o=P({status:"",state:"",district:"",gender:"",exam:null,posts:"",department:""}),i=g(null),u=g(null),b=g([]),f=g([]),j=()=>{u.value=null,f.value=[],i.value?C.get(route("report.exam_center"),{department:i.value.value},{preserveState:!0,replace:!0,onSuccess:l=>{b.value=l.props.jobs}}):b.value=[]},q=()=>{o.exam=null,u.value?C.get(route("report.exam_center"),{job_id:u.value.value},{preserveState:!0,replace:!0,onSuccess:l=>{f.value=l.props.exams}}):f.value=[]},U=[{value:"Male",label:"Male"},{value:"Female",label:"Female"}],N=()=>{v.loading.show(),console.log(u),o.posts=u,o.department=i,(!i||!o.posts)&&(v.notify({type:"warning",message:i?"No Job Avaliable for the selected department.":"Please select a department.",position:"bottom"}),v.loading.hide());const l=route("report.written.download");I.post(l,o,{responseType:"blob"}).then(e=>{const t=window.URL.createObjectURL(new Blob([e.data])),m=document.createElement("a");m.href=t,m.setAttribute("download",Date.now()+".xlsx"),m.click()}).catch(e=>{var t,m;v.notify({type:"negative",message:((m=(t=e.response)==null?void 0:t.data)==null?void 0:m.message)||"Failed to download file"})}).finally(()=>{v.loading.hide()})};return(l,e)=>(r(),c(T,null,[a(R,{padding:"",class:"card justify-center"},{default:n(()=>[a(A,{padding:""},{default:n(()=>[k((r(),x(y,{clickable:"",active:l.route().current()==="report.submitted",class:E({"q-item--active":l.route().current()==="report.submitted"}),onClick:e[0]||(e[0]=t=>l.$inertia.get(l.route("report.submitted")))},{default:n(()=>[a(V,null,{default:n(()=>e[9]||(e[9]=[w(" APPLICATIONS ")])),_:1})]),_:1},8,["active","class"])),[[Q]]),k((r(),x(y,{clickable:"",class:E({"q-item--active":l.route().current()==="report.writtenExam"}),active:l.route().current()==="report.writtenExam",onClick:e[1]||(e[1]=t=>l.$inertia.get(l.route("report.writtenExam")))},{default:n(()=>[a(V,null,{default:n(()=>e[10]||(e[10]=[w(" EXAM REPORT ")])),_:1})]),_:1},8,["class","active"])),[[Q]]),k((r(),x(y,{clickable:"",class:E({"q-item--active":l.route().current()==="report.exam_center"}),active:l.route().current()==="report.exam_center",onClick:e[2]||(e[2]=t=>l.$inertia.get(l.route("report.exam_center")))},{default:n(()=>[a(V,null,{default:n(()=>e[11]||(e[11]=[w(" EXAM CENTER ")])),_:1})]),_:1},8,["class","active"])),[[Q]])]),_:1})]),_:1}),a(M,{padding:""},{default:n(()=>[e[14]||(e[14]=s("p",{class:"q-ma-none page-title py-3"}," Exam Center ",-1)),e[15]||(e[15]=s("br",null,null,-1)),a(J,{onSubmit:N,class:"row q-col-gutter-md q-pa-md"},{default:n(()=>[s("div",z,[a(p,{modelValue:i.value,"onUpdate:modelValue":[e[3]||(e[3]=t=>i.value=t),j],outlined:"",dense:"",options:S.departments,clearable:"",label:"Select Department",rules:[t=>!!t||"Department is required"]},null,8,["modelValue","options","rules"])]),s("div",G,[i.value?b.value.length>0?(r(),x(p,{key:1,modelValue:u.value,"onUpdate:modelValue":[e[4]||(e[4]=t=>u.value=t),q],outlined:"",dense:"",clearable:"",options:b.value,label:"Select Job",rules:[t=>!!t||"Job is required"]},null,8,["modelValue","options","rules"])):(r(),c("p",Y,"No jobs available for the selected department.")):(r(),c("p",X,"Please select a department to see jobs."))]),b.value.length>0?(r(),c("div",H,[u.value?f.value.length>0?(r(),x(p,{key:1,modelValue:d(o).exam,"onUpdate:modelValue":e[5]||(e[5]=t=>d(o).exam=t),outlined:"",dense:"",clearable:"",options:f.value,label:"Select Exam",rules:[t=>!!t||"Exam is required"]},null,8,["modelValue","options","rules"])):(r(),c("p",W,"No exams available for the selected job.")):(r(),c("p",K,"Please select a job to see exams."))])):D("",!0),e[12]||(e[12]=s("div",{class:"col-xs-12 col-sm-6"},null,-1)),e[13]||(e[13]=s("div",{class:"col-xs-12"},[s("p",{class:"ztext q-ma-none"},"optional")],-1)),s("div",Z,[a(p,{modelValue:d(o).state,"onUpdate:modelValue":[e[6]||(e[6]=t=>d(o).state=t),l.onStateChange],outlined:"",class:"my-input",dense:"",options:l.states,clearable:"",label:"State"},null,8,["modelValue","onUpdate:modelValue","options"])]),s("div",h,[a(p,{modelValue:d(o).district,"onUpdate:modelValue":e[7]||(e[7]=t=>d(o).district=t),outlined:"",class:"my-input",dense:"",options:l.districts,clearable:"",label:"District"},null,8,["modelValue","options"])]),s("div",ee,[a(p,{modelValue:d(o).gender,"onUpdate:modelValue":e[8]||(e[8]=t=>d(o).gender=t),outlined:"",class:"my-input",dense:"",options:U,clearable:"",label:"Gender"},null,8,["modelValue"])]),s("div",te,[a(B)]),s("div",le,[a($,{type:"submit",color:"primary",rounded:"",label:"Generate"})])]),_:1})]),_:1})],64))}}),fe=_(oe,[["__scopeId","data-v-7ae482af"]]);export{fe as default};
