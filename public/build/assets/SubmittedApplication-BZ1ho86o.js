import{Q as B}from"./QSpace-CATtI3fe.js";import{T as _,r as x,A as L,j as z,o as h,c as k,a as l,w as d,v as E,F as N,b as t,Q as q,D as M,z as K,n as u,m as Y,I as F,J as v,K as I,t as c,p as J,E as H,L as G,H as W,u as C,C as j}from"./app-C0HpZeVe.js";import{Q as X}from"./QTabs-DpOCD-9-.js";import{Q as A}from"./QSelect-CjSQjMjU.js";import{Q as Z}from"./QBtnDropdown-fIvxY1p1.js";import{Q as ee}from"./QPage-CoR-6Q9E.js";import{A as te}from"./Admin-B7ArI4ga.js";import{u as le}from"./use-quasar-DjJvszC4.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QLayout-C48ZH50D.js";import"./rtl-DFPa-2ov.js";import"./QChip-BZdNOvga.js";import"./QMenu-CeDzCUZ6.js";const se={class:"flex justify-between items-center zcard q-pa-md"},oe={class:"flex items-center q-gutter-md"},ie={class:"row q-mt-sm"},ne={class:"page-title"},de={class:"col-xs-12"},re={class:"table-auto border-collapse border border-gray-300 w-full mt-6 text-sm"},pe={class:"bg-gray-100"},ue={class:"px-4 py-2 text-left text-gray-600"},ce=["checked"],me={class:"px-4 py-2"},ge=["value"],fe={class:"px-4 py-2"},be={class:"px-4 py-2"},ye={class:"px-4 py-2"},ve={class:"px-4 py-2"},xe={class:"px-4 py-2"},he={class:"px-4 py-2"},ke=["onClick"],Ce={class:"flex justify-between items-center mt-4"},je={class:"flex items-center q-gutter-sm"},Ae={class:"text-gray-600"},we=Object.assign({layout:te},{__name:"SubmittedApplication",props:["jobDetails","applications","search","perPage"],setup(o){const f=le(),r=o,b=_({application_ids:[],status:""}),m=_({status:"",rejection_note:"",application_ids:[]}),g=x(!1),R=()=>{g.value=!0},U=()=>{var a;m.application_ids=i.value,m.status="rejected",f.dialog({title:"Confirmation",message:"Do you want to proceed with "+((a=i.value)==null?void 0:a.length)+" Applications",ok:"Yes",cancel:"No"}).onOk(()=>{m.put(route("admin.applications.reject_application"),{onSuccess:()=>{var n;const e=((n=i.value)==null?void 0:n.length)+" Applications marked as Rejected";f.notify({type:"positive",message:e}),m.reset(),g.value=!1,i.value=[]}})})},p=L({search:r==null?void 0:r.search,tab:route().current(),perPage:(r==null?void 0:r.perPage)||1});x("");const w=a=>{j.get(route("admin.applications.show_submission",r.jobDetails.id),{search:p.search,perPage:p.perPage})},O=a=>{j.get(route(a))},y=a=>{a&&j.get(a,{search:p.search,perPage:p.perPage})},i=x([]),T=z({get:()=>r.applications.data.length>0&&i.value.length===r.applications.data.length,set:a=>V(a)});function V(a){i.value=a?r.applications.data.map(e=>e.id):[]}const $=()=>{var a;b.application_ids=i.value,b.status="approved",f.dialog({title:"Confirmation",message:"Do you want to proceed with "+((a=i.value)==null?void 0:a.length)+" Applications",ok:"Yes",cancel:"No"}).onOk(()=>{b.put(route("admin.applications.bulkChangeStatus"),{onSuccess:()=>{var n;const e=((n=i.value)==null?void 0:n.length)+" Applications marked as Qualified";f.notify({type:"positive",message:e}),b.reset(),i.value=[]}})})};return(a,e)=>(h(),k(N,null,[l(ee,{padding:""},{default:d(()=>{var n;return[e[21]||(e[21]=t("p",{class:"page-title"},"SUBMITTED APPLICATIONS",-1)),t("div",se,[l(X,{stretch:"",shrink:"",modelValue:p.tab,"onUpdate:modelValue":[e[1]||(e[1]=s=>p.tab=s),O],align:"start"},{default:d(()=>[l(B),l(q,{modelValue:p.search,"onUpdate:modelValue":e[0]||(e[0]=s=>p.search=s),autofocus:"",outlined:"",dense:"",onKeyup:M(w,["enter"]),"bg-color":"white",placeholder:"Search"},{append:d(()=>[l(K,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),t("div",oe,[l(u,{onClick:$,color:"primary",disabled:i.value.length===0,label:"Mark as Qualified"},null,8,["disabled"]),l(u,{onClick:R,color:"primary",disabled:i.value.length===0,label:"Mark as Rejected"},null,8,["disabled"]),l(Y,{vertical:""}),l(Z,{class:"q-ma-xs q-pa-xs",color:"primary",flat:"","dropdown-icon":"sort"},{default:d(()=>[l(F,{class:"q-pa-sm",style:{"min-width":"280px"}},{default:d(()=>[l(v,null,{default:d(()=>e[14]||(e[14]=[t("p",{class:"q-ma-none ztext-lg"},"Filter",-1)])),_:1}),l(v,null,{default:d(()=>[l(A,{modelValue:a.filterData.job,"onUpdate:modelValue":e[2]||(e[2]=s=>a.filterData.job=s),options:a.jobs,class:"my-input",dense:"",label:"Job",outlined:""},null,8,["modelValue","options"])]),_:1}),l(v,null,{default:d(()=>[l(A,{modelValue:a.filterData.district,"onUpdate:modelValue":e[3]||(e[3]=s=>a.filterData.district=s),options:a.districts,class:"my-input",dense:"",label:"District",outlined:""},null,8,["modelValue","options"])]),_:1}),l(I,null,{default:d(()=>[l(u,{flat:"",label:"Reset",onClick:a.resetFilter},null,8,["onClick"]),l(u,{color:"primary",label:"Filter",rounded:"",style:{"min-width":"100px"},onClick:a.doFilter},null,8,["onClick"])]),_:1})]),_:1})]),_:1})])]),t("div",ie,[t("p",ne,c((n=o.jobDetails)==null?void 0:n.post_name)+" : APPLICATIONS",1),t("div",de,[t("table",re,[t("thead",pe,[t("tr",null,[t("th",ue,[t("input",{type:"checkbox",onChange:e[4]||(e[4]=s=>V(s.target.checked)),checked:T.value},null,40,ce)]),e[15]||(e[15]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Applicant Name",-1)),e[16]||(e[16]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Roll No",-1)),e[17]||(e[17]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Community",-1)),e[18]||(e[18]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Disability",-1)),e[19]||(e[19]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Status",-1)),e[20]||(e[20]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Actions",-1))])]),t("tbody",null,[(h(!0),k(N,null,J(o.applications.data,s=>{var Q,S,D;return h(),k("tr",{key:s.id,class:"hover:bg-gray-50 transition duration-150"},[t("td",me,[H(t("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=P=>i.value=P),value:s.id},null,8,ge),[[G,i.value]])]),t("td",fe,c(((Q=s.applicant.user)==null?void 0:Q.name)||"N/A"),1),t("td",be,c(s.application_id||"N/A"),1),t("td",ye,c(((S=s.applicant)==null?void 0:S.community)||"N/A"),1),t("td",ve,c((D=s.applicant)!=null&&D.disability?"Yes":"No"),1),t("td",xe,[t("span",{class:W(["px-2 py-1 rounded-full text-xs font-semibold",s.status==="approved"?"bg-green-100 text-green-800":s.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"])},c(s.status||"Pending"),3)]),t("td",he,[t("button",{onClick:P=>a.$inertia.get(a.route("admin.application.show_applicant_detail",{jobDetails:o.jobDetails.id,application:s.id})),class:"bg-blue-500 hover:bg-blue-700 text-white py-1 px-4 rounded mr-2 transition duration-150"}," OPEN ",8,ke)])])}),128))])]),t("div",Ce,[l(A,{modelValue:p.perPage,"onUpdate:modelValue":[e[6]||(e[6]=s=>p.perPage=s),w],dense:"",outlined:"",options:[5,10,20,25],label:"Results per page",style:{width:"150px"}},null,8,["modelValue"]),t("div",je,[l(u,{disable:o.applications.current_page===1,onClick:e[7]||(e[7]=s=>y(o.applications.first_page_url)),flat:"",round:"",icon:"first_page"},null,8,["disable"]),l(u,{disable:!o.applications.prev_page_url,onClick:e[8]||(e[8]=s=>y(o.applications.prev_page_url)),flat:"",round:"",icon:"chevron_left"},null,8,["disable"]),t("span",Ae," Page "+c(o.applications.current_page)+" of "+c(o.applications.last_page),1),l(u,{disable:!o.applications.next_page_url,onClick:e[9]||(e[9]=s=>y(o.applications.next_page_url)),flat:"",round:"",icon:"chevron_right"},null,8,["disable"]),l(u,{disable:o.applications.current_page===o.applications.last_page,onClick:e[10]||(e[10]=s=>y(o.applications.last_page_url)),flat:"",round:"",icon:"last_page"},null,8,["disable"])])])])])]}),_:1}),l(E,{modelValue:g.value,"onUpdate:modelValue":e[13]||(e[13]=n=>g.value=n),persistent:""},{default:d(()=>[l(F,{style:{"min-width":"450px"}},{default:d(()=>[l(v,null,{default:d(()=>[e[22]||(e[22]=t("div",{class:"text-h6 q-mb-md"},"Rejection Reason for Selected Applicants",-1)),l(q,{modelValue:C(m).rejection_note,"onUpdate:modelValue":e[11]||(e[11]=n=>C(m).rejection_note=n),label:"Rejection Note",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),l(I,null,{default:d(()=>[l(u,{flat:"",label:"Cancel",onClick:e[12]||(e[12]=n=>g.value=!1),color:"primary"}),l(u,{flat:"",disable:!C(m).rejection_note,label:"Assign",onClick:U,color:"primary"},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),Te=ae(we,[["__scopeId","data-v-1b990288"]]);export{Te as default};
