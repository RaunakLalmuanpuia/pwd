import{T as $,r as y,o as S,d as C,w as s,b as u,a as t,Q as d,u as m,m as U,n as f,g as r,c as R,p as z,t as b,F as L,l as H,_ as q,W as k,R as E,v as Q}from"./app-D3lAG8hJ.js";import{Q as O,a as D,b as v,c as _}from"./QMarkupTable-BdOPTITA.js";import{Q as W}from"./QForm-CC0ob0Dj.js";import{Q as G}from"./QPage-Cx-Lq6Am.js";import{C as j}from"./ClosePopup-CLRDkiQW.js";import{A as J}from"./Admin-CnYh41r5.js";import"./QLayout-DXwAq9-3.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const K={class:"col-xs-12 col-sm-12"},X={class:"col-xs-12 col-sm-6"},Y={class:"col-xs-12 col-sm-6"},Z={class:"col-xs-12 col-sm-6"},h={class:"col-xs-12 col-sm-6"},ee={class:"col-xs-12"},le={class:"col-xs-12 flex justify-between items-center"},te={class:"col-xs-12"},ae={class:"col-xs-12 col-sm-6"},se={class:"col-xs-12"},ue={class:"col-xs-12 flex justify-center items-center q-gutter-sm"},ne={class:"flex justify-between items-center"},oe={class:"flex q-gutter-sm"},de={class:"flex justify-between items-center"},ie={class:"flex q-gutter-sm"},ye=Object.assign({layout:J},{__name:"Edit",props:{exam:Object},setup(A){const p=A,n=$({exam_name:p.exam.exam_name,exam_date:p.exam.exam_date,description:p.exam.description,pass_mark:p.exam.pass_mark,full_mark:p.exam.full_mark,start_at:p.exam.start_at,end_at:p.exam.end_at,active:!!p.exam.active,subjects:p.exam.subjects.map(a=>({id:a.id,subject_name:a.subject_name,exam_date:a.exam_date,full_mark:a.full_mark,start_time:a.start_time,end_time:a.end_time}))}),x=y(!1),V=y(!1),o=y({id:"",subject_name:"",exam_date:"",full_mark:"",start_time:"",end_time:""}),i=y({id:"",subject_name:"",exam_date:"",full_mark:"",start_time:"",end_time:""});function w(){o.value={subject_name:"",exam_date:"",full_mark:"",start_time:"",end_time:""}}function I(){const a={id:null,subject_name:o.value.subject_name,exam_date:o.value.exam_date,full_mark:o.value.full_mark,start_time:o.value.start_time,end_time:o.value.end_time};n.subjects.push(a),w(),x.value=!1}function F(a){const l=n.subjects[a];i.value={...l},V.value=!0}function P(){const a=n.subjects.findIndex(l=>l.id===i.value.id);a!==-1&&(n.subjects[a]={...i.value},V.value=!1)}function T(a){n.subjects.splice(a,1)}const M=()=>{n.put(route("exams.update",p.exam.id))};function N(a){if(!a)return"";const[l,e]=a.split(":"),c=parseInt(l,10),g=c>=12;return`${c%12||12}:${e} ${g?"PM":"AM"}`}function B(a){if(!a)return"";const l=new Date(a),e={day:"2-digit",month:"long",year:"numeric"};return l.toLocaleDateString("en-IN",e)}return(a,l)=>(S(),C(G,{padding:""},{default:s(()=>[l[30]||(l[30]=u("p",{class:"page-title"},"Edit Examinations",-1)),t(W,{onSubmit:M,onReset:a.reset,class:"row q-col-gutter-sm zcard q-pa-md"},{default:s(()=>[u("div",K,[t(d,{modelValue:m(n).exam_name,"onUpdate:modelValue":l[0]||(l[0]=e=>m(n).exam_name=e),outlined:"",dense:"",class:"my-input",label:"Name of examination",rules:[e=>!!e||"Name is required"]},null,8,["modelValue","rules"])]),u("div",X,[t(d,{modelValue:m(n).pass_mark,"onUpdate:modelValue":l[1]||(l[1]=e=>m(n).pass_mark=e),outlined:"",dense:"",class:"my-input",label:"Pass mark",rules:[e=>!isNaN(e)||"Invalid format"]},null,8,["modelValue","rules"])]),u("div",Y,[t(d,{modelValue:m(n).full_mark,"onUpdate:modelValue":l[2]||(l[2]=e=>m(n).full_mark=e),outlined:"",dense:"",class:"my-input",label:"Full mark",rules:[e=>!isNaN(e)||"Invalid format"]},null,8,["modelValue","rules"])]),u("div",Z,[t(d,{modelValue:m(n).start_at,"onUpdate:modelValue":l[3]||(l[3]=e=>m(n).start_at=e),type:"datetime-local",outlined:"",dense:"","stack-label":"",class:"my-input",label:"Start",rules:[e=>!!e||"Invalid Date time"]},null,8,["modelValue","rules"])]),u("div",h,[t(d,{modelValue:m(n).end_at,"onUpdate:modelValue":l[4]||(l[4]=e=>m(n).end_at=e),type:"datetime-local","stack-label":"",outlined:"",dense:"",class:"my-input",label:"End",rules:[e=>!!e||"Invalid Date time"]},null,8,["modelValue","rules"])]),u("div",ee,[t(U)]),u("div",le,[l[19]||(l[19]=u("div",{class:"text-grey-7"},"Click Add button to add paper",-1)),t(f,{onClick:l[5]||(l[5]=e=>x.value=!0),rounded:"",color:"primary",outline:"",label:"Add"})]),u("div",te,[t(O,{flat:""},{default:s(()=>[t(D,null,{default:s(()=>[t(v,{align:"left",style:{width:"20%"}},{default:s(()=>l[20]||(l[20]=[r("Subject")])),_:1}),t(v,{align:"center",style:{width:"20%"}},{default:s(()=>l[21]||(l[21]=[r("Date")])),_:1}),t(v,{align:"center",style:{width:"15%"}},{default:s(()=>l[22]||(l[22]=[r("Pass Mark")])),_:1}),t(v,{align:"center",style:{width:"15%"}},{default:s(()=>l[23]||(l[23]=[r("Start")])),_:1}),t(v,{align:"center",style:{width:"20%"}},{default:s(()=>l[24]||(l[24]=[r("End")])),_:1}),t(v,{align:"center",style:{width:"10%"}},{default:s(()=>l[25]||(l[25]=[r("Action")])),_:1})]),_:1}),(S(!0),R(L,null,z(m(n).subjects,(e,c)=>(S(),C(D,{key:c},{default:s(()=>[t(_,{align:"left"},{default:s(()=>[r(b(e==null?void 0:e.subject_name),1)]),_:2},1024),t(_,{align:"center"},{default:s(()=>[r(b(B(e==null?void 0:e.exam_date)),1)]),_:2},1024),t(_,{align:"center"},{default:s(()=>[r(b(e==null?void 0:e.full_mark),1)]),_:2},1024),t(_,{align:"center"},{default:s(()=>[r(b(N(e==null?void 0:e.start_time)),1)]),_:2},1024),t(_,{align:"center"},{default:s(()=>[r(b(N(e==null?void 0:e.end_time)),1)]),_:2},1024),t(_,{align:"center"},{default:s(()=>[t(f,{flat:"",icon:"edit",onClick:g=>F(c)},null,8,["onClick"]),t(f,{flat:"",icon:"cancel",onClick:g=>T(c)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),u("div",ae,[t(H,{modelValue:m(n).active,"onUpdate:modelValue":l[6]||(l[6]=e=>m(n).active=e),label:"Active"},null,8,["modelValue"])]),u("div",se,[t(U)]),u("div",ue,[t(f,{type:"reset",label:"Cancel",flat:""}),t(f,{class:"q-px-lg",type:"submit",label:"Save",rounded:"",color:"primary"})])]),_:1},8,["onReset"]),t(Q,{modelValue:x.value,"onUpdate:modelValue":l[12]||(l[12]=e=>x.value=e)},{default:s(()=>[t(q,{class:"q-pa-md"},{default:s(()=>[u("div",ne,[l[26]||(l[26]=u("div",{class:"ztext-lg"},"New Subject",-1)),k(t(E,{name:"cancel",class:"cursor-pointer"},null,512),[[j]])]),l[27]||(l[27]=u("br",null,null,-1)),t(d,{modelValue:o.value.subject_name,"onUpdate:modelValue":l[7]||(l[7]=e=>o.value.subject_name=e),outlined:"",class:"my-input",rules:[e=>!!e||"Name is required"],label:"Paper Name"},null,8,["modelValue","rules"]),t(d,{modelValue:o.value.exam_date,"onUpdate:modelValue":l[8]||(l[8]=e=>o.value.exam_date=e),outlined:"",class:"my-input",rules:[e=>!!e||"Exam Date is required"],type:"date",label:"Date of Exam"},null,8,["modelValue","rules"]),t(d,{modelValue:o.value.full_mark,"onUpdate:modelValue":l[9]||(l[9]=e=>o.value.full_mark=e),outlined:"",dense:"",class:"my-input",label:"Full Mark",rules:[e=>!isNaN(e)||"Invalid format"]},null,8,["modelValue","rules"]),t(d,{modelValue:o.value.start_time,"onUpdate:modelValue":l[10]||(l[10]=e=>o.value.start_time=e),outlined:"",type:"time",class:"my-input",rules:[e=>!!e||"Start time is required"],label:"Start At"},null,8,["modelValue","rules"]),t(d,{modelValue:o.value.end_time,"onUpdate:modelValue":l[11]||(l[11]=e=>o.value.end_time=e),outlined:"",type:"time",class:"my-input",rules:[e=>!!e||"End tim is required"],label:"End At"},null,8,["modelValue","rules"]),u("div",oe,[t(f,{type:"submit",style:{"min-width":"90px"},rounded:"",color:"primary",onClick:I,label:"Add"}),k(t(f,{rounded:"",color:"negative",outline:"",label:"Reset",onClick:w},null,512),[[j]])])]),_:1})]),_:1},8,["modelValue"]),t(Q,{modelValue:V.value,"onUpdate:modelValue":l[18]||(l[18]=e=>V.value=e)},{default:s(()=>[t(q,{class:"q-pa-md"},{default:s(()=>[u("div",de,[l[28]||(l[28]=u("div",{class:"ztext-lg"},"Edit Subject",-1)),k(t(E,{name:"cancel",class:"cursor-pointer"},null,512),[[j]])]),l[29]||(l[29]=u("br",null,null,-1)),t(d,{modelValue:i.value.subject_name,"onUpdate:modelValue":l[13]||(l[13]=e=>i.value.subject_name=e),outlined:"",class:"my-input",rules:[e=>!!e||"Name is required"],label:"Paper Name"},null,8,["modelValue","rules"]),t(d,{modelValue:i.value.exam_date,"onUpdate:modelValue":l[14]||(l[14]=e=>i.value.exam_date=e),outlined:"",class:"my-input",rules:[e=>!!e||"Exam Date is required"],type:"date",label:"Date of Exam"},null,8,["modelValue","rules"]),t(d,{modelValue:i.value.full_mark,"onUpdate:modelValue":l[15]||(l[15]=e=>i.value.full_mark=e),outlined:"",dense:"",class:"my-input",label:"Full Mark",rules:[e=>!isNaN(e)||"Invalid format"]},null,8,["modelValue","rules"]),t(d,{modelValue:i.value.start_time,"onUpdate:modelValue":l[16]||(l[16]=e=>i.value.start_time=e),outlined:"",type:"time",class:"my-input",rules:[e=>!!e||"Start time is required"],label:"Start At"},null,8,["modelValue","rules"]),t(d,{modelValue:i.value.end_time,"onUpdate:modelValue":l[17]||(l[17]=e=>i.value.end_time=e),outlined:"",type:"time",class:"my-input",rules:[e=>!!e||"End time is required"],label:"End At"},null,8,["modelValue","rules"]),u("div",ie,[t(f,{type:"submit",style:{"min-width":"90px"},rounded:"",color:"primary",onClick:P,label:"Save Changes"}),k(t(f,{rounded:"",color:"negative",outline:"",label:"Cancel",onClick:a.resetEditSubjectForm},null,8,["onClick"]),[[j]])])]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{ye as default};
