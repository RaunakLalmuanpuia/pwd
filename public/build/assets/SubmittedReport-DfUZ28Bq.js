import{d as T,a as g,c as V}from"./QLayout-DWrMXjv5.js";import{Q as U}from"./QRouteTab-COEeHAV4.js";import{Q as k}from"./QTabs-BrylgiDF.js";import{Q as u}from"./QSelect-DfKM7wJG.js";import{r as b,M as x,T as D,o as m,c as v,a as l,w as r,F as q,R as y,d as f,g as w,U as Q,b as o,u as n,m as B,n as R,Y as F,P as L,ae as E}from"./app-hFreFEoK.js";import{Q as j}from"./QForm-DeYgiAED.js";import{Q as C}from"./QPage-PJihS_ZJ.js";import{A as N}from"./Admin-BptqES0q.js";import{u as M}from"./use-quasar-C-mQpRgK.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./rtl-DFPa-2ov.js";import"./QChip-DHcCih2r.js";import"./QMenu-CUuZkrYu.js";const G={class:"col-xs-12 col-sm-6"},$={class:"col-xs-12 col-sm-6"},z={class:"col-xs-12 col-sm-6"},J={key:0},W={key:2},X={class:"col-xs-12 col-sm-6"},Y={class:"col-xs-12 col-sm-6"},H={class:"col-xs-12 col-sm-6"},K={class:"col-xs-12"},Z={class:"col-xs-12"},h=Object.assign({layout:N},{__name:"SubmittedReport",props:["departments","jobs"],setup(c){b("mails");const p=M();x();const a=D({status:"",state:"",district:"",gender:"",posts:""}),i=b(null);b(null);const S=()=>{i.value&&F.get(route("report.submitted"),{department:i.value.value},{preserveState:!0,replace:!0})},A=[{value:["ELIGIBLE"],label:"Eligible"},{value:["SUBMITTED"],label:"Pending"},{value:["APPROVED"],label:"Approved"},{value:["ELIGIBLE","SUBMITTED","APPROVED"],label:"All"}],I=[{value:"Male",label:"Male"},{value:"Female",label:"Female"}],P=()=>{p.loading.show(),(!i||!a.posts)&&(p.notify({type:"warning",message:i?"No Job Avaliable for the selected department.":"Please select a department.",position:"bottom"}),p.loading.hide());const s=route("report.application.download");L.post(s,a,{responseType:"blob"}).then(e=>{const t=window.URL.createObjectURL(new Blob([e.data])),d=document.createElement("a");d.href=t,d.setAttribute("download",Date.now()+".xlsx"),d.click()}).catch(e=>{var t,d;p.notify({type:"negative",message:((d=(t=e.response)==null?void 0:t.data)==null?void 0:d.message)||"Failed to download file"})}).finally(()=>{p.loading.hide()})};return(s,e)=>(m(),v(q,null,[l(T,{class:"card justify-center"},{default:r(()=>[l(k,null,{default:r(()=>[y((m(),f(V,{clickable:"",active:s.route().current()==="report.submitted",class:Q({"q-item--active":s.route().current()==="report.submitted"}),onClick:e[0]||(e[0]=t=>s.$inertia.get(s.route("report.submitted")))},{default:r(()=>[l(g,null,{default:r(()=>e[8]||(e[8]=[w(" APPLICATIONS ")])),_:1})]),_:1},8,["active","class"])),[[E]]),y((m(),f(V,{clickable:"",class:Q({"q-item--active":s.route().current()==="report.writtenExam"}),active:s.route().current()==="report.writtenExam",onClick:e[1]||(e[1]=t=>s.$inertia.get(s.route("report.writtenExam")))},{default:r(()=>[l(g,null,{default:r(()=>e[9]||(e[9]=[w(" WRITTEN EXAM ")])),_:1})]),_:1},8,["class","active"])),[[E]]),l(U,{replace:"",to:{name:"report:interview"},label:"Interview"})]),_:1})]),_:1}),l(C,{padding:""},{default:r(()=>[e[12]||(e[12]=o("p",{class:"q-ma-none page-title py-3"}," Applications",-1)),e[13]||(e[13]=o("br",null,null,-1)),l(j,{onSubmit:P,class:"row q-col-gutter-md q-pa-md"},{default:r(()=>[o("div",G,[l(u,{modelValue:i.value,"onUpdate:modelValue":[e[2]||(e[2]=t=>i.value=t),S],outlined:"",dense:"",options:c.departments,clearable:"",label:"Select Department",rules:[t=>!!t||"Department is required"]},null,8,["modelValue","options","rules"])]),o("div",$,[l(u,{modelValue:n(a).status,"onUpdate:modelValue":e[3]||(e[3]=t=>n(a).status=t),outlined:"",class:"my-input",dense:"",label:"Application Status",options:A,rules:[t=>!!t||"Status is required"]},null,8,["modelValue","rules"])]),o("div",z,[i.value?c.jobs.length>0?(m(),f(u,{key:1,modelValue:n(a).posts,"onUpdate:modelValue":e[4]||(e[4]=t=>n(a).posts=t),outlined:"",class:"my-input",dense:"",options:c.jobs,clearable:"",label:"Post",rules:[t=>!!t||"Post is required"]},null,8,["modelValue","options","rules"])):(m(),v("p",W,"No jobs available for the selected department.")):(m(),v("p",J,"Please select a department."))]),e[10]||(e[10]=o("div",{class:"col-xs-12 col-sm-6"},null,-1)),e[11]||(e[11]=o("div",{class:"col-xs-12"},[o("p",{class:"ztext q-ma-none"},"optional")],-1)),o("div",X,[l(u,{modelValue:n(a).state,"onUpdate:modelValue":[e[5]||(e[5]=t=>n(a).state=t),s.onStateChange],outlined:"",class:"my-input",dense:"",options:s.states,clearable:"",label:"State"},null,8,["modelValue","onUpdate:modelValue","options"])]),o("div",Y,[l(u,{modelValue:n(a).district,"onUpdate:modelValue":e[6]||(e[6]=t=>n(a).district=t),outlined:"",class:"my-input",dense:"",options:s.districts,clearable:"",label:"District"},null,8,["modelValue","options"])]),o("div",H,[l(u,{modelValue:n(a).gender,"onUpdate:modelValue":e[7]||(e[7]=t=>n(a).gender=t),outlined:"",class:"my-input",dense:"",options:I,clearable:"",label:"Gender"},null,8,["modelValue"])]),o("div",K,[l(B)]),o("div",Z,[l(R,{type:"submit",color:"primary",rounded:"",label:"Generate"})])]),_:1})]),_:1})],64))}}),pe=O(h,[["__scopeId","data-v-06645a23"]]);export{pe as default};
