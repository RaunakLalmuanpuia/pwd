import{r as h,T as g,o as r,a as o,b as s,t as m,F as c,i as x,f as v,j as k,C as M,aS as _}from"./app-DPkQUZ_H.js";import{A as w}from"./Admin-DjyVIRTV.js";import"./QLayout-WtSi1Uhk.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"max-w-4xl mx-auto p-6 bg-white shadow-md rounded-lg"},E={class:"text-2xl font-semibold text-center mb-6"},j={class:"text-lg font-semibold text-gray-700 mb-4"},D={class:"block text-sm font-medium text-gray-700"},S=["onUpdate:modelValue","placeholder"],V={key:0,class:"text-red-500 text-sm mt-1"},B={key:0,class:"mt-8"},F={class:"overflow-x-auto"},L={class:"min-w-full table-auto"},N={class:"bg-gray-200"},C={class:"border px-4 py-2"},q=Object.assign({layout:w},{__name:"AssignMark",props:{exam:Object,applicants:Array,subjects:Array,examMarks:Array},setup(l){const i=l,b=(d,n)=>{const e=i.examMarks[d];if(e){const a=e.find(t=>t.subject_id===n);return a?a.marks:null}return null},u=h(i.applicants.map((d,n)=>{const e={};return i.subjects.forEach(a=>{const t=b(d.id,a.id);e[a.id]=t!==null?t:null}),e})),p=g({marks:[]}),f=()=>{const d=[];i.applicants.forEach((n,e)=>{i.subjects.forEach(a=>{const t=u.value[e][a.id];t!==null&&d.push({applicant_id:n.id,subject_id:a.id,marks:t})})}),p.marks=d,p.post(route("exams.storeMarks",i.exam.id))};return(d,n)=>(r(),o("div",A,[s("h1",E,"Assign Marks for Exam: "+m(l.exam.exam_name),1),s("form",{onSubmit:v(f,["prevent"]),class:"space-y-6"},[(r(!0),o(c,null,x(l.applicants,(e,a)=>(r(),o("div",{key:e.id,class:"border p-4 rounded-lg shadow-sm bg-gray-50"},[s("h2",j,m(e.user.name),1),(r(!0),o(c,null,x(l.subjects,(t,O)=>(r(),o("div",{key:t.id,class:"mb-4"},[s("label",D,m(t.subject_name),1),M(s("input",{"onUpdate:modelValue":y=>u.value[a][t.id]=y,type:"number",min:"0",max:"100",placeholder:`Marks for ${t.subject_name}`,class:"mt-1 block w-full px-4 py-2 border rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,8,S),[[_,u.value[a][t.id]]]),u.value[a][t.id]<0||u.value[a][t.id]>100?(r(),o("div",V," Marks must be between 0 and 100. ")):k("",!0)]))),128))]))),128)),n[0]||(n[0]=s("div",{class:"text-center"},[s("button",{type:"submit",class:"bg-blue-600 text-white px-6 py-3 rounded-md shadow-md disabled:opacity-50"},[s("span",null,"Save Marks")])],-1))],32),l.examMarks.length?(r(),o("div",B,[n[2]||(n[2]=s("h2",{class:"text-lg font-semibold mb-4"},"Marks List",-1)),s("div",F,[s("table",L,[s("thead",N,[s("tr",null,[n[1]||(n[1]=s("th",{class:"border px-4 py-2 text-left"},"Applicant Name",-1)),(r(!0),o(c,null,x(l.subjects,e=>(r(),o("th",{key:e.id,class:"border px-4 py-2 text-left"},m(e.subject_name),1))),128))])]),s("tbody",null,[(r(!0),o(c,null,x(l.applicants,(e,a)=>(r(),o("tr",{key:e.id},[s("td",C,m(e.user.name),1),(r(!0),o(c,null,x(l.subjects,t=>(r(),o("td",{key:t.id,class:"border px-4 py-2"},m(b(e.id,t.id)),1))),128))]))),128))])])])])):k("",!0)]))}});export{q as default};
