import{Q as M}from"./QSpace-Brm4gke3.js";import{r as x,T as K,S as Y,j as G,o as m,d as I,w as n,b as t,a,Q as J,a2 as W,R as H,n as c,m as X,_ as Q,$ as v,a0 as $,t as i,c as g,p as V,W as Z,a1 as ee,Y as te,F as A,e as B,g as F,v as le,V as N}from"./app-D3lAG8hJ.js";import{Q as ae}from"./QTabs-J8fq34tU.js";import{Q as P}from"./QSelect-Dh3o__7U.js";import{Q as se}from"./QBtnDropdown-BCOHsNlW.js";import{Q as j}from"./QBanner-BTEIdt48.js";import{Q as ne,c as oe,a as L}from"./QLayout-DXwAq9-3.js";import{Q as ie}from"./QPage-Cx-Lq6Am.js";import{A as de}from"./Admin-CnYh41r5.js";import{u as re}from"./use-quasar-zktq9uvy.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./rtl-DFPa-2ov.js";import"./QChip-UE6Nfzil.js";import"./QMenu-B0jmn3Aq.js";const pe={class:"flex justify-between items-center zcard q-pa-md"},me={class:"flex items-center q-gutter-md"},ce={class:"row q-mt-sm"},ge={class:"page-title"},fe={class:"col-xs-12"},be={class:"border-collapse border border-gray-300 rounded-lg w-full mt-4"},xe={class:"bg-gray-100"},ve={class:"px-4 py-2 text-left text-gray-600"},ye=["checked"],ke={class:"px-4 py-2"},he=["value"],_e={class:"px-4 py-2"},Ce={class:"px-4 py-2"},we={class:"px-4 py-2"},Qe={class:"px-4 py-2"},Ve={class:"px-4 py-2"},Ae={class:"px-4 py-2"},Ne={class:"px-4 py-2"},Pe=["onClick"],je={class:"px-4 py-2"},De=["onClick"],qe={class:"flex justify-between items-center mt-4"},Se={class:"flex items-center q-gutter-sm"},Ee={class:"text-gray-600"},Ie={class:"text-h6 q-mb-md"},$e={key:0},Be={key:1},Fe={class:"q-pa-sm"},Le={class:"text-caption"},Ue={class:"text-h6"},Te=Object.assign({layout:de},{__name:"EligibleApplications",props:["jobDetails","applications","search","perPage"],setup(o){const D=re(),d=o;x(!1);const y=K({application_ids:[],status:""}),r=Y({search:d==null?void 0:d.search,tab:route().current(),perPage:(d==null?void 0:d.perPage)||3});x("");const q=s=>{N.get(route("admin.applications.show_eligible",d.jobDetails.id),{search:r.search,perPage:r.perPage})},U=s=>{N.get(route(s))},k=s=>{s&&N.get(s,{search:r.search,perPage:r.perPage})},T=s=>({"bg-green-100 text-green-800":s==="approved","bg-red-100 text-red-800":s==="rejected","bg-yellow-100 text-yellow-800":s==="pending"}),h=x(!1),f=x(null),u=x([]),O=G({get:()=>d.applications.data.length>0&&u.value.length===d.applications.data.length,set:s=>S(s)});function S(s){u.value=s?d.applications.data.map(e=>e.id):[]}const R=s=>{f.value=s.applicant,h.value=!0},z=()=>{var s;if(u.value.length===0){alert("Please select at least one applicant.");return}y.application_ids=u.value,y.status="approved",D.dialog({title:"Confirmation",message:"Do you want to proceed with "+((s=u.value)==null?void 0:s.length)+" Applications",ok:"Yes",cancel:"No"}).onOk(()=>{y.put(route("admin.applications.bulkChangeStatus"),{onSuccess:()=>{var b;const e=((b=u.value)==null?void 0:b.length)+" Applications marked as not eligible";D.notify({type:"positive",message:e}),y.reset(),u.value=[]}})})};return(s,e)=>(m(),I(ie,{padding:""},{default:n(()=>{var b;return[e[28]||(e[28]=t("p",{class:"page-title"},"ELIGIBLE APPLICATIONS",-1)),t("div",pe,[a(ae,{stretch:"",shrink:"",modelValue:r.tab,"onUpdate:modelValue":[e[1]||(e[1]=l=>r.tab=l),U],align:"start"},{default:n(()=>[a(M),a(J,{modelValue:r.search,"onUpdate:modelValue":e[0]||(e[0]=l=>r.search=l),autofocus:"",outlined:"",dense:"",onKeyup:W(q,["enter"]),"bg-color":"white",placeholder:"Search"},{append:n(()=>[a(H,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),t("div",me,[a(c,{onClick:z,color:"primary",disabled:u.value.length===0,label:"Mark as Not Eligible"},null,8,["disabled"]),a(X,{vertical:""}),a(se,{class:"q-ma-xs q-pa-xs",color:"primary",flat:"","dropdown-icon":"sort"},{default:n(()=>[a(Q,{class:"q-pa-sm",style:{"min-width":"280px"}},{default:n(()=>[a(v,null,{default:n(()=>e[13]||(e[13]=[t("p",{class:"q-ma-none ztext-lg"},"Filter",-1)])),_:1}),a(v,null,{default:n(()=>[a(P,{modelValue:s.filterData.job,"onUpdate:modelValue":e[2]||(e[2]=l=>s.filterData.job=l),options:s.jobs,class:"my-input",dense:"",label:"Job",outlined:""},null,8,["modelValue","options"])]),_:1}),a(v,null,{default:n(()=>[a(P,{modelValue:s.filterData.district,"onUpdate:modelValue":e[3]||(e[3]=l=>s.filterData.district=l),options:s.districts,class:"my-input",dense:"",label:"District",outlined:""},null,8,["modelValue","options"])]),_:1}),a($,null,{default:n(()=>[a(c,{flat:"",label:"Reset",onClick:s.resetFilter},null,8,["onClick"]),a(c,{color:"primary",label:"Filter",rounded:"",style:{"min-width":"100px"},onClick:s.doFilter},null,8,["onClick"])]),_:1})]),_:1})]),_:1})])]),t("div",ce,[t("p",ge,"APPLICATIONS: "+i((b=o.jobDetails)==null?void 0:b.post_name),1),t("div",fe,[t("table",be,[t("thead",xe,[t("tr",null,[t("th",ve,[t("input",{type:"checkbox",onChange:e[4]||(e[4]=l=>S(l.target.checked)),checked:O.value},null,40,ye)]),e[14]||(e[14]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Applicant Name",-1)),e[15]||(e[15]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Roll No",-1)),e[16]||(e[16]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Parent Name",-1)),e[17]||(e[17]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Community",-1)),e[18]||(e[18]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Exam Center",-1)),e[19]||(e[19]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Status",-1)),e[20]||(e[20]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Actions",-1)),e[21]||(e[21]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Marks",-1))])]),t("tbody",null,[(m(!0),g(A,null,V(o.applications.data,l=>{var _,p,C,E;return m(),g("tr",{key:l.id,class:"hover:bg-gray-50"},[t("td",ke,[Z(t("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=w=>u.value=w),value:l.id},null,8,he),[[ee,u.value]])]),t("td",_e,i(((_=l.applicant.user)==null?void 0:_.name)||"N/A"),1),t("td",Ce,i(l.application_id||"N/A"),1),t("td",we,i(((p=l.applicant)==null?void 0:p.parents_name)||"N/A"),1),t("td",Qe,i(((C=l.applicant)==null?void 0:C.community)||"N/A"),1),t("td",Ve,i(((E=l.exam_center)==null?void 0:E.center_name)||"N/A"),1),t("td",Ae,[t("span",{class:te(T(l.status))},i(l.status||"Pending"),3)]),t("td",Ne,[t("button",{onClick:w=>s.$inertia.get(s.route("admin.application.show_applicant_detail",{jobDetails:o.jobDetails.id,application:l.id})),class:"bg-blue-500 text-white py-1 px-4 rounded"}," Preview ",8,Pe)]),t("td",je,[t("button",{onClick:w=>R(l),class:"bg-blue-500 text-white py-1 px-4 rounded"}," View Marks ",8,De)])])}),128))])]),t("div",qe,[a(P,{modelValue:r.perPage,"onUpdate:modelValue":[e[6]||(e[6]=l=>r.perPage=l),q],dense:"",outlined:"",options:[5,10,20,25],label:"Results per page",style:{width:"150px"}},null,8,["modelValue"]),t("div",Se,[a(c,{disable:o.applications.current_page===1,onClick:e[7]||(e[7]=l=>k(o.applications.first_page_url)),flat:"",round:"",icon:"first_page"},null,8,["disable"]),a(c,{disable:!o.applications.prev_page_url,onClick:e[8]||(e[8]=l=>k(o.applications.prev_page_url)),flat:"",round:"",icon:"chevron_left"},null,8,["disable"]),t("span",Ee," Page "+i(o.applications.current_page)+" of "+i(o.applications.last_page),1),a(c,{disable:!o.applications.next_page_url,onClick:e[9]||(e[9]=l=>k(o.applications.next_page_url)),flat:"",round:"",icon:"chevron_right"},null,8,["disable"]),a(c,{disable:o.applications.current_page===o.applications.last_page,onClick:e[10]||(e[10]=l=>k(o.applications.last_page_url)),flat:"",round:"",icon:"last_page"},null,8,["disable"])])])])]),a(le,{modelValue:h.value,"onUpdate:modelValue":e[12]||(e[12]=l=>h.value=l)},{default:n(()=>[a(Q,{style:{"min-width":"450px"}},{default:n(()=>[a(v,null,{default:n(()=>[t("div",Ie,"Exam Details: "+i(f.value.user.name),1),f.value.exams.length===0?(m(),g("div",$e,[a(j,{class:"bg-warning text-black q-mb-md"},{default:n(()=>e[22]||(e[22]=[t("div",null,"No exams found for this applicant.",-1)])),_:1})])):B("",!0),f.value.exam_marks.length===0?(m(),g("div",Be,[a(j,{class:"bg-warning text-black q-mb-md"},{default:n(()=>e[23]||(e[23]=[t("div",null,"No marks assigned for the selected exams.",-1)])),_:1})])):B("",!0),(m(!0),g(A,null,V(f.value.exams,(l,_)=>(m(),g("div",{key:l.id,class:"q-mt-md"},[t("div",Fe,[a(j,{class:"bg-primary text-white q-mb-md"},{default:n(()=>[t("div",null,[e[24]||(e[24]=t("strong",null,"Exam Name:",-1)),F(" "+i(l.exam_name)+" ",1),e[25]||(e[25]=t("br",null,null,-1)),e[26]||(e[26]=t("strong",null,"Exam Date:",-1)),F(" "+i(l.exam_date),1)])]),_:2},1024),a(Q,{bordered:"",class:"q-pa-none"},{default:n(()=>[a(v,null,{default:n(()=>[e[27]||(e[27]=t("div",null,[t("strong",null,"Subjects:")],-1)),a(ne,{class:"q-mt-sm"},{default:n(()=>[(m(!0),g(A,null,V(f.value.exam_marks.filter(p=>p.subject.exam_id===l.id),(p,C)=>(m(),I(oe,{key:p.id,class:"q-mb-xs"},{default:n(()=>[a(L,null,{default:n(()=>[t("div",null,[t("strong",null,i(p.subject.subject_name),1)]),t("div",Le,"Exam Date: "+i(p.subject.exam_date),1)]),_:2},1024),a(L,{side:""},{default:n(()=>[t("div",Ue,i(p.marks)+" Marks",1)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))]),_:1}),a($,null,{default:n(()=>[a(c,{flat:"",label:"Close",onClick:e[11]||(e[11]=l=>h.value=!1),color:"primary"})]),_:1})]),_:1})]),_:1},8,["modelValue"])]}),_:1}))}}),lt=ue(Te,[["__scopeId","data-v-00abc7e9"]]);export{lt as default};
