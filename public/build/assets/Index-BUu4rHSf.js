import{r as N,o as d,c as h,a as s,u as V,w as o,F as v,Z as B,b as i,n as f,Q as I,z as S,p as L,d as g,g as r,t as m,e as k,m as F}from"./app-C0HpZeVe.js";import{Q as _,a as u,b as c,c as y}from"./QLayout-C48ZH50D.js";import{Q as P}from"./QBtnDropdown-fIvxY1p1.js";import{Q as j}from"./QPage-CoR-6Q9E.js";import{A}from"./Admin-B7ArI4ga.js";import{u as E}from"./use-quasar-DjJvszC4.js";import"./QMenu-CeDzCUZ6.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"q-pa-md"},U={class:"row q-col-gutter-md"},T={class:"flex zcard justify-between flex-inline col-12 q-pa-md"},W={class:"col-12 zcard q-pa-md"},Z={class:"text-weight-medium ztext"},G={class:"flex items-center flex-inline q-gutter-sm"},H={class:"q-gutter-md"},se={__name:"Index",props:{notices:Object},setup(Q){const n=E(),b=Q,C=N(b.notices);console.log(b.jobs);const w=a=>{n.loading.show(),axios.put(`/notice/${a.id}/publish`).then(t=>{const{message:e}=t.data;n.notify({type:"positive",message:e}),a.published=!0}).catch(t=>{var e,l;console.error(t.response||t),n.notify({type:"negative",message:((l=(e=t.response)==null?void 0:e.data)==null?void 0:l.message)||"Failed to publish"})}).finally(()=>n.loading.hide())},x=a=>{n.loading.show(),axios.put(`/notice/${a.id}/unpublish`).then(t=>{const{message:e}=t.data;n.notify({type:"positive",message:e}),a.published=!1}).catch(t=>{var e,l;console.error(t.response||t),n.notify({type:"negative",message:((l=(e=t.response)==null?void 0:e.data)==null?void 0:l.message)||"Failed to unpublish"})}).finally(()=>n.loading.hide())},D=async a=>{var t,e;try{const l=await api.delete(`notice/${a}`),{message:p,list:z}=l.data;updatePaginatedData(z),n.notify({type:"positive",message:p})}catch(l){let p=((e=(t=l==null?void 0:l.response)==null?void 0:t.data)==null?void 0:e.message)||l.toString();n.notify({type:"negative",message:p})}},$=a=>{n.dialog({title:"Confirm",message:"Would you like to delete this notice?",cancel:!0,persistent:!0}).onOk(()=>{D(a.id)}).onCancel(()=>{}).onDismiss(()=>{})},q=a=>new Date(a).toLocaleString();return(a,t)=>(d(),h(v,null,[s(V(B),{title:"Posts"}),s(A,null,{default:o(()=>[s(j,{class:"container-lg",padding:""},{default:o(()=>[t[6]||(t[6]=i("p",{class:"page-title"},"Notices",-1)),i("div",O,[i("div",U,[i("div",T,[s(f,{onClick:t[0]||(t[0]=e=>a.$inertia.get(a.route("notice.create"))),rounded:"",label:"New Notice",color:"primary"}),s(I,{modelValue:a.as,"onUpdate:modelValue":t[1]||(t[1]=e=>a.as=e),placeholder:"Search",outlined:"",dense:""},{append:o(()=>[s(S,{name:"search"})]),_:1},8,["modelValue"])]),t[5]||(t[5]=i("div",{class:"col-12"},null,-1)),i("div",W,[s(_,{separator:""},{default:o(()=>[(d(!0),h(v,null,L(C.value,e=>(d(),g(y,{key:e.id},{default:o(()=>[s(u,null,{default:o(()=>[s(c,{class:"ztext",caption:""},{default:o(()=>[r("Date : "+m(q(e==null?void 0:e.published_at)),1)]),_:2},1024),s(c,{class:"ztext"},{default:o(()=>[r(m(e==null?void 0:e.title),1)]),_:2},1024),i("div",Z,m(e==null?void 0:e.content),1)]),_:2},1024),s(u,{side:""},{default:o(()=>[i("div",G,[i("div",H,[e.published?k("",!0):(d(),g(f,{key:0,onClick:l=>w(e),color:"primary",rounded:"",label:"Publish"},null,8,["onClick"])),e.published?(d(),g(f,{key:1,onClick:l=>x(e),color:"accent",rounded:"",label:"Unpublish"},null,8,["onClick"])):k("",!0)]),s(F,{vertical:""}),s(P,{color:"q-ma-none q-pa-xs",flat:"",rounded:"","dropdown-icon":"more_vert"},{default:o(()=>[s(_,{separator:""},{default:o(()=>[s(y,{onClick:l=>a.$inertia.get(a.route("notice.edit",e==null?void 0:e.id)),clickable:""},{default:o(()=>[s(u,null,{default:o(()=>[s(c,{class:"ztext"},{default:o(()=>t[2]||(t[2]=[r("Edit")])),_:1})]),_:1})]),_:2},1032,["onClick"]),s(y,{onClick:l=>$(e),clickable:""},{default:o(()=>[s(u,null,{default:o(()=>[s(c,{class:"ztext"},{default:o(()=>t[3]||(t[3]=[r("Delete")])),_:1})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))]),_:1}),t[4]||(t[4]=i("div",{class:"col-12"},null,-1))])])])]),_:1})]),_:1})],64))}};export{se as default};
