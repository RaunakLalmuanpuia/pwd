import{Q as ye}from"./QSpace-CSdG-wRc.js";import{Q as me,a as be}from"./QBreadcrumbs-Blc2NRTA.js";import{U as Ve,T as ve,r as xe,o as _,j as we,e as p,b as s,d as t,Q as i,u as o,h as c,a as ue,l as Se,O as f,P as pe,bn as Ue,i as g,F as qe,M as Be,K as ge,_ as Pe}from"./app-r9hPfqGQ.js";import{Q as y}from"./QSelect-CAYfp5j_.js";import{Q as Qe}from"./QForm-CVjArde_.js";import{Q as Oe}from"./QPage-BRQUcdRj.js";import{A as De}from"./Admin-C62JsNS5.js";import{u as $e}from"./use-quasar-DdMBKQUf.js";import"./QChip-DU36Fc5c.js";import"./QLayout-tyyZQ2R1.js";import"./QMenu-Br6ntKKJ.js";import"./rtl-DFPa-2ov.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Ce={class:"flex flex-inline items-center"},Ae={class:"row q-col-gutter-sm"},Ne={class:"col-xs-12"},ke={class:"col-xs-12"},Fe={class:"col-xs-12"},Le={class:"col-xs-12"},je={class:"col-xs-12"},Re={class:"col-xs-12"},Ee={class:"col-xs-12"},Ge={class:"col-xs-12"},Me={class:"col-xs-12"},Te={class:"col-xs-12"},Je={class:"col-xs-12"},ze={class:"col-xs-12"},He={class:"col-xs-12"},Ie={class:"col-xs-12"},Ke={class:"col-xs-12"},We=["onUpdate:modelValue"],Xe=["onUpdate:modelValue"],Ye=["onUpdate:modelValue"],Ze={class:"col-xs-12"},he={class:"col-xs-12"},er={class:"col-xs-12"},rr={class:"col-xs-12"},cr=Object.assign({layout:De},{__name:"Edit",props:["data","current_department","departments"],setup(b){var v,x,w,S,U,q,B,P,Q,O,D,$,C,A,N,k;const V=$e(),a=b;Ve({submitting:!1});const e=ve({post_name:(v=a.data)==null?void 0:v.post_name,code:(x=a.data)==null?void 0:x.code,category:(w=a.data)==null?void 0:w.category,departments:(S=a==null?void 0:a.current_department)==null?void 0:S.name,no_of_post:(U=a.data)==null?void 0:U.no_of_post,salary:(q=a.data)==null?void 0:q.salary,upper_age_limit:(B=a.data)==null?void 0:B.upper_age_limit,lower_age_limit:(P=a.data)==null?void 0:P.lower_age_limit,age_relaxation:(Q=a.data)==null?void 0:Q.age_relaxation,application_fee_general:(O=a.data)==null?void 0:O.application_fee_general,application_fee_other:(D=a.data)==null?void 0:D.application_fee_other,qualification:($=a.data)==null?void 0:$.qualification,application_deadline:(C=a.data)==null?void 0:C.application_deadline,active:(A=a.data)==null?void 0:A.active,description:(N=a.data)==null?void 0:N.description,documents:((k=a.data)==null?void 0:k.documents.map(n=>({id:n.id,job_detail_id:n.job_detail_id,name:n.document_name,description:n.document_description,is_mandatory:n.is_mandatory})))||[]});console.log(e.documents),xe({});const _e=()=>{e.documents.push({name:"",description:"",is_mandatory:1})},ce=n=>{e.documents.splice(n,1)},fe=n=>{var l;e.transform(d=>{var u;return{department_id:((u=d==null?void 0:d.departments)==null?void 0:u.value)||null,...d}}).put(route("job.update",(l=a.data)==null?void 0:l.id),{onStart:d=>V.loading.show({message:"Updating..."}),onFinish:d=>V.loading.hide()})};return(n,l)=>(_(),we(Oe,{padding:""},{default:p(()=>[s("div",Ce,[l[29]||(l[29]=s("p",{class:"page-title"},"Edit Job profile",-1)),t(ye),t(be,{align:"right",gutter:"xs"},{default:p(()=>[t(me,{to:{name:"job-profile:read"},label:"Jobs"}),t(me,{label:"Edit "})]),_:1})]),t(Qe,{class:"zcard q-pa-md",onReset:n.resetForm,onSubmit:fe},{default:p(()=>{var d,u,F,L,j,R,E,G,M,T,J,z,H,I,K,W,X,Y,Z,h,ee,re,oe,le,se,te,ae,ie,ne;return[s("div",Ae,[l[33]||(l[33]=s("div",{class:"col-xs-12 primary-title q-my-md"},"Job profile",-1)),s("div",Ne,[t(i,{modelValue:o(e).code,"onUpdate:modelValue":l[0]||(l[0]=r=>o(e).code=r),class:"my-input",dense:"",label:"Code",outlined:"",error:o(e).errors.hasOwnProperty("code"),"error-message":(u=(d=o(e).errors)==null?void 0:d.code)==null?void 0:u.toString(),onBlur:l[1]||(l[1]=r=>delete o(e).errors.code),rules:[r=>!!r||"Code is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",ke,[t(i,{modelValue:o(e).post_name,"onUpdate:modelValue":l[2]||(l[2]=r=>o(e).post_name=r),class:"my-input",dense:"",label:"Name",outlined:"",error:o(e).errors.hasOwnProperty("post_name"),"error-message":(L=(F=o(e).errors)==null?void 0:F.post_name)==null?void 0:L.toString(),onBlur:l[3]||(l[3]=r=>delete o(e).errors.post_name),rules:[r=>!!r||"Name is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Fe,[t(y,{modelValue:o(e).departments,"onUpdate:modelValue":l[4]||(l[4]=r=>o(e).departments=r),clearable:"",error:!!((j=o(e).errors)!=null&&j.departments),"error-message":(E=(R=o(e).errors)==null?void 0:R.departments)==null?void 0:E.toString(),options:b.departments,"bg-color":"white",label:"Department","no-error-icon":"",outlined:""},null,8,["modelValue","error","error-message","options"])]),s("div",Le,[t(y,{modelValue:o(e).category,"onUpdate:modelValue":l[5]||(l[5]=r=>o(e).category=r),class:"my-input",options:["A","B","C","D"],dense:"",label:"Group",outlined:"",error:o(e).errors.hasOwnProperty("category"),"error-message":(M=(G=o(e).errors)==null?void 0:G.category)==null?void 0:M.toString(),onBlur:l[6]||(l[6]=r=>delete o(e).errors.category),rules:[r=>!!r||"Group is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",je,[t(i,{modelValue:o(e).description,"onUpdate:modelValue":l[7]||(l[7]=r=>o(e).description=r),class:"my-input",dense:"",label:"Description",outlined:"",error:o(e).errors.hasOwnProperty("description"),"error-message":(J=(T=o(e).errors)==null?void 0:T.description)==null?void 0:J.toString(),onBlur:l[8]||(l[8]=r=>delete o(e).errors.description),rules:[r=>!!r||"Description is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Re,[t(i,{modelValue:o(e).salary,"onUpdate:modelValue":l[9]||(l[9]=r=>o(e).salary=r),class:"my-input",dense:"",label:"Salary",outlined:"",error:o(e).errors.hasOwnProperty("salary"),"error-message":(H=(z=o(e).errors)==null?void 0:z.salary)==null?void 0:H.toString(),onBlur:l[10]||(l[10]=r=>delete o(e).errors.salary),rules:[r=>!!r||"Salary is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Ee,[t(i,{modelValue:o(e).no_of_post,"onUpdate:modelValue":l[11]||(l[11]=r=>o(e).no_of_post=r),class:"my-input",dense:"",label:"POST",outlined:"",error:o(e).errors.hasOwnProperty("no_of_post"),"error-message":(K=(I=o(e).errors)==null?void 0:I.no_of_post)==null?void 0:K.toString(),onBlur:l[12]||(l[12]=r=>delete o(e).errors.no_of_post),rules:[r=>Number(r)||"Post must be number"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Ge,[t(i,{modelValue:o(e).application_deadline,"onUpdate:modelValue":l[13]||(l[13]=r=>o(e).application_deadline=r),class:"my-input",dense:"",type:"date",label:"Application Deadline",outlined:"",error:o(e).errors.hasOwnProperty("application_deadline"),"error-message":(X=(W=o(e).errors)==null?void 0:W.application_deadline)==null?void 0:X.toString(),onBlur:l[14]||(l[14]=r=>delete o(e).errors.application_deadline),rules:[r=>!!r||"Deadline is required"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Me,[t(i,{modelValue:o(e).upper_age_limit,"onUpdate:modelValue":l[15]||(l[15]=r=>o(e).upper_age_limit=r),class:"my-input",dense:"",label:"Upper Age Limit",outlined:"",error:o(e).errors.hasOwnProperty("upper_age_limit"),"error-message":(Z=(Y=o(e).errors)==null?void 0:Y.upper_age_limit)==null?void 0:Z.toString(),onBlur:l[16]||(l[16]=r=>delete o(e).errors.upper_age_limit),rules:[r=>Number(r)||"Age must be number"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Te,[t(i,{modelValue:o(e).lower_age_limit,"onUpdate:modelValue":l[17]||(l[17]=r=>o(e).lower_age_limit=r),class:"my-input",dense:"",label:"Lower Age Limit",outlined:"",error:o(e).errors.hasOwnProperty("lower_age_limit"),"error-message":(ee=(h=o(e).errors)==null?void 0:h.lower_age_limit)==null?void 0:ee.toString(),onBlur:l[18]||(l[18]=r=>delete o(e).errors.lower_age_limit),rules:[r=>Number(r)||"Age must be number"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Je,[t(i,{modelValue:o(e).age_relaxation,"onUpdate:modelValue":l[19]||(l[19]=r=>o(e).age_relaxation=r),class:"my-input",dense:"",label:"Age Relaxation",outlined:"",error:o(e).errors.hasOwnProperty("age_relaxation"),"error-message":(oe=(re=o(e).errors)==null?void 0:re.age_relaxation)==null?void 0:oe.toString(),onBlur:l[20]||(l[20]=r=>delete o(e).errors.age_relaxation),rules:[r=>Number(r)||"Age must be number"]},null,8,["modelValue","error","error-message","rules"])]),s("div",ze,[t(i,{modelValue:o(e).application_fee_other,"onUpdate:modelValue":l[21]||(l[21]=r=>o(e).application_fee_other=r),class:"my-input",dense:"",label:"Fee for SC/ST/OBC",outlined:"",error:o(e).errors.hasOwnProperty("application_fee_other"),"error-message":(se=(le=o(e).errors)==null?void 0:le.application_fee_other)==null?void 0:se.toString(),onBlur:l[22]||(l[22]=r=>delete o(e).errors.application_fee_other),rules:[r=>Number(r)||"Fee must be number"]},null,8,["modelValue","error","error-message","rules"])]),s("div",He,[t(i,{modelValue:o(e).application_fee_general,"onUpdate:modelValue":l[23]||(l[23]=r=>o(e).application_fee_general=r),class:"my-input",dense:"",label:"Fee for General",outlined:"",error:o(e).errors.hasOwnProperty("application_fee_general"),"error-message":(ae=(te=o(e).errors)==null?void 0:te.application_fee_general)==null?void 0:ae.toString(),onBlur:l[24]||(l[24]=r=>delete o(e).errors.application_fee_general),rules:[r=>Number(r)||"Fee must be number"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Ie,[t(y,{modelValue:o(e).qualification,"onUpdate:modelValue":l[25]||(l[25]=r=>o(e).qualification=r),class:"my-input",options:["HSLC","HSSLC","Graduate","Post Graduate","PhD"],dense:"",label:"Minimum Qualification",outlined:"",error:o(e).errors.hasOwnProperty("qualification"),"error-message":(ne=(ie=o(e).errors)==null?void 0:ie.qualification)==null?void 0:ne.toString(),onBlur:l[26]||(l[26]=r=>delete o(e).errors.qualification),rules:[r=>!!r||"Please select Qualification"]},null,8,["modelValue","error","error-message","rules"])]),s("div",Ke,[t(c,{class:"q-my-md"})]),s("div",null,[l[31]||(l[31]=s("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Required Documents",-1)),(_(!0),ue(qe,null,Se(o(e).documents,(r,de)=>(_(),ue("div",{key:de,class:"flex space-x-4 items-center mb-3"},[f(s("input",{type:"text","onUpdate:modelValue":m=>r.name=m,placeholder:"Document Name",class:"flex-1 block rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:""},null,8,We),[[pe,r.name]]),f(s("input",{type:"text","onUpdate:modelValue":m=>r.description=m,placeholder:"Document Description",class:"flex-1 block rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:""},null,8,Xe),[[pe,r.description]]),f(s("select",{"onUpdate:modelValue":m=>r.is_mandatory=m,class:"block rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},l[30]||(l[30]=[s("option",{value:"1"},"Mandatory",-1),s("option",{value:"0"},"Optional",-1)]),8,Ye),[[Ue,r.is_mandatory]]),t(g,{round:"",color:"red",style:{"font-size":"12px"},onClick:m=>ce(de),icon:"delete"},null,8,["onClick"])]))),128))]),s("div",Ze,[t(g,{outline:"",color:"primary",onClick:_e},{default:p(()=>l[32]||(l[32]=[Be(" Add Document ")])),_:1})]),s("div",he,[t(c,{class:"q-my-md"})]),s("div",er,[t(ge,{modelValue:o(e).active,"onUpdate:modelValue":l[27]||(l[27]=r=>o(e).active=r),val:1,label:"Open"},null,8,["modelValue"]),t(ge,{modelValue:o(e).active,"onUpdate:modelValue":l[28]||(l[28]=r=>o(e).active=r),val:0,label:"Closed"},null,8,["modelValue"])])]),s("div",rr,[t(c,{class:"q-my-md"})]),t(Pe,{class:"q-mt-md"},{default:p(()=>[t(g,{color:"primary",flat:"",type:"submit",label:"Save"}),t(g,{color:"negative",flat:"",type:"reset",label:"Reset"})]),_:1})]}),_:1},8,["onReset"])]),_:1}))}});export{cr as default};
