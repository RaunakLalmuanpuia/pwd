import{r as h,T as g,o as r,a as o,b as s,t as m,F as c,l as p,f as v,k,p as M,a9 as _}from"./app-DGSfB9v9.js";import{A as w}from"./Admin-DeMXaItS.js";import"./QLayout-Bjn0ecJ_.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"max-w-4xl mx-auto p-6 bg-white shadow-md rounded-lg"},E={class:"text-2xl font-semibold text-center mb-6"},j={class:"text-lg font-semibold text-gray-700 mb-4"},D={class:"block text-sm font-medium text-gray-700"},V=["onUpdate:modelValue","placeholder"],B={key:0,class:"text-red-500 text-sm mt-1"},F={key:0,class:"mt-8"},L={class:"overflow-x-auto"},N={class:"min-w-full table-auto"},S={class:"bg-gray-200"},O={class:"border px-4 py-2"},q=Object.assign({layout:w},{__name:"AssignMark",props:{exam:Object,applicants:Array,subjects:Array,examMarks:Array},setup(n){const i=n,x=(d,l)=>{const e=i.examMarks[d];if(e){const a=e.find(t=>t.subject_id===l);return a?a.marks:null}return null},u=h(i.applicants.map((d,l)=>{const e={};return i.subjects.forEach(a=>{const t=x(d.id,a.id);e[a.id]=t!==null?t:null}),e})),b=g({marks:[]}),f=()=>{const d=[];i.applicants.forEach((l,e)=>{i.subjects.forEach(a=>{const t=u.value[e][a.id];t!==null&&d.push({applicant_id:l.id,subject_id:a.id,marks:t})})}),b.marks=d,b.post(route("exams.storeMarks",i.exam.id))};return(d,l)=>(r(),o("div",A,[s("h1",E,"Assign Marks for Exam: "+m(n.exam.exam_name),1),s("form",{onSubmit:v(f,["prevent"]),class:"space-y-6"},[(r(!0),o(c,null,p(n.applicants,(e,a)=>(r(),o("div",{key:e.id,class:"border p-4 rounded-lg shadow-sm bg-gray-50"},[s("h2",j,m(e.user.name),1),(r(!0),o(c,null,p(n.subjects,(t,T)=>(r(),o("div",{key:t.id,class:"mb-4"},[s("label",D,m(t.subject_name),1),M(s("input",{"onUpdate:modelValue":y=>u.value[a][t.id]=y,type:"number",min:"0",max:"100",placeholder:`Marks for ${t.subject_name}`,class:"mt-1 block w-full px-4 py-2 border rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,8,V),[[_,u.value[a][t.id]]]),u.value[a][t.id]<0||u.value[a][t.id]>100?(r(),o("div",B," Marks must be between 0 and 100. ")):k("",!0)]))),128))]))),128)),l[0]||(l[0]=s("div",{class:"text-center"},[s("button",{type:"submit",class:"bg-blue-600 text-white px-6 py-3 rounded-md shadow-md disabled:opacity-50"},[s("span",null,"Save Marks")])],-1))],32),n.examMarks.length?(r(),o("div",F,[l[2]||(l[2]=s("h2",{class:"text-lg font-semibold mb-4"},"Marks List",-1)),s("div",L,[s("table",N,[s("thead",S,[s("tr",null,[l[1]||(l[1]=s("th",{class:"border px-4 py-2 text-left"},"Applicant Name",-1)),(r(!0),o(c,null,p(n.subjects,e=>(r(),o("th",{key:e.id,class:"border px-4 py-2 text-left"},m(e.subject_name),1))),128))])]),s("tbody",null,[(r(!0),o(c,null,p(n.applicants,(e,a)=>(r(),o("tr",{key:e.id},[s("td",O,m(e.user.name),1),(r(!0),o(c,null,p(n.subjects,t=>(r(),o("td",{key:t.id,class:"border px-4 py-2"},m(x(e.id,t.id)),1))),128))]))),128))])])])])):k("",!0)]))}});export{q as default};
