import{Q as V}from"./QSpace-DuV7imfb.js";import{S as $,r as S,o as u,d as p,w as o,b as n,a as t,Q as B,X as I,R as L,c as A,p as N,q as F,g as b,t as v,Y as _,F as U,n as w,V as Q,s as T}from"./app-j_H5z9J3.js";import{Q as z}from"./QTabs-C4TXgjGw.js";import{Q as k}from"./QChip-x2cnkxfY.js";import{c as g,a as c,b as h,Q as y}from"./QLayout-CobrgAT6.js";import{Q as E}from"./QBtnDropdown-nj2Uba9h.js";import{Q as K}from"./QPage-Cs1zR-y0.js";import{C as D}from"./ClosePopup-C2A-1keR.js";import{A as P}from"./Admin-Ce1eGMHV.js";import{u as R}from"./use-quasar-BhHLujcL.js";import"./rtl-DFPa-2ov.js";import"./QMenu-2GnW2a-B.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const J={class:"row q-gutter-md"},O={class:"flex zcard justify-between flex-inline col-12 q-pa-md"},G={class:"col-12 zcard q-pa-md"},X={class:"flex items-center"},Y={class:"col-12"},Z={class:"flex q-gutter-sm"},ue=Object.assign({layout:P},{__name:"Submission",props:["jobDetails","search"],setup(r){const m=R(),f=r,d=$({search:f==null?void 0:f.search,tab:route().current()});S("");const x=s=>{Q.get(route("admin.applications.index_submission"),{search:d.search})},q=s=>{Q.get(route(s))};function j(s){const a={timeZone:"Asia/Kolkata",weekday:"long",year:"numeric",month:"2-digit",day:"2-digit"};return new Intl.DateTimeFormat("en-IN",a).format(new Date(s)).replace(/(\d{2})\/(\d{2})\/(\d{4}),/,"$1/$2/$3")}const C=s=>{m.loading.show();const a=route("export.job.submitted.details",s);T.get(a,{responseType:"blob"}).then(e=>{const i=window.URL.createObjectURL(new Blob([e.data])),l=document.createElement("a");l.href=i,l.setAttribute("download",Date.now()+".xlsx"),l.click()}).catch(e=>{var i,l;m.notify({type:"negative",message:((l=(i=e.response)==null?void 0:i.data)==null?void 0:l.message)||"Failed to download file"})}).finally(()=>{m.loading.hide()})};return(s,a)=>(u(),p(K,{padding:""},{default:o(()=>[a[7]||(a[7]=n("p",{class:"page-title"},"Jobs Submission List",-1)),n("div",J,[n("div",O,[t(z,{stretch:"",shrink:"",modelValue:d.tab,"onUpdate:modelValue":[a[1]||(a[1]=e=>d.tab=e),q],align:"start"},{default:o(()=>[t(V),t(B,{modelValue:d.search,"onUpdate:modelValue":a[0]||(a[0]=e=>d.search=e),autofocus:"",outlined:"",dense:"",onKeyup:I(x,["enter"]),"bg-color":"white",placeholder:"Search"},{append:o(()=>[t(L,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),n("div",G,[t(y,null,{default:o(()=>[(u(!0),A(U,null,N(r.jobDetails.data,(e,i)=>(u(),p(g,{class:"zcard q-mt-sm",key:i},{default:o(()=>[t(c,{avatar:""},{default:o(()=>[t(F,{square:""},{default:o(()=>[t(k,{square:"",label:i+1},null,8,["label"])]),_:2},1024)]),_:2},1024),t(c,null,{default:o(()=>[t(h,null,{default:o(()=>[b(v(e==null?void 0:e.post_name)+" Posted on: "+v(j(e==null?void 0:e.created_at)),1)]),_:2},1024)]),_:2},1024),t(c,{side:""},{default:o(()=>[n("div",X,[a[6]||(a[6]=n("div",{class:"text-caption"},"No of Applications",-1)),t(k,{"text-color":"white",square:"",color:"primary",label:e==null?void 0:e.applications_count},null,8,["label"]),t(E,{rounded:"",flat:"","dropdown-icon":"more_vert",class:"q-pa-sm"},{default:o(()=>[t(y,{class:"q-pa-sm"},{default:o(()=>[_((u(),p(g,{clickable:"",onClick:l=>s.$inertia.get(s.route("admin.applications.show_submission",e.id))},{default:o(()=>[t(c,null,{default:o(()=>[t(h,null,{default:o(()=>a[4]||(a[4]=[b("Detail of applications")])),_:1})]),_:1})]),_:2},1032,["onClick"])),[[D]]),_((u(),p(g,{clickable:"",onClick:l=>C(e.id)},{default:o(()=>[t(c,null,{default:o(()=>[t(h,null,{default:o(()=>a[5]||(a[5]=[b("Generate Excel")])),_:1})]),_:1})]),_:2},1032,["onClick"])),[[D]])]),_:2},1024)]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))]),_:1}),n("div",Y,[n("div",Z,[t(w,{disable:!r.jobDetails.prev_page_url,onClick:a[2]||(a[2]=e=>s.$inertia.get(r.jobDetails.prev_page_url)),flat:"",round:"",icon:"chevron_left"},null,8,["disable"]),t(w,{disable:!r.jobDetails.next_page_url,onClick:a[3]||(a[3]=e=>s.$inertia.get(r.jobDetails.next_page_url)),flat:"",round:"",icon:"chevron_right"},null,8,["disable"])])])])])]),_:1}))}});export{ue as default};
