import{Q as B}from"./QSpace-W6lir8P1.js";import{T as _,r as x,S as z,j as L,o as h,c as k,a,w as d,v as M,F as N,b as t,Q as q,X as Y,z as E,n as u,m as K,a0 as F,a1 as v,a2 as R,t as c,p as J,Y as X,a3 as G,$ as H,u as j,V as C}from"./app-LtB7byt3.js";import{Q as W}from"./QTabs-AhQiacUw.js";import{Q as A}from"./QSelect-kUs_IihJ.js";import{Q as Z}from"./QBtnDropdown-D8MW6-LC.js";import{Q as ee}from"./QPage-BveYALRB.js";import{A as te}from"./Admin-j5nteBvo.js";import{u as ae}from"./use-quasar-Bdk1iD1w.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QLayout-DXeNrv8x.js";import"./rtl-DFPa-2ov.js";import"./QChip-jc0pqKXe.js";import"./QMenu-BFi32-Gq.js";const se={class:"flex justify-between items-center zcard q-pa-md"},oe={class:"flex items-center q-gutter-md"},ie={class:"row q-mt-sm"},ne={class:"page-title"},de={class:"col-xs-12"},re={class:"table-auto border-collapse border border-gray-300 w-full mt-6 text-sm"},pe={class:"bg-gray-100"},ue={class:"px-4 py-2 text-left text-gray-600"},ce=["checked"],me={class:"px-4 py-2"},ge=["value"],fe={class:"px-4 py-2"},be={class:"px-4 py-2"},ye={class:"px-4 py-2"},ve={class:"px-4 py-2"},xe={class:"px-4 py-2"},he={class:"px-4 py-2"},ke=["onClick"],je={class:"flex justify-between items-center mt-4"},Ce={class:"flex items-center q-gutter-sm"},Ae={class:"text-gray-600"},Ve=Object.assign({layout:te},{__name:"SubmittedApplication",props:["jobDetails","applications","search","perPage"],setup(o){const f=ae(),r=o,b=_({application_ids:[],status:""}),m=_({status:"",rejection_note:"",application_ids:[]}),g=x(!1),U=()=>{g.value=!0},I=()=>{var l;m.application_ids=i.value,m.status="rejected",f.dialog({title:"Confirmation",message:"Do you want to proceed with "+((l=i.value)==null?void 0:l.length)+" Applications",ok:"Yes",cancel:"No"}).onOk(()=>{m.put(route("admin.applications.reject_application"),{onSuccess:()=>{var n;const e=((n=i.value)==null?void 0:n.length)+" Applications marked as Rejected";f.notify({type:"positive",message:e}),m.reset(),g.value=!1,i.value=[]}})})},p=z({search:r==null?void 0:r.search,tab:route().current(),perPage:(r==null?void 0:r.perPage)||1});x("");const V=l=>{C.get(route("admin.applications.show_submission",r.jobDetails.id),{search:p.search,perPage:p.perPage})},$=l=>{C.get(route(l))},y=l=>{l&&C.get(l,{search:p.search,perPage:p.perPage})},i=x([]),O=L({get:()=>r.applications.data.length>0&&i.value.length===r.applications.data.length,set:l=>w(l)});function w(l){i.value=l?r.applications.data.map(e=>e.id):[]}const T=()=>{var l;b.application_ids=i.value,b.status="approved",f.dialog({title:"Confirmation",message:"Do you want to proceed with "+((l=i.value)==null?void 0:l.length)+" Applications",ok:"Yes",cancel:"No"}).onOk(()=>{b.put(route("admin.applications.bulkChangeStatus"),{onSuccess:()=>{var n;const e=((n=i.value)==null?void 0:n.length)+" Applications marked as Qualified";f.notify({type:"positive",message:e}),b.reset(),i.value=[]}})})};return(l,e)=>(h(),k(N,null,[a(ee,{padding:""},{default:d(()=>{var n;return[e[21]||(e[21]=t("p",{class:"page-title"},"SUBMITTED APPLICATIONS",-1)),t("div",se,[a(W,{stretch:"",shrink:"",modelValue:p.tab,"onUpdate:modelValue":[e[1]||(e[1]=s=>p.tab=s),$],align:"start"},{default:d(()=>[a(B),a(q,{modelValue:p.search,"onUpdate:modelValue":e[0]||(e[0]=s=>p.search=s),autofocus:"",outlined:"",dense:"",onKeyup:Y(V,["enter"]),"bg-color":"white",placeholder:"Search"},{append:d(()=>[a(E,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),t("div",oe,[a(u,{onClick:T,color:"primary",disabled:i.value.length===0,label:"Mark as Qualified"},null,8,["disabled"]),a(u,{onClick:U,color:"primary",disabled:i.value.length===0,label:"Mark as Rejected"},null,8,["disabled"]),a(K,{vertical:""}),a(Z,{class:"q-ma-xs q-pa-xs",color:"primary",flat:"","dropdown-icon":"sort"},{default:d(()=>[a(F,{class:"q-pa-sm",style:{"min-width":"280px"}},{default:d(()=>[a(v,null,{default:d(()=>e[14]||(e[14]=[t("p",{class:"q-ma-none ztext-lg"},"Filter",-1)])),_:1}),a(v,null,{default:d(()=>[a(A,{modelValue:l.filterData.job,"onUpdate:modelValue":e[2]||(e[2]=s=>l.filterData.job=s),options:l.jobs,class:"my-input",dense:"",label:"Job",outlined:""},null,8,["modelValue","options"])]),_:1}),a(v,null,{default:d(()=>[a(A,{modelValue:l.filterData.district,"onUpdate:modelValue":e[3]||(e[3]=s=>l.filterData.district=s),options:l.districts,class:"my-input",dense:"",label:"District",outlined:""},null,8,["modelValue","options"])]),_:1}),a(R,null,{default:d(()=>[a(u,{flat:"",label:"Reset",onClick:l.resetFilter},null,8,["onClick"]),a(u,{color:"primary",label:"Filter",rounded:"",style:{"min-width":"100px"},onClick:l.doFilter},null,8,["onClick"])]),_:1})]),_:1})]),_:1})])]),t("div",ie,[t("p",ne,c((n=o.jobDetails)==null?void 0:n.post_name)+" : APPLICATIONS",1),t("div",de,[t("table",re,[t("thead",pe,[t("tr",null,[t("th",ue,[t("input",{type:"checkbox",onChange:e[4]||(e[4]=s=>w(s.target.checked)),checked:O.value},null,40,ce)]),e[15]||(e[15]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Applicant Name",-1)),e[16]||(e[16]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Roll No",-1)),e[17]||(e[17]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Community",-1)),e[18]||(e[18]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Disability",-1)),e[19]||(e[19]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Status",-1)),e[20]||(e[20]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Actions",-1))])]),t("tbody",null,[(h(!0),k(N,null,J(o.applications.data,s=>{var Q,S,D;return h(),k("tr",{key:s.id,class:"hover:bg-gray-50 transition duration-150"},[t("td",me,[X(t("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=P=>i.value=P),value:s.id},null,8,ge),[[G,i.value]])]),t("td",fe,c(((Q=s.applicant.user)==null?void 0:Q.name)||"N/A"),1),t("td",be,c(s.application_id||"N/A"),1),t("td",ye,c(((S=s.applicant)==null?void 0:S.community)||"N/A"),1),t("td",ve,c((D=s.applicant)!=null&&D.disability?"Yes":"No"),1),t("td",xe,[t("span",{class:H(["px-2 py-1 rounded-full text-xs font-semibold",s.status==="approved"?"bg-green-100 text-green-800":s.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"])},c(s.status||"Pending"),3)]),t("td",he,[t("button",{onClick:P=>l.$inertia.get(l.route("admin.application.show_applicant_detail",{jobDetails:o.jobDetails.id,application:s.id})),class:"bg-blue-500 hover:bg-blue-700 text-white py-1 px-4 rounded mr-2 transition duration-150"}," OPEN ",8,ke)])])}),128))])]),t("div",je,[a(A,{modelValue:p.perPage,"onUpdate:modelValue":[e[6]||(e[6]=s=>p.perPage=s),V],dense:"",outlined:"",options:[5,10,20,25],label:"Results per page",style:{width:"150px"}},null,8,["modelValue"]),t("div",Ce,[a(u,{disable:o.applications.current_page===1,onClick:e[7]||(e[7]=s=>y(o.applications.first_page_url)),flat:"",round:"",icon:"first_page"},null,8,["disable"]),a(u,{disable:!o.applications.prev_page_url,onClick:e[8]||(e[8]=s=>y(o.applications.prev_page_url)),flat:"",round:"",icon:"chevron_left"},null,8,["disable"]),t("span",Ae," Page "+c(o.applications.current_page)+" of "+c(o.applications.last_page),1),a(u,{disable:!o.applications.next_page_url,onClick:e[9]||(e[9]=s=>y(o.applications.next_page_url)),flat:"",round:"",icon:"chevron_right"},null,8,["disable"]),a(u,{disable:o.applications.current_page===o.applications.last_page,onClick:e[10]||(e[10]=s=>y(o.applications.last_page_url)),flat:"",round:"",icon:"last_page"},null,8,["disable"])])])])])]}),_:1}),a(M,{modelValue:g.value,"onUpdate:modelValue":e[13]||(e[13]=n=>g.value=n),persistent:""},{default:d(()=>[a(F,{style:{"min-width":"450px"}},{default:d(()=>[a(v,null,{default:d(()=>[e[22]||(e[22]=t("div",{class:"text-h6 q-mb-md"},"Rejection Reason for Selected Applicants",-1)),a(q,{modelValue:j(m).rejection_note,"onUpdate:modelValue":e[11]||(e[11]=n=>j(m).rejection_note=n),label:"Rejection Note",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),a(R,null,{default:d(()=>[a(u,{flat:"",label:"Cancel",onClick:e[12]||(e[12]=n=>g.value=!1),color:"primary"}),a(u,{flat:"",disable:!j(m).rejection_note,label:"Assign",onClick:I,color:"primary"},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),Oe=le(Ve,[["__scopeId","data-v-1b990288"]]);export{Oe as default};
