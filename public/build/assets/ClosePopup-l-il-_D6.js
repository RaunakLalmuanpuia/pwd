import{k as Xe,G as Kt,H as Qt,I as Ut,J as Zt,K as Xt,L as $l,M as Jt,N as Nl,c as h,O as Wl,z as Ye,q as S,B as kt,P as Kl,R as Ql,S as He,r as $,U as Gt,V as rt,W as pe,X as ul,w as me,p as Ul,Y as bt,_ as Zl,$ as $t,a0 as il,a1 as pl,a2 as Xl,a3 as Jl,a4 as Gl,a5 as en,a6 as tn,a7 as ln,l as nn,a8 as an,a9 as on,aa as un,ab as rn,ac as sn,ad as cn,ae as rl,af as dn,ag as fn,v as kl,s as it,ah as vn,ai as mn,aj as hn,ak as gn,al as yn,am as Sn,an as bn,ao as wn,ap as el,aq as _l,ar as Vt,as as yt,at as xn,au as Mn,av as Cn,aw as Ue,ax as Dn,ay as Vl,az as pn,aA as ql,aB as kn,aC as _n,aD as Vn,aE as qn,h as Ie,aF as Hl,aG as Hn,aH as Fn,aI as On,aJ as Tn,aK as An}from"./app-CZ7qfYVO.js";import{c as En,n as sl,Q as In,a as zn,b as Yn,p as J,h as Bn}from"./QLayout-DHXd5nnE.js";const Ln=Xe({name:"QField",inheritAttrs:!1,props:{...Kt,tag:{type:String,default:"label"}},emits:Qt,setup(){return Ut(Zt({tagProp:!0}))}}),Pn={xs:8,sm:10,md:14,lg:20,xl:24},Fl=Xe({name:"QChip",props:{...Xt,...$l,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:l,emit:a}){const{proxy:{$q:u}}=Ye(),r=Jt(e,u),o=Nl(e,Pn),m=h(()=>e.selected===!0||e.icon!==void 0),s=h(()=>e.selected===!0?e.iconSelected||u.iconSet.chip.selected:e.icon),v=h(()=>e.iconRemove||u.iconSet.chip.remove),x=h(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),c=h(()=>{const M=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(M?` text-${M} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(x.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(r.value===!0?" q-chip--dark q-dark":"")}),y=h(()=>{const M=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},oe={...M,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||u.lang.label.remove};return{chip:M,remove:oe}});function F(M){M.keyCode===13&&g(M)}function g(M){e.disable||(a("update:selected",!e.selected),a("click",M))}function k(M){(M.keyCode===void 0||M.keyCode===13)&&(He(M),e.disable===!1&&(a("update:modelValue",!1),a("remove")))}function q(){const M=[];x.value===!0&&M.push(S("div",{class:"q-focus-helper"})),m.value===!0&&M.push(S(kt,{class:"q-chip__icon q-chip__icon--left",name:s.value}));const oe=e.label!==void 0?[S("div",{class:"ellipsis"},[e.label])]:void 0;return M.push(S("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Kl(l.default,oe))),e.iconRight&&M.push(S(kt,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&M.push(S(kt,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:v.value,...y.value.remove,onClick:k,onKeyup:k})),M}return()=>{if(e.modelValue===!1)return;const M={class:c.value,style:o.value};return x.value===!0&&Object.assign(M,y.value.chip,{onClick:g,onKeyup:F}),Wl("div",M,q(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Ql,e.ripple]])}}}),Rn={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},Ol={...Rn,contextMenu:Boolean};function Tl({showing:e,avoidEmit:l,configureAnchorEl:a}){const{props:u,proxy:r,emit:o}=Ye(),m=$(null);let s=null;function v(g){return m.value===null?!1:g===void 0||g.touches===void 0||g.touches.length<=1}const x={};a===void 0&&(Object.assign(x,{hide(g){r.hide(g)},toggle(g){r.toggle(g),g.qAnchorHandled=!0},toggleKey(g){Gt(g,13)===!0&&x.toggle(g)},contextClick(g){r.hide(g),rt(g),pe(()=>{r.show(g),g.qAnchorHandled=!0})},prevent:rt,mobileTouch(g){if(x.mobileCleanup(g),v(g)!==!0)return;r.hide(g),m.value.classList.add("non-selectable");const k=g.target;ul(x,"anchor",[[k,"touchmove","mobileCleanup","passive"],[k,"touchend","mobileCleanup","passive"],[k,"touchcancel","mobileCleanup","passive"],[m.value,"contextmenu","prevent","notPassive"]]),s=setTimeout(()=>{s=null,r.show(g),g.qAnchorHandled=!0},300)},mobileCleanup(g){m.value.classList.remove("non-selectable"),s!==null&&(clearTimeout(s),s=null),e.value===!0&&g!==void 0&&En()}}),a=function(g=u.contextMenu){if(u.noParentEvent===!0||m.value===null)return;let k;g===!0?r.$q.platform.is.mobile===!0?k=[[m.value,"touchstart","mobileTouch","passive"]]:k=[[m.value,"mousedown","hide","passive"],[m.value,"contextmenu","contextClick","notPassive"]]:k=[[m.value,"click","toggle","passive"],[m.value,"keyup","toggleKey","passive"]],ul(x,"anchor",k)});function c(){Zl(x,"anchor")}function y(g){for(m.value=g;m.value.classList.contains("q-anchor--skip");)m.value=m.value.parentNode;a()}function F(){if(u.target===!1||u.target===""||r.$el.parentNode===null)m.value=null;else if(u.target===!0)y(r.$el.parentNode);else{let g=u.target;if(typeof u.target=="string")try{g=document.querySelector(u.target)}catch{g=void 0}g!=null?(m.value=g.$el||g,a()):(m.value=null,console.error(`Anchor: target "${u.target}" not found`))}}return me(()=>u.contextMenu,g=>{m.value!==null&&(c(),a(g))}),me(()=>u.target,()=>{m.value!==null&&c(),F()}),me(()=>u.noParentEvent,g=>{m.value!==null&&(g===!0?c():a())}),Ul(()=>{F(),l!==!0&&u.modelValue===!0&&m.value===null&&o("update:modelValue",!1)}),bt(()=>{s!==null&&clearTimeout(s),c()}),{anchorEl:m,canShow:v,anchorEvents:x}}function jn(e,l){const a=$(null);let u;function r(s,v){const x=`${v!==void 0?"add":"remove"}EventListener`,c=v!==void 0?v:u;s!==window&&s[x]("scroll",c,$t.passive),window[x]("scroll",c,$t.passive),u=v}function o(){a.value!==null&&(r(a.value),a.value=null)}const m=me(()=>e.noParentEvent,()=>{a.value!==null&&(o(),l())});return bt(m),{localScrollTarget:a,unconfigureScrollTarget:o,changeScrollEvent:r}}const{notPassiveCapture:qt}=$t,Ze=[];function Ht(e){const l=e.target;if(l===void 0||l.nodeType===8||l.classList.contains("no-pointer-events")===!0)return;let a=il.length-1;for(;a>=0;){const u=il[a].$;if(u.type.name==="QTooltip"){a--;continue}if(u.type.name!=="QDialog")break;if(u.props.seamless!==!0)return;a--}for(let u=Ze.length-1;u>=0;u--){const r=Ze[u];if((r.anchorEl.value===null||r.anchorEl.value.contains(l)===!1)&&(l===document.body||r.innerRef.value!==null&&r.innerRef.value.contains(l)===!1))e.qClickOutside=!0,r.onClickOutside(e);else return}}function $n(e){Ze.push(e),Ze.length===1&&(document.addEventListener("mousedown",Ht,qt),document.addEventListener("touchstart",Ht,qt))}function cl(e){const l=Ze.findIndex(a=>a===e);l!==-1&&(Ze.splice(l,1),Ze.length===0&&(document.removeEventListener("mousedown",Ht,qt),document.removeEventListener("touchstart",Ht,qt)))}let dl,fl;function vl(e){const l=e.split(" ");return l.length!==2?!1:["top","center","bottom"].includes(l[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(l[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function Nn(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const Nt={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{Nt[`${e}#ltr`]=e,Nt[`${e}#rtl`]=e});function ml(e,l){const a=e.split(" ");return{vertical:a[0],horizontal:Nt[`${a[1]}#${l===!0?"rtl":"ltr"}`]}}function Wn(e,l){let{top:a,left:u,right:r,bottom:o,width:m,height:s}=e.getBoundingClientRect();return l!==void 0&&(a-=l[1],u-=l[0],o+=l[1],r+=l[0],m+=l[0],s+=l[1]),{top:a,bottom:o,height:s,left:u,right:r,width:m,middle:u+(r-u)/2,center:a+(o-a)/2}}function Kn(e,l,a){let{top:u,left:r}=e.getBoundingClientRect();return u+=l.top,r+=l.left,a!==void 0&&(u+=a[1],r+=a[0]),{top:u,bottom:u+1,height:1,left:r,right:r+1,width:1,middle:r,center:u}}function Qn(e,l){return{top:0,center:l/2,bottom:l,left:0,middle:e/2,right:e}}function hl(e,l,a,u){return{top:e[a.vertical]-l[u.vertical],left:e[a.horizontal]-l[u.horizontal]}}function Al(e,l=0){if(e.targetEl===null||e.anchorEl===null||l>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{Al(e,l+1)},10);return}const{targetEl:a,offset:u,anchorEl:r,anchorOrigin:o,selfOrigin:m,absoluteOffset:s,fit:v,cover:x,maxHeight:c,maxWidth:y}=e;if(pl.is.ios===!0&&window.visualViewport!==void 0){const O=document.body.style,{offsetLeft:R,offsetTop:Q}=window.visualViewport;R!==dl&&(O.setProperty("--q-pe-left",R+"px"),dl=R),Q!==fl&&(O.setProperty("--q-pe-top",Q+"px"),fl=Q)}const{scrollLeft:F,scrollTop:g}=a,k=s===void 0?Wn(r,x===!0?[0,0]:u):Kn(r,s,u);Object.assign(a.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:y,maxHeight:c,visibility:"visible"});const{offsetWidth:q,offsetHeight:M}=a,{elWidth:oe,elHeight:T}=v===!0||x===!0?{elWidth:Math.max(k.width,q),elHeight:x===!0?Math.max(k.height,M):M}:{elWidth:q,elHeight:M};let A={maxWidth:y,maxHeight:c};(v===!0||x===!0)&&(A.minWidth=k.width+"px",x===!0&&(A.minHeight=k.height+"px")),Object.assign(a.style,A);const b=Qn(oe,T);let B=hl(k,b,o,m);if(s===void 0||u===void 0)zt(B,k,b,o,m);else{const{top:O,left:R}=B;zt(B,k,b,o,m);let Q=!1;if(B.top!==O){Q=!0;const Y=2*u[1];k.center=k.top-=Y,k.bottom-=Y+2}if(B.left!==R){Q=!0;const Y=2*u[0];k.middle=k.left-=Y,k.right-=Y+2}Q===!0&&(B=hl(k,b,o,m),zt(B,k,b,o,m))}A={top:B.top+"px",left:B.left+"px"},B.maxHeight!==void 0&&(A.maxHeight=B.maxHeight+"px",k.height>B.maxHeight&&(A.minHeight=A.maxHeight)),B.maxWidth!==void 0&&(A.maxWidth=B.maxWidth+"px",k.width>B.maxWidth&&(A.minWidth=A.maxWidth)),Object.assign(a.style,A),a.scrollTop!==g&&(a.scrollTop=g),a.scrollLeft!==F&&(a.scrollLeft=F)}function zt(e,l,a,u,r){const o=a.bottom,m=a.right,s=Xl(),v=window.innerHeight-s,x=document.body.clientWidth;if(e.top<0||e.top+o>v)if(r.vertical==="center")e.top=l[u.vertical]>v/2?Math.max(0,v-o):0,e.maxHeight=Math.min(o,v);else if(l[u.vertical]>v/2){const c=Math.min(v,u.vertical==="center"?l.center:u.vertical===r.vertical?l.bottom:l.top);e.maxHeight=Math.min(o,c),e.top=Math.max(0,c-o)}else e.top=Math.max(0,u.vertical==="center"?l.center:u.vertical===r.vertical?l.top:l.bottom),e.maxHeight=Math.min(o,v-e.top);if(e.left<0||e.left+m>x)if(e.maxWidth=Math.min(m,x),r.horizontal==="middle")e.left=l[u.horizontal]>x/2?Math.max(0,x-m):0;else if(l[u.horizontal]>x/2){const c=Math.min(x,u.horizontal==="middle"?l.middle:u.horizontal===r.horizontal?l.right:l.left);e.maxWidth=Math.min(m,c),e.left=Math.max(0,c-e.maxWidth)}else e.left=Math.max(0,u.horizontal==="middle"?l.middle:u.horizontal===r.horizontal?l.left:l.right),e.maxWidth=Math.min(m,x-e.left)}const El=Xe({name:"QMenu",inheritAttrs:!1,props:{...Ol,...Jl,...Xt,...Gl,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:vl},self:{type:String,validator:vl},offset:{type:Array,validator:Nn},scrollTarget:en,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...tn,"click","escapeKey"],setup(e,{slots:l,emit:a,attrs:u}){let r=null,o,m,s;const v=Ye(),{proxy:x}=v,{$q:c}=x,y=$(null),F=$(!1),g=h(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),k=Jt(e,c),{registerTick:q,removeTick:M}=ln(),{registerTimeout:oe}=nn(),{transitionProps:T,transitionStyle:A}=an(e),{localScrollTarget:b,changeScrollEvent:B,unconfigureScrollTarget:O}=jn(e,L),{anchorEl:R,canShow:Q}=Tl({showing:F}),{hide:Y}=on({showing:F,canShow:Q,handleShow:Se,handleHide:f,hideOnRouteChange:g,processOnMount:!0}),{showPortal:W,hidePortal:G,renderPortal:se}=un(v,y,ue,"menu"),ce={anchorEl:R,innerRef:y,onClickOutside(w){if(e.persistent!==!0&&F.value===!0)return Y(w),(w.type==="touchstart"||w.target.classList.contains("q-dialog__backdrop"))&&He(w),!0}},de=h(()=>ml(e.anchor||(e.cover===!0?"center middle":"bottom start"),c.lang.rtl)),ye=h(()=>e.cover===!0?de.value:ml(e.self||"top start",c.lang.rtl)),ve=h(()=>(e.square===!0?" q-menu--square":"")+(k.value===!0?" q-menu--dark q-dark":"")),E=h(()=>e.autoClose===!0?{onClick:Z}:{}),U=h(()=>F.value===!0&&e.persistent!==!0);me(U,w=>{w===!0?(vn(P),$n(ce)):(rl(P),cl(ce))});function ee(){mn(()=>{let w=y.value;w&&w.contains(document.activeElement)!==!0&&(w=w.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||w.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||w.querySelector("[autofocus], [data-autofocus]")||w,w.focus({preventScroll:!0}))})}function Se(w){if(r=e.noRefocus===!1?document.activeElement:null,rn(ne),W(),L(),o=void 0,w!==void 0&&(e.touchPosition||e.contextMenu)){const fe=sn(w);if(fe.left!==void 0){const{top:te,left:ie}=R.value.getBoundingClientRect();o={left:fe.left-ie,top:fe.top-te}}}m===void 0&&(m=me(()=>c.screen.width+"|"+c.screen.height+"|"+e.self+"|"+e.anchor+"|"+c.lang.rtl,z)),e.noFocus!==!0&&document.activeElement.blur(),q(()=>{z(),e.noFocus!==!0&&ee()}),oe(()=>{c.platform.is.ios===!0&&(s=e.autoClose,y.value.click()),z(),W(!0),a("show",w)},e.transitionDuration)}function f(w){M(),G(),p(!0),r!==null&&(w===void 0||w.qClickOutside!==!0)&&(((w&&w.type.indexOf("key")===0?r.closest('[tabindex]:not([tabindex^="-"])'):void 0)||r).focus(),r=null),oe(()=>{G(!0),a("hide",w)},e.transitionDuration)}function p(w){o=void 0,m!==void 0&&(m(),m=void 0),(w===!0||F.value===!0)&&(cn(ne),O(),cl(ce),rl(P)),w!==!0&&(r=null)}function L(){(R.value!==null||e.scrollTarget!==void 0)&&(b.value=dn(R.value,e.scrollTarget),B(b.value,z))}function Z(w){s!==!0?(fn(x,w),a("click",w)):s=!1}function ne(w){U.value===!0&&e.noFocus!==!0&&hn(y.value,w.target)!==!0&&ee()}function P(w){a("escapeKey"),Y(w)}function z(){Al({targetEl:y.value,offset:e.offset,anchorEl:R.value,anchorOrigin:de.value,selfOrigin:ye.value,absoluteOffset:o,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ue(){return S(it,T.value,()=>F.value===!0?S("div",{role:"menu",...u,ref:y,tabindex:-1,class:["q-menu q-position-engine scroll"+ve.value,u.class],style:[u.style,A.value],...E.value},kl(l.default)):null)}return bt(p),Object.assign(x,{focus:ee,updatePosition:z}),se}});let Ft=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const l=document.createElement("div");Object.assign(l.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(l),e.scrollLeft=-1e3,Ft=e.scrollLeft>=0,e.remove()}const ke=1e3,Un=["start","center","end","start-force","center-force","end-force"],Il=Array.prototype.filter,Zn=window.getComputedStyle(document.body).overflowAnchor===void 0?gn:function(e,l){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const a=e.children||[];Il.call(a,r=>r.dataset&&r.dataset.qVsAnchor!==void 0).forEach(r=>{delete r.dataset.qVsAnchor});const u=a[l];u&&u.dataset&&(u.dataset.qVsAnchor="")}))};function st(e,l){return e+l}function Yt(e,l,a,u,r,o,m,s){const v=e===window?document.scrollingElement||document.documentElement:e,x=r===!0?"offsetWidth":"offsetHeight",c={scrollStart:0,scrollViewSize:-m-s,scrollMaxSize:0,offsetStart:-m,offsetEnd:-s};if(r===!0?(e===window?(c.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,c.scrollViewSize+=document.documentElement.clientWidth):(c.scrollStart=v.scrollLeft,c.scrollViewSize+=v.clientWidth),c.scrollMaxSize=v.scrollWidth,o===!0&&(c.scrollStart=(Ft===!0?c.scrollMaxSize-c.scrollViewSize:0)-c.scrollStart)):(e===window?(c.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,c.scrollViewSize+=document.documentElement.clientHeight):(c.scrollStart=v.scrollTop,c.scrollViewSize+=v.clientHeight),c.scrollMaxSize=v.scrollHeight),a!==null)for(let y=a.previousElementSibling;y!==null;y=y.previousElementSibling)y.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetStart+=y[x]);if(u!==null)for(let y=u.nextElementSibling;y!==null;y=y.nextElementSibling)y.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetEnd+=y[x]);if(l!==e){const y=v.getBoundingClientRect(),F=l.getBoundingClientRect();r===!0?(c.offsetStart+=F.left-y.left,c.offsetEnd-=F.width):(c.offsetStart+=F.top-y.top,c.offsetEnd-=F.height),e!==window&&(c.offsetStart+=c.scrollStart),c.offsetEnd+=c.scrollMaxSize-c.offsetStart}return c}function gl(e,l,a,u){l==="end"&&(l=(e===window?document.body:e)[a===!0?"scrollWidth":"scrollHeight"]),e===window?a===!0?(u===!0&&(l=(Ft===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-l),window.scrollTo(l,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,l):a===!0?(u===!0&&(l=(Ft===!0?e.scrollWidth-e.offsetWidth:0)-l),e.scrollLeft=l):e.scrollTop=l}function St(e,l,a,u){if(a>=u)return 0;const r=l.length,o=Math.floor(a/ke),m=Math.floor((u-1)/ke)+1;let s=e.slice(o,m).reduce(st,0);return a%ke!==0&&(s-=l.slice(o*ke,a).reduce(st,0)),u%ke!==0&&u!==r&&(s-=l.slice(u,m*ke).reduce(st,0)),s}const Xn={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},yl={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Xn};function Jn({virtualScrollLength:e,getVirtualScrollTarget:l,getVirtualScrollEl:a,virtualScrollItemSizeComputed:u}){const r=Ye(),{props:o,emit:m,proxy:s}=r,{$q:v}=s;let x,c,y,F=[],g;const k=$(0),q=$(0),M=$({}),oe=$(null),T=$(null),A=$(null),b=$({from:0,to:0}),B=h(()=>o.tableColspan!==void 0?o.tableColspan:100);u===void 0&&(u=h(()=>o.virtualScrollItemSize));const O=h(()=>u.value+";"+o.virtualScrollHorizontal),R=h(()=>O.value+";"+o.virtualScrollSliceRatioBefore+";"+o.virtualScrollSliceRatioAfter);me(R,()=>{ve()}),me(O,Q);function Q(){ye(c,!0)}function Y(f){ye(f===void 0?c:f)}function W(f,p){const L=l();if(L==null||L.nodeType===8)return;const Z=Yt(L,a(),oe.value,T.value,o.virtualScrollHorizontal,v.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd);y!==Z.scrollViewSize&&ve(Z.scrollViewSize),se(L,Z,Math.min(e.value-1,Math.max(0,parseInt(f,10)||0)),0,Un.indexOf(p)!==-1?p:c!==-1&&f>c?"end":"start")}function G(){const f=l();if(f==null||f.nodeType===8)return;const p=Yt(f,a(),oe.value,T.value,o.virtualScrollHorizontal,v.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd),L=e.value-1,Z=p.scrollMaxSize-p.offsetStart-p.offsetEnd-q.value;if(x===p.scrollStart)return;if(p.scrollMaxSize<=0){se(f,p,0,0);return}y!==p.scrollViewSize&&ve(p.scrollViewSize),ce(b.value.from);const ne=Math.floor(p.scrollMaxSize-Math.max(p.scrollViewSize,p.offsetEnd)-Math.min(g[L],p.scrollViewSize/2));if(ne>0&&Math.ceil(p.scrollStart)>=ne){se(f,p,L,p.scrollMaxSize-p.offsetEnd-F.reduce(st,0));return}let P=0,z=p.scrollStart-p.offsetStart,ue=z;if(z<=Z&&z+p.scrollViewSize>=k.value)z-=k.value,P=b.value.from,ue=z;else for(let w=0;z>=F[w]&&P<L;w++)z-=F[w],P+=ke;for(;z>0&&P<L;)z-=g[P],z>-p.scrollViewSize?(P++,ue=z):ue=g[P]+z;se(f,p,P,ue)}function se(f,p,L,Z,ne){const P=typeof ne=="string"&&ne.indexOf("-force")!==-1,z=P===!0?ne.replace("-force",""):ne,ue=z!==void 0?z:"start";let w=Math.max(0,L-M.value[ue]),fe=w+M.value.total;fe>e.value&&(fe=e.value,w=Math.max(0,fe-M.value.total)),x=p.scrollStart;const te=w!==b.value.from||fe!==b.value.to;if(te===!1&&z===void 0){U(L);return}const{activeElement:ie}=document,we=A.value;te===!0&&we!==null&&we!==ie&&we.contains(ie)===!0&&(we.addEventListener("focusout",de),setTimeout(()=>{we!==null&&we.removeEventListener("focusout",de)})),Zn(we,L-w);const Fe=z!==void 0?g.slice(w,L).reduce(st,0):0;if(te===!0){const _e=fe>=b.value.from&&w<=b.value.to?b.value.to:fe;b.value={from:w,to:_e},k.value=St(F,g,0,w),q.value=St(F,g,fe,e.value),requestAnimationFrame(()=>{b.value.to!==fe&&x===p.scrollStart&&(b.value={from:b.value.from,to:fe},q.value=St(F,g,fe,e.value))})}requestAnimationFrame(()=>{if(x!==p.scrollStart)return;te===!0&&ce(w);const _e=g.slice(w,L).reduce(st,0),xe=_e+p.offsetStart+k.value,he=xe+g[L];let $e=xe+Z;if(z!==void 0){const ct=_e-Fe,Ne=p.scrollStart+ct;$e=P!==!0&&Ne<xe&&he<Ne+p.scrollViewSize?Ne:z==="end"?he-p.scrollViewSize:xe-(z==="start"?0:Math.round((p.scrollViewSize-g[L])/2))}x=$e,gl(f,$e,o.virtualScrollHorizontal,v.lang.rtl),U(L)})}function ce(f){const p=A.value;if(p){const L=Il.call(p.children,w=>w.classList&&w.classList.contains("q-virtual-scroll--skip")===!1),Z=L.length,ne=o.virtualScrollHorizontal===!0?w=>w.getBoundingClientRect().width:w=>w.offsetHeight;let P=f,z,ue;for(let w=0;w<Z;){for(z=ne(L[w]),w++;w<Z&&L[w].classList.contains("q-virtual-scroll--with-prev")===!0;)z+=ne(L[w]),w++;ue=z-g[P],ue!==0&&(g[P]+=ue,F[Math.floor(P/ke)]+=ue),P++}}}function de(){A.value!==null&&A.value!==void 0&&A.value.focus()}function ye(f,p){const L=1*u.value;(p===!0||Array.isArray(g)===!1)&&(g=[]);const Z=g.length;g.length=e.value;for(let P=e.value-1;P>=Z;P--)g[P]=L;const ne=Math.floor((e.value-1)/ke);F=[];for(let P=0;P<=ne;P++){let z=0;const ue=Math.min((P+1)*ke,e.value);for(let w=P*ke;w<ue;w++)z+=g[w];F.push(z)}c=-1,x=void 0,k.value=St(F,g,0,b.value.from),q.value=St(F,g,b.value.to,e.value),f>=0?(ce(b.value.from),pe(()=>{W(f)})):ee()}function ve(f){if(f===void 0&&typeof window<"u"){const z=l();z!=null&&z.nodeType!==8&&(f=Yt(z,a(),oe.value,T.value,o.virtualScrollHorizontal,v.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd).scrollViewSize)}y=f;const p=parseFloat(o.virtualScrollSliceRatioBefore)||0,L=parseFloat(o.virtualScrollSliceRatioAfter)||0,Z=1+p+L,ne=f===void 0||f<=0?1:Math.ceil(f/u.value),P=Math.max(1,ne,Math.ceil((o.virtualScrollSliceSize>0?o.virtualScrollSliceSize:10)/Z));M.value={total:Math.ceil(P*Z),start:Math.ceil(P*p),center:Math.ceil(P*(.5+p)),end:Math.ceil(P*(1+p)),view:ne}}function E(f,p){const L=o.virtualScrollHorizontal===!0?"width":"height",Z={["--q-virtual-scroll-item-"+L]:u.value+"px"};return[f==="tbody"?S(f,{class:"q-virtual-scroll__padding",key:"before",ref:oe},[S("tr",[S("td",{style:{[L]:`${k.value}px`,...Z},colspan:B.value})])]):S(f,{class:"q-virtual-scroll__padding",key:"before",ref:oe,style:{[L]:`${k.value}px`,...Z}}),S(f,{class:"q-virtual-scroll__content",key:"content",ref:A,tabindex:-1},p.flat()),f==="tbody"?S(f,{class:"q-virtual-scroll__padding",key:"after",ref:T},[S("tr",[S("td",{style:{[L]:`${q.value}px`,...Z},colspan:B.value})])]):S(f,{class:"q-virtual-scroll__padding",key:"after",ref:T,style:{[L]:`${q.value}px`,...Z}})]}function U(f){c!==f&&(o.onVirtualScroll!==void 0&&m("virtualScroll",{index:f,from:b.value.from,to:b.value.to-1,direction:f<c?"decrease":"increase",ref:s}),c=f)}ve();const ee=yn(G,v.platform.is.ios===!0?120:35);Sn(()=>{ve()});let Se=!1;return bn(()=>{Se=!0}),wn(()=>{if(Se!==!0)return;const f=l();x!==void 0&&f!==void 0&&f!==null&&f.nodeType!==8?gl(f,x,o.virtualScrollHorizontal,v.lang.rtl):W(c)}),bt(()=>{ee.cancel()}),Object.assign(s,{scrollTo:W,reset:Q,refresh:Y}),{virtualScrollSliceRange:b,virtualScrollSliceSizeComputed:M,setVirtualScrollSize:ve,onVirtualScrollEvt:ee,localResetVirtualScroll:ye,padVirtualScroll:E,scrollTo:W,reset:Q,refresh:Y}}const Sl=e=>["add","add-unique","toggle"].includes(e),Gn=".*+?^${}()|[]\\",ea=Object.keys(Kt);function Bt(e,l){if(typeof e=="function")return e;const a=e!==void 0?e:l;return u=>u!==null&&typeof u=="object"&&a in u?u[a]:u}const Ma=Xe({name:"QSelect",inheritAttrs:!1,props:{...yl,...el,...Kt,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Sl},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:yl.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...Qt,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:l,emit:a}){const{proxy:u}=Ye(),{$q:r}=u,o=$(!1),m=$(!1),s=$(-1),v=$(""),x=$(!1),c=$(!1);let y=null,F=null,g,k,q,M=null,oe,T,A,b;const B=$(null),O=$(null),R=$(null),Q=$(null),Y=$(null),W=_l(e),G=Cn(gt),se=h(()=>Array.isArray(e.options)?e.options.length:0),ce=h(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:de,virtualScrollSliceSizeComputed:ye,localResetVirtualScroll:ve,padVirtualScroll:E,onVirtualScrollEvt:U,scrollTo:ee,setVirtualScrollSize:Se}=Jn({virtualScrollLength:se,getVirtualScrollTarget:Ct,getVirtualScrollEl:Ke,virtualScrollItemSizeComputed:ce}),f=Zt(),p=h(()=>{const n=e.mapOptions===!0&&e.multiple!==!0,_=e.modelValue!==void 0&&(e.modelValue!==null||n===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const V=e.mapOptions===!0&&g!==void 0?g:[],j=_.map(le=>ft(le,V));return e.modelValue===null&&n===!0?j.filter(le=>le!==null):j}return _}),L=h(()=>{const n={};return ea.forEach(_=>{const V=e[_];V!==void 0&&(n[_]=V)}),n}),Z=h(()=>e.optionsDark===null?f.isDark.value:e.optionsDark),ne=h(()=>Vt(p.value)),P=h(()=>{let n="q-field__input q-placeholder col";return e.hideSelected===!0||p.value.length===0?[n,e.inputClass]:(n+=" q-field__input--padding",e.inputClass===void 0?n:[n,e.inputClass])}),z=h(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),ue=h(()=>se.value===0),w=h(()=>p.value.map(n=>be.value(n)).join(", ")),fe=h(()=>e.displayValue!==void 0?e.displayValue:w.value),te=h(()=>e.optionsHtml===!0?()=>!0:n=>n!=null&&n.html===!0),ie=h(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||p.value.some(te.value))),we=h(()=>f.focused.value===!0?e.tabindex:-1),Fe=h(()=>{const n={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":o.value===!0?"true":"false","aria-controls":`${f.targetUid.value}_lb`};return s.value>=0&&(n["aria-activedescendant"]=`${f.targetUid.value}_${s.value}`),n}),_e=h(()=>({id:`${f.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),xe=h(()=>p.value.map((n,_)=>({index:_,opt:n,html:te.value(n),selected:!0,removeAtIndex:wt,toggleOption:Ve,tabindex:we.value}))),he=h(()=>{if(se.value===0)return[];const{from:n,to:_}=de.value;return e.options.slice(n,_).map((V,j)=>{const le=Oe.value(V)===!0,X=vt(V)===!0,ge=n+j,re={clickable:!0,active:X,activeClass:Ne.value,manualFocus:!0,focused:!1,disable:le,tabindex:-1,dense:e.optionsDense,dark:Z.value,role:"option","aria-selected":X===!0?"true":"false",id:`${f.targetUid.value}_${ge}`,onClick:()=>{Ve(V)}};return le!==!0&&(s.value===ge&&(re.focused=!0),r.platform.is.desktop===!0&&(re.onMousemove=()=>{o.value===!0&&Te(ge)})),{index:ge,opt:V,html:te.value(V),label:be.value(V),selected:re.active,focused:re.focused,toggleOption:Ve,setOptionIndex:Te,itemProps:re}})}),$e=h(()=>e.dropdownIcon!==void 0?e.dropdownIcon:r.iconSet.arrow.dropdown),ct=h(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),Ne=h(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),Me=h(()=>Bt(e.optionValue,"value")),be=h(()=>Bt(e.optionLabel,"label")),Oe=h(()=>Bt(e.optionDisable,"disable")),Je=h(()=>p.value.map(Me.value)),Ot=h(()=>{const n={onInput:gt,onChange:G,onKeydown:mt,onKeyup:qe,onKeypress:Ae,onFocus:xt,onClick(_){k===!0&&Ue(_)}};return n.onCompositionstart=n.onCompositionupdate=n.onCompositionend=G,n});me(p,n=>{g=n,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&f.innerLoading.value!==!0&&(m.value!==!0&&o.value!==!0||ne.value!==!0)&&(q!==!0&&nt(),(m.value===!0||o.value===!0)&&Le(""))},{immediate:!0}),me(()=>e.fillInput,nt),me(o,Et),me(se,jl);function Ge(n){return e.emitValue===!0?Me.value(n):n}function dt(n){if(n!==-1&&n<p.value.length)if(e.multiple===!0){const _=e.modelValue.slice();a("remove",{index:n,value:_.splice(n,1)[0]}),a("update:modelValue",_)}else a("update:modelValue",null)}function wt(n){dt(n),f.focus()}function et(n,_){const V=Ge(n);if(e.multiple!==!0){e.fillInput===!0&&Ee(be.value(n),!0,!0),a("update:modelValue",V);return}if(p.value.length===0){a("add",{index:0,value:V}),a("update:modelValue",e.multiple===!0?[V]:V);return}if(_===!0&&vt(n)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const j=e.modelValue.slice();a("add",{index:j.length,value:V}),j.push(V),a("update:modelValue",j)}function Ve(n,_){if(f.editable.value!==!0||n===void 0||Oe.value(n)===!0)return;const V=Me.value(n);if(e.multiple!==!0){_!==!0&&(Ee(e.fillInput===!0?be.value(n):"",!0,!0),Ce()),O.value!==null&&O.value.focus(),(p.value.length===0||yt(Me.value(p.value[0]),V)!==!0)&&a("update:modelValue",e.emitValue===!0?V:n);return}if((k!==!0||x.value===!0)&&f.focus(),xt(),p.value.length===0){const X=e.emitValue===!0?V:n;a("add",{index:0,value:X}),a("update:modelValue",e.multiple===!0?[X]:X);return}const j=e.modelValue.slice(),le=Je.value.findIndex(X=>yt(X,V));if(le!==-1)a("remove",{index:le,value:j.splice(le,1)[0]});else{if(e.maxValues!==void 0&&j.length>=e.maxValues)return;const X=e.emitValue===!0?V:n;a("add",{index:j.length,value:X}),j.push(X)}a("update:modelValue",j)}function Te(n){if(r.platform.is.desktop!==!0)return;const _=n!==-1&&n<se.value?n:-1;s.value!==_&&(s.value=_)}function We(n=1,_){if(o.value===!0){let V=s.value;do V=sl(V+n,-1,se.value-1);while(V!==-1&&V!==s.value&&Oe.value(e.options[V])===!0);s.value!==V&&(Te(V),ee(V),_!==!0&&e.useInput===!0&&e.fillInput===!0&&lt(V>=0?be.value(e.options[V]):oe,!0))}}function ft(n,_){const V=j=>yt(Me.value(j),n);return e.options.find(V)||_.find(V)||n}function vt(n){const _=Me.value(n);return Je.value.find(V=>yt(V,_))!==void 0}function xt(n){e.useInput===!0&&O.value!==null&&(n===void 0||O.value===n.target&&n.target.value===w.value)&&O.value.select()}function Mt(n){Gt(n,27)===!0&&o.value===!0&&(Ue(n),Ce(),nt()),a("keyup",n)}function qe(n){const{value:_}=n.target;if(n.keyCode!==void 0){Mt(n);return}if(n.target.value="",y!==null&&(clearTimeout(y),y=null),F!==null&&(clearTimeout(F),F=null),nt(),typeof _=="string"&&_.length!==0){const V=_.toLocaleLowerCase(),j=X=>{const ge=e.options.find(re=>String(X.value(re)).toLocaleLowerCase()===V);return ge===void 0?!1:(p.value.indexOf(ge)===-1?Ve(ge):Ce(),!0)},le=X=>{j(Me)!==!0&&X!==!0&&j(be)!==!0&&Le(_,!0,()=>le(!0))};le()}else f.clearValue(n)}function Ae(n){a("keypress",n)}function mt(n){if(a("keydown",n),Dn(n)===!0)return;const _=v.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),V=n.shiftKey!==!0&&e.disableTabSelection!==!0&&e.multiple!==!0&&(s.value!==-1||_===!0);if(n.keyCode===27){rt(n);return}if(n.keyCode===9&&V===!1){I();return}if(n.target===void 0||n.target.id!==f.targetUid.value||f.editable.value!==!0)return;if(n.keyCode===40&&f.innerLoading.value!==!0&&o.value===!1){He(n),K();return}if(n.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&v.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?dt(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&a("update:modelValue",null);return}(n.keyCode===35||n.keyCode===36)&&(typeof v.value!="string"||v.value.length===0)&&(He(n),s.value=-1,We(n.keyCode===36?1:-1,e.multiple)),(n.keyCode===33||n.keyCode===34)&&ye.value!==void 0&&(He(n),s.value=Math.max(-1,Math.min(se.value,s.value+(n.keyCode===33?-1:1)*ye.value.view)),We(n.keyCode===33?1:-1,e.multiple)),(n.keyCode===38||n.keyCode===40)&&(He(n),We(n.keyCode===38?-1:1,e.multiple));const j=se.value;if((A===void 0||b<Date.now())&&(A=""),j>0&&e.useInput!==!0&&n.key!==void 0&&n.key.length===1&&n.altKey===!1&&n.ctrlKey===!1&&n.metaKey===!1&&(n.keyCode!==32||A.length!==0)){o.value!==!0&&K(n);const le=n.key.toLocaleLowerCase(),X=A.length===1&&A[0]===le;b=Date.now()+1500,X===!1&&(He(n),A+=le);const ge=new RegExp("^"+A.split("").map(It=>Gn.indexOf(It)!==-1?"\\"+It:It).join(".*"),"i");let re=s.value;if(X===!0||re<0||ge.test(be.value(e.options[re]))!==!0)do re=sl(re+1,-1,j-1);while(re!==s.value&&(Oe.value(e.options[re])===!0||ge.test(be.value(e.options[re]))!==!0));s.value!==re&&pe(()=>{Te(re),ee(re),re>=0&&e.useInput===!0&&e.fillInput===!0&&lt(be.value(e.options[re]),!0)});return}if(!(n.keyCode!==13&&(n.keyCode!==32||e.useInput===!0||A!=="")&&(n.keyCode!==9||V===!1))){if(n.keyCode!==9&&He(n),s.value!==-1&&s.value<j){Ve(e.options[s.value]);return}if(_===!0){const le=(X,ge)=>{if(ge){if(Sl(ge)!==!0)return}else ge=e.newValueMode;if(Ee("",e.multiple!==!0,!0),X==null)return;(ge==="toggle"?Ve:et)(X,ge==="add-unique"),e.multiple!==!0&&(O.value!==null&&O.value.focus(),Ce())};if(e.onNewValue!==void 0?a("newValue",v.value,le):le(v.value),e.multiple!==!0)return}o.value===!0?I():f.innerLoading.value!==!0&&K()}}function Ke(){return k===!0?Y.value:R.value!==null&&R.value.contentEl!==null?R.value.contentEl:void 0}function Ct(){return Ke()}function Be(){return e.hideSelected===!0?[]:l["selected-item"]!==void 0?xe.value.map(n=>l["selected-item"](n)).slice():l.selected!==void 0?[].concat(l.selected()):e.useChips===!0?xe.value.map((n,_)=>S(Fl,{key:"option-"+_,removable:f.editable.value===!0&&Oe.value(n.opt)!==!0,dense:!0,textColor:e.color,tabindex:we.value,onRemove(){n.removeAtIndex(_)}},()=>S("span",{class:"ellipsis",[n.html===!0?"innerHTML":"textContent"]:be.value(n.opt)}))):[S("span",{[ie.value===!0?"innerHTML":"textContent"]:fe.value})]}function tt(){if(ue.value===!0)return l["no-option"]!==void 0?l["no-option"]({inputValue:v.value}):void 0;const n=l.option!==void 0?l.option:V=>S(Yn,{key:V.index,...V.itemProps},()=>S(In,()=>S(zn,()=>S("span",{[V.html===!0?"innerHTML":"textContent"]:V.label}))));let _=E("div",he.value.map(n));return l["before-options"]!==void 0&&(_=l["before-options"]().concat(_)),pn(l["after-options"],_)}function ht(n,_){const V=_===!0?{...Fe.value,...f.splitAttrs.attributes.value}:void 0,j={ref:_===!0?O:void 0,key:"i_t",class:P.value,style:e.inputStyle,value:v.value!==void 0?v.value:"",type:"search",...V,id:_===!0?f.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":n===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Ot.value};return n!==!0&&k===!0&&(Array.isArray(j.class)===!0?j.class=[...j.class,"no-pointer-events"]:j.class+=" no-pointer-events"),S("input",j)}function gt(n){y!==null&&(clearTimeout(y),y=null),F!==null&&(clearTimeout(F),F=null),!(n&&n.target&&n.target.qComposing===!0)&&(lt(n.target.value||""),q=!0,oe=v.value,f.focused.value!==!0&&(k!==!0||x.value===!0)&&f.focus(),e.onFilter!==void 0&&(y=setTimeout(()=>{y=null,Le(v.value)},e.inputDebounce)))}function lt(n,_){v.value!==n&&(v.value=n,_===!0||e.inputDebounce===0||e.inputDebounce==="0"?a("inputValue",n):F=setTimeout(()=>{F=null,a("inputValue",n)},e.inputDebounce))}function Ee(n,_,V){q=V!==!0,e.useInput===!0&&(lt(n,!0),(_===!0||V!==!0)&&(oe=n),_!==!0&&Le(n))}function Le(n,_,V){if(e.onFilter===void 0||_!==!0&&f.focused.value!==!0)return;f.innerLoading.value===!0?a("filterAbort"):(f.innerLoading.value=!0,c.value=!0),n!==""&&e.multiple!==!0&&p.value.length!==0&&q!==!0&&n===be.value(p.value[0])&&(n="");const j=setTimeout(()=>{o.value===!0&&(o.value=!1)},10);M!==null&&clearTimeout(M),M=j,a("filter",n,(le,X)=>{(_===!0||f.focused.value===!0)&&M===j&&(clearTimeout(M),typeof le=="function"&&le(),c.value=!1,pe(()=>{f.innerLoading.value=!1,f.editable.value===!0&&(_===!0?o.value===!0&&Ce():o.value===!0?Et(!0):o.value=!0),typeof X=="function"&&pe(()=>{X(u)}),typeof V=="function"&&pe(()=>{V(u)})}))},()=>{f.focused.value===!0&&M===j&&(clearTimeout(M),f.innerLoading.value=!1,c.value=!1),o.value===!0&&(o.value=!1)})}function Tt(){return S(El,{ref:R,class:z.value,style:e.popupContentStyle,modelValue:o.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&ue.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:Z.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:ct.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,..._e.value,onScrollPassive:U,onBeforeShow:nl,onBeforeHide:At,onShow:t},tt)}function At(n){al(n),I()}function t(){Se()}function i(n){Ue(n),O.value!==null&&O.value.focus(),x.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function d(n){Ue(n),pe(()=>{x.value=!1})}function C(){const n=[S(Ln,{class:`col-auto ${f.fieldClass.value}`,...L.value,for:f.targetUid.value,dark:Z.value,square:!0,loading:c.value,itemAligned:!1,filled:!0,stackLabel:v.value.length!==0,...f.splitAttrs.listeners.value,onFocus:i,onBlur:d},{...l,rawControl:()=>f.getControl(!0),before:void 0,after:void 0})];return o.value===!0&&n.push(S("div",{ref:Y,class:z.value+" scroll",style:e.popupContentStyle,..._e.value,onClick:rt,onScrollPassive:U},tt())),S(Vl,{ref:Q,modelValue:m.value,position:e.useInput===!0?"top":void 0,transitionShow:T,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:nl,onBeforeHide:D,onHide:N,onShow:H},()=>S("div",{class:"q-select__dialog"+(Z.value===!0?" q-select__dialog--dark q-dark":"")+(x.value===!0?" q-select__dialog--focused":"")},n))}function D(n){al(n),Q.value!==null&&Q.value.__updateRefocusTarget(f.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),f.focused.value=!1}function N(n){Ce(),f.focused.value===!1&&a("blur",n),nt()}function H(){const n=document.activeElement;(n===null||n.id!==f.targetUid.value)&&O.value!==null&&O.value!==n&&O.value.focus(),Se()}function I(){m.value!==!0&&(s.value=-1,o.value===!0&&(o.value=!1),f.focused.value===!1&&(M!==null&&(clearTimeout(M),M=null),f.innerLoading.value===!0&&(a("filterAbort"),f.innerLoading.value=!1,c.value=!1)))}function K(n){f.editable.value===!0&&(k===!0?(f.onControlFocusin(n),m.value=!0,pe(()=>{f.focus()})):f.focus(),e.onFilter!==void 0?Le(v.value):(ue.value!==!0||l["no-option"]!==void 0)&&(o.value=!0))}function Ce(){m.value=!1,I()}function nt(){e.useInput===!0&&Ee(e.multiple!==!0&&e.fillInput===!0&&p.value.length!==0&&be.value(p.value[0])||"",!0,!0)}function Et(n){let _=-1;if(n===!0){if(p.value.length!==0){const V=Me.value(p.value[0]);_=e.options.findIndex(j=>yt(Me.value(j),V))}ve(_)}Te(_)}function jl(n,_){o.value===!0&&f.innerLoading.value===!1&&(ve(-1,!0),pe(()=>{o.value===!0&&f.innerLoading.value===!1&&(n>_?ve():Et(!0))}))}function ll(){m.value===!1&&R.value!==null&&R.value.updatePosition()}function nl(n){n!==void 0&&Ue(n),a("popupShow",n),f.hasPopupOpen=!0,f.onControlFocusin(n)}function al(n){n!==void 0&&Ue(n),a("popupHide",n),f.hasPopupOpen=!1,f.onControlFocusout(n)}function ol(){k=r.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?l["no-option"]!==void 0||e.onFilter!==void 0||ue.value===!1:!0),T=r.platform.is.ios===!0&&k===!0&&e.useInput===!0?"fade":e.transitionShow}return xn(ol),Mn(ll),ol(),bt(()=>{y!==null&&clearTimeout(y),F!==null&&clearTimeout(F)}),Object.assign(u,{showPopup:K,hidePopup:Ce,removeAtIndex:dt,add:et,toggleOption:Ve,getOptionIndex:()=>s.value,setOptionIndex:Te,moveOptionSelection:We,filter:Le,updateMenuPosition:ll,updateInputValue:Ee,isOptionSelected:vt,getEmittingOptionValue:Ge,isOptionDisabled:(...n)=>Oe.value.apply(null,n)===!0,getOptionValue:(...n)=>Me.value.apply(null,n),getOptionLabel:(...n)=>be.value.apply(null,n)}),Object.assign(f,{innerValue:p,fieldClass:h(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:B,targetRef:O,hasValue:ne,showPopup:K,floatingLabel:h(()=>e.hideSelected!==!0&&ne.value===!0||typeof v.value=="number"||v.value.length!==0||Vt(e.displayValue)),getControlChild:()=>{if(f.editable.value!==!1&&(m.value===!0||ue.value!==!0||l["no-option"]!==void 0))return k===!0?C():Tt();f.hasPopupOpen===!0&&(f.hasPopupOpen=!1)},controlEvents:{onFocusin(n){f.onControlFocusin(n)},onFocusout(n){f.onControlFocusout(n,()=>{nt(),I()})},onClick(n){if(rt(n),k!==!0&&o.value===!0){I(),O.value!==null&&O.value.focus();return}K(n)}},getControl:n=>{const _=Be(),V=n===!0||m.value!==!0||k!==!0;if(e.useInput===!0)_.push(ht(n,V));else if(f.editable.value===!0){const le=V===!0?Fe.value:void 0;_.push(S("input",{ref:V===!0?O:void 0,key:"d_t",class:"q-select__focus-target",id:V===!0?f.targetUid.value:void 0,value:fe.value,readonly:!0,"data-autofocus":n===!0||e.autofocus===!0||void 0,...le,onKeydown:mt,onKeyup:Mt,onKeypress:Ae})),V===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&_.push(S("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:qe}))}if(W.value!==void 0&&e.disable!==!0&&Je.value.length!==0){const le=Je.value.map(X=>S("option",{value:X,selected:!0}));_.push(S("select",{class:"hidden",name:W.value,multiple:e.multiple},le))}const j=e.useInput===!0||V!==!0?void 0:f.splitAttrs.attributes.value;return S("div",{class:"q-field__native row items-center",...j,...f.splitAttrs.listeners.value},_)},getInnerAppend:()=>e.loading!==!0&&c.value!==!0&&e.hideDropdownIcon!==!0?[S(kt,{class:"q-select__dropdown-icon"+(o.value===!0?" rotate-180":""),name:$e.value})]:null}),Ut(f)}});function ta(){let e=Object.create(null);return{getCache:(l,a)=>e[l]===void 0?e[l]=typeof a=="function"?a():a:e[l],setCache(l,a){e[l]=a},hasCache(l){return Object.hasOwnProperty.call(e,l)},clearCache(l){l!==void 0?delete e[l]:e=Object.create(null)}}}const je=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function la(e,l,a){return Object.prototype.toString.call(e)==="[object Date]"&&(a=e.getDate(),l=e.getMonth()+1,e=e.getFullYear()),ua(tl(e,l,a))}function bl(e,l,a){return Yl(oa(e,l,a))}function na(e){return aa(e)===0}function _t(e,l){return l<=6?31:l<=11||na(e)?30:29}function aa(e){const l=je.length;let a=je[0],u,r,o,m,s;if(e<a||e>=je[l-1])throw new Error("Invalid Jalaali year "+e);for(s=1;s<l&&(u=je[s],r=u-a,!(e<u));s+=1)a=u;return m=e-a,r-m<6&&(m=m-r+ae(r+4,33)*33),o=De(De(m+1,33)-1,4),o===-1&&(o=4),o}function zl(e,l){const a=je.length,u=e+621;let r=-14,o=je[0],m,s,v,x,c;if(e<o||e>=je[a-1])throw new Error("Invalid Jalaali year "+e);for(c=1;c<a&&(m=je[c],s=m-o,!(e<m));c+=1)r=r+ae(s,33)*8+ae(De(s,33),4),o=m;x=e-o,r=r+ae(x,33)*8+ae(De(x,33)+3,4),De(s,33)===4&&s-x===4&&(r+=1);const y=ae(u,4)-ae((ae(u,100)+1)*3,4)-150,F=20+r-y;return l||(s-x<6&&(x=x-s+ae(s+4,33)*33),v=De(De(x+1,33)-1,4),v===-1&&(v=4)),{leap:v,gy:u,march:F}}function oa(e,l,a){const u=zl(e,!0);return tl(u.gy,3,u.march)+(l-1)*31-ae(l,7)*(l-7)+a-1}function ua(e){const l=Yl(e).gy;let a=l-621,u,r,o;const m=zl(a,!1),s=tl(l,3,m.march);if(o=e-s,o>=0){if(o<=185)return r=1+ae(o,31),u=De(o,31)+1,{jy:a,jm:r,jd:u};o-=186}else a-=1,o+=179,m.leap===1&&(o+=1);return r=7+ae(o,30),u=De(o,30)+1,{jy:a,jm:r,jd:u}}function tl(e,l,a){let u=ae((e+ae(l-8,6)+100100)*1461,4)+ae(153*De(l+9,12)+2,5)+a-34840408;return u=u-ae(ae(e+100100+ae(l-8,6),100)*3,4)+752,u}function Yl(e){let l=4*e+139361631;l=l+ae(ae(4*e+183187720,146097)*3,4)*4-3908;const a=ae(De(l,1461),4)*5+308,u=ae(De(a,153),5)+1,r=De(ae(a,153),12)+1;return{gy:ae(l,1461)-100100+ae(8-r,6),gm:r,gd:u}}function ae(e,l){return~~(e/l)}function De(e,l){return e-~~(e/l)*l}const ia=["gregorian","persian"],wl={mask:{type:String},locale:Object,calendar:{type:String,validator:e=>ia.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},ra=["update:modelValue"];function Pe(e){return e.year+"/"+J(e.month)+"/"+J(e.day)}function sa(e,l){const a=h(()=>e.disable!==!0&&e.readonly!==!0),u=h(()=>a.value===!0?0:-1),r=h(()=>{const s=[];return e.color!==void 0&&s.push(`bg-${e.color}`),e.textColor!==void 0&&s.push(`text-${e.textColor}`),s.join(" ")});function o(){return e.locale!==void 0?{...l.lang.date,...e.locale}:l.lang.date}function m(s){const v=new Date,x=s===!0?null:0;if(e.calendar==="persian"){const c=la(v);return{year:c.jy,month:c.jm,day:c.jd}}return{year:v.getFullYear(),month:v.getMonth()+1,day:v.getDate(),hour:x,minute:x,second:x,millisecond:x}}return{editable:a,tabindex:u,headerClass:r,getLocale:o,getCurrentDate:m}}const Bl=864e5,ca=36e5,Wt=6e4,Ll="YYYY-MM-DDTHH:mm:ss.SSSZ",da=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,fa=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,Lt={};function va(e,l){const a="("+l.days.join("|")+")",u=e+a;if(Lt[u]!==void 0)return Lt[u];const r="("+l.daysShort.join("|")+")",o="("+l.months.join("|")+")",m="("+l.monthsShort.join("|")+")",s={};let v=0;const x=e.replace(fa,y=>{switch(v++,y){case"YY":return s.YY=v,"(-?\\d{1,2})";case"YYYY":return s.YYYY=v,"(-?\\d{1,4})";case"M":return s.M=v,"(\\d{1,2})";case"Mo":return s.M=v++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return s.M=v,"(\\d{2})";case"MMM":return s.MMM=v,m;case"MMMM":return s.MMMM=v,o;case"D":return s.D=v,"(\\d{1,2})";case"Do":return s.D=v++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return s.D=v,"(\\d{2})";case"H":return s.H=v,"(\\d{1,2})";case"HH":return s.H=v,"(\\d{2})";case"h":return s.h=v,"(\\d{1,2})";case"hh":return s.h=v,"(\\d{2})";case"m":return s.m=v,"(\\d{1,2})";case"mm":return s.m=v,"(\\d{2})";case"s":return s.s=v,"(\\d{1,2})";case"ss":return s.s=v,"(\\d{2})";case"S":return s.S=v,"(\\d{1})";case"SS":return s.S=v,"(\\d{2})";case"SSS":return s.S=v,"(\\d{3})";case"A":return s.A=v,"(AM|PM)";case"a":return s.a=v,"(am|pm)";case"aa":return s.aa=v,"(a\\.m\\.|p\\.m\\.)";case"ddd":return r;case"dddd":return a;case"Q":case"d":case"E":return"(\\d{1})";case"do":return v++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return v++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return v++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return s.Z=v,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return s.ZZ=v,"(Z|[+-]\\d{2}\\d{2})";case"X":return s.X=v,"(-?\\d+)";case"x":return s.x=v,"(-?\\d{4,})";default:return v--,y[0]==="["&&(y=y.substring(1,y.length-1)),y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),c={map:s,regex:new RegExp("^"+x)};return Lt[u]=c,c}function Pl(e,l){return e!==void 0?e:l!==void 0?l.date:kn.date}function xl(e,l=""){const a=e>0?"-":"+",u=Math.abs(e),r=Math.floor(u/60),o=u%60;return a+J(r)+l+J(o)}function ma(e,l,a,u,r){const o={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(r!==void 0&&Object.assign(o,r),e==null||e===""||typeof e!="string")return o;l===void 0&&(l=Ll);const m=Pl(a,ql.props),s=m.months,v=m.monthsShort,{regex:x,map:c}=va(l,m),y=e.match(x);if(y===null)return o;let F="";if(c.X!==void 0||c.x!==void 0){const g=parseInt(y[c.X!==void 0?c.X:c.x],10);if(isNaN(g)===!0||g<0)return o;const k=new Date(g*(c.X!==void 0?1e3:1));o.year=k.getFullYear(),o.month=k.getMonth()+1,o.day=k.getDate(),o.hour=k.getHours(),o.minute=k.getMinutes(),o.second=k.getSeconds(),o.millisecond=k.getMilliseconds()}else{if(c.YYYY!==void 0)o.year=parseInt(y[c.YYYY],10);else if(c.YY!==void 0){const g=parseInt(y[c.YY],10);o.year=g<0?g:2e3+g}if(c.M!==void 0){if(o.month=parseInt(y[c.M],10),o.month<1||o.month>12)return o}else c.MMM!==void 0?o.month=v.indexOf(y[c.MMM])+1:c.MMMM!==void 0&&(o.month=s.indexOf(y[c.MMMM])+1);if(c.D!==void 0){if(o.day=parseInt(y[c.D],10),o.year===null||o.month===null||o.day<1)return o;const g=u!=="persian"?new Date(o.year,o.month,0).getDate():_t(o.year,o.month);if(o.day>g)return o}c.H!==void 0?o.hour=parseInt(y[c.H],10)%24:c.h!==void 0&&(o.hour=parseInt(y[c.h],10)%12,(c.A&&y[c.A]==="PM"||c.a&&y[c.a]==="pm"||c.aa&&y[c.aa]==="p.m.")&&(o.hour+=12),o.hour=o.hour%24),c.m!==void 0&&(o.minute=parseInt(y[c.m],10)%60),c.s!==void 0&&(o.second=parseInt(y[c.s],10)%60),c.S!==void 0&&(o.millisecond=parseInt(y[c.S],10)*10**(3-y[c.S].length)),(c.Z!==void 0||c.ZZ!==void 0)&&(F=c.Z!==void 0?y[c.Z].replace(":",""):y[c.ZZ],o.timezoneOffset=(F[0]==="+"?-1:1)*(60*F.slice(1,3)+1*F.slice(3,5)))}return o.dateHash=J(o.year,6)+"/"+J(o.month)+"/"+J(o.day),o.timeHash=J(o.hour)+":"+J(o.minute)+":"+J(o.second)+F,o}function Pt(e){const l=new Date(e.getFullYear(),e.getMonth(),e.getDate());l.setDate(l.getDate()-(l.getDay()+6)%7+3);const a=new Date(l.getFullYear(),0,4);a.setDate(a.getDate()-(a.getDay()+6)%7+3);const u=l.getTimezoneOffset()-a.getTimezoneOffset();l.setHours(l.getHours()-u);const r=(l-a)/(Bl*7);return 1+Math.floor(r)}function ze(e,l,a){const u=new Date(e),r=`set${a===!0?"UTC":""}`;switch(l){case"year":case"years":u[`${r}Month`](0);case"month":case"months":u[`${r}Date`](1);case"day":case"days":case"date":u[`${r}Hours`](0);case"hour":case"hours":u[`${r}Minutes`](0);case"minute":case"minutes":u[`${r}Seconds`](0);case"second":case"seconds":u[`${r}Milliseconds`](0)}return u}function Dt(e,l,a){return(e.getTime()-e.getTimezoneOffset()*Wt-(l.getTime()-l.getTimezoneOffset()*Wt))/a}function Rl(e,l,a="days"){const u=new Date(e),r=new Date(l);switch(a){case"years":case"year":return u.getFullYear()-r.getFullYear();case"months":case"month":return(u.getFullYear()-r.getFullYear())*12+u.getMonth()-r.getMonth();case"days":case"day":case"date":return Dt(ze(u,"day"),ze(r,"day"),Bl);case"hours":case"hour":return Dt(ze(u,"hour"),ze(r,"hour"),ca);case"minutes":case"minute":return Dt(ze(u,"minute"),ze(r,"minute"),Wt);case"seconds":case"second":return Dt(ze(u,"second"),ze(r,"second"),1e3)}}function Rt(e){return Rl(e,ze(e,"year"),"days")+1}function at(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const Ml={YY(e,l,a){const u=this.YYYY(e,l,a)%100;return u>=0?J(u):"-"+J(Math.abs(u))},YYYY(e,l,a){return a??e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return at(e.getMonth()+1)},MM(e){return J(e.getMonth()+1)},MMM(e,l){return l.monthsShort[e.getMonth()]},MMMM(e,l){return l.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return at(this.Q(e))},D(e){return e.getDate()},Do(e){return at(e.getDate())},DD(e){return J(e.getDate())},DDD(e){return Rt(e)},DDDo(e){return at(Rt(e))},DDDD(e){return J(Rt(e),3)},d(e){return e.getDay()},do(e){return at(e.getDay())},dd(e,l){return l.days[e.getDay()].slice(0,2)},ddd(e,l){return l.daysShort[e.getDay()]},dddd(e,l){return l.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return Pt(e)},wo(e){return at(Pt(e))},ww(e){return J(Pt(e))},H(e){return e.getHours()},HH(e){return J(e.getHours())},h(e){const l=e.getHours();return l===0?12:l>12?l%12:l},hh(e){return J(this.h(e))},m(e){return e.getMinutes()},mm(e){return J(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return J(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return J(Math.floor(e.getMilliseconds()/10))},SSS(e){return J(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,l,a,u){const r=u??e.getTimezoneOffset();return xl(r,":")},ZZ(e,l,a,u){const r=u??e.getTimezoneOffset();return xl(r)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function ha(e,l,a,u,r){if(e!==0&&!e||e===1/0||e===-1/0)return;const o=new Date(e);if(isNaN(o))return;l===void 0&&(l=Ll);const m=Pl(a,ql.props);return l.replace(da,(s,v)=>s in Ml?Ml[s](o,m,u,r):v===void 0?s:v.split("\\]").join("]"))}const Qe=20,ga=["Calendar","Years","Months"],Cl=e=>ga.includes(e),jt=e=>/^-?[\d]+\/[0-1]\d$/.test(e),ot="  ";function Re(e){return e.year+"/"+J(e.month)}const Ca=Xe({name:"QDate",props:{...wl,...el,...Xt,modelValue:{required:!0,validator:e=>typeof e=="string"||Array.isArray(e)===!0||Object(e)===e||e===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...wl.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:jt},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:jt},navigationMaxYearMonth:{type:String,validator:jt},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Cl}},emits:[...ra,"rangeStart","rangeEnd","navigation"],setup(e,{slots:l,emit:a}){const{proxy:u}=Ye(),{$q:r}=u,o=Jt(e,r),{getCache:m}=ta(),{tabindex:s,headerClass:v,getLocale:x,getCurrentDate:c}=sa(e,r);let y;const F=_n(e),g=qn(F),k=$(null),q=$(wt()),M=$(x()),oe=h(()=>wt()),T=h(()=>x()),A=h(()=>c()),b=$(Ve(q.value,M.value)),B=$(e.defaultView),O=h(()=>r.lang.rtl===!0?"right":"left"),R=$(O.value),Q=$(O.value),Y=b.value.year,W=$(Y-Y%Qe-(Y<0?Qe:0)),G=$(null),se=h(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(o.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),ce=h(()=>e.color||"primary"),de=h(()=>e.textColor||"white"),ye=h(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),ve=h(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),E=h(()=>ve.value.filter(t=>typeof t=="string").map(t=>et(t,q.value,M.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),U=h(()=>{const t=i=>et(i,q.value,M.value);return ve.value.filter(i=>Vn(i)===!0&&i.from!==void 0&&i.to!==void 0).map(i=>({from:t(i.from),to:t(i.to)})).filter(i=>i.from.dateHash!==null&&i.to.dateHash!==null&&i.from.dateHash<i.to.dateHash)}),ee=h(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const i=bl(t.year,t.month,t.day);return new Date(i.gy,i.gm-1,i.gd)}),Se=h(()=>e.calendar==="persian"?Pe:(t,i,d)=>ha(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),i===void 0?q.value:i,d===void 0?M.value:d,t.year,t.timezoneOffset)),f=h(()=>E.value.length+U.value.reduce((t,i)=>t+1+Rl(ee.value(i.to),ee.value(i.from)),0)),p=h(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(G.value!==null){const d=G.value.init,C=ee.value(d);return M.value.daysShort[C.getDay()]+", "+M.value.monthsShort[d.month-1]+" "+d.day+ot+"?"}if(f.value===0)return ot;if(f.value>1)return`${f.value} ${M.value.pluralDay}`;const t=E.value[0],i=ee.value(t);return isNaN(i.valueOf())===!0?ot:M.value.headerTitle!==void 0?M.value.headerTitle(i,t):M.value.daysShort[i.getDay()]+", "+M.value.monthsShort[t.month-1]+" "+t.day}),L=h(()=>E.value.concat(U.value.map(i=>i.from)).sort((i,d)=>i.year-d.year||i.month-d.month)[0]),Z=h(()=>E.value.concat(U.value.map(i=>i.to)).sort((i,d)=>d.year-i.year||d.month-i.month)[0]),ne=h(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(f.value===0)return ot;if(f.value>1){const t=L.value,i=Z.value,d=M.value.monthsShort;return d[t.month-1]+(t.year!==i.year?" "+t.year+ot+d[i.month-1]+" ":t.month!==i.month?ot+d[i.month-1]:"")+" "+i.year}return E.value[0].year}),P=h(()=>{const t=[r.iconSet.datetime.arrowLeft,r.iconSet.datetime.arrowRight];return r.lang.rtl===!0?t.reverse():t}),z=h(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):M.value.firstDayOfWeek),ue=h(()=>{const t=M.value.daysShort,i=z.value;return i>0?t.slice(i,7).concat(t.slice(0,i)):t}),w=h(()=>{const t=b.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():_t(t.year,t.month)}),fe=h(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),te=h(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),ie=h(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),we=h(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return te.value!==null&&te.value.year>=b.value.year&&(t.year.prev=!1,te.value.year===b.value.year&&te.value.month>=b.value.month&&(t.month.prev=!1)),ie.value!==null&&ie.value.year<=b.value.year&&(t.year.next=!1,ie.value.year===b.value.year&&ie.value.month<=b.value.month&&(t.month.next=!1)),t}),Fe=h(()=>{const t={};return E.value.forEach(i=>{const d=Re(i);t[d]===void 0&&(t[d]=[]),t[d].push(i.day)}),t}),_e=h(()=>{const t={};return U.value.forEach(i=>{const d=Re(i.from),C=Re(i.to);if(t[d]===void 0&&(t[d]=[]),t[d].push({from:i.from.day,to:d===C?i.to.day:void 0,range:i}),d<C){let D;const{year:N,month:H}=i.from,I=H<12?{year:N,month:H+1}:{year:N+1,month:1};for(;(D=Re(I))<=C;)t[D]===void 0&&(t[D]=[]),t[D].push({from:void 0,to:D===C?i.to.day:void 0,range:i}),I.month++,I.month>12&&(I.year++,I.month=1)}}),t}),xe=h(()=>{if(G.value===null)return;const{init:t,initHash:i,final:d,finalHash:C}=G.value,[D,N]=i<=C?[t,d]:[d,t],H=Re(D),I=Re(N);if(H!==he.value&&I!==he.value)return;const K={};return H===he.value?(K.from=D.day,K.includeFrom=!0):K.from=1,I===he.value?(K.to=N.day,K.includeTo=!0):K.to=w.value,K}),he=h(()=>Re(b.value)),$e=h(()=>{const t={};if(e.options===void 0){for(let d=1;d<=w.value;d++)t[d]=!0;return t}const i=typeof e.options=="function"?e.options:d=>e.options.includes(d);for(let d=1;d<=w.value;d++){const C=he.value+"/"+J(d);t[d]=i(C)}return t}),ct=h(()=>{const t={};if(e.events===void 0)for(let i=1;i<=w.value;i++)t[i]=!1;else{const i=typeof e.events=="function"?e.events:d=>e.events.includes(d);for(let d=1;d<=w.value;d++){const C=he.value+"/"+J(d);t[d]=i(C)===!0&&fe.value(C)}}return t}),Ne=h(()=>{let t,i;const{year:d,month:C}=b.value;if(e.calendar!=="persian")t=new Date(d,C-1,1),i=new Date(d,C-1,0).getDate();else{const D=bl(d,C,1);t=new Date(D.gy,D.gm-1,D.gd);let N=C-1,H=d;N===0&&(N=12,H--),i=_t(H,N)}return{days:t.getDay()-z.value-1,endDay:i}}),Me=h(()=>{const t=[],{days:i,endDay:d}=Ne.value,C=i<0?i+7:i;if(C<6)for(let H=d-C;H<=d;H++)t.push({i:H,fill:!0});const D=t.length;for(let H=1;H<=w.value;H++){const I={i:H,event:ct.value[H],classes:[]};$e.value[H]===!0&&(I.in=!0,I.flat=!0),t.push(I)}if(Fe.value[he.value]!==void 0&&Fe.value[he.value].forEach(H=>{const I=D+H-1;Object.assign(t[I],{selected:!0,unelevated:!0,flat:!1,color:ce.value,textColor:de.value})}),_e.value[he.value]!==void 0&&_e.value[he.value].forEach(H=>{if(H.from!==void 0){const I=D+H.from-1,K=D+(H.to||w.value)-1;for(let Ce=I;Ce<=K;Ce++)Object.assign(t[Ce],{range:H.range,unelevated:!0,color:ce.value,textColor:de.value});Object.assign(t[I],{rangeFrom:!0,flat:!1}),H.to!==void 0&&Object.assign(t[K],{rangeTo:!0,flat:!1})}else if(H.to!==void 0){const I=D+H.to-1;for(let K=D;K<=I;K++)Object.assign(t[K],{range:H.range,unelevated:!0,color:ce.value,textColor:de.value});Object.assign(t[I],{flat:!1,rangeTo:!0})}else{const I=D+w.value-1;for(let K=D;K<=I;K++)Object.assign(t[K],{range:H.range,unelevated:!0,color:ce.value,textColor:de.value})}}),xe.value!==void 0){const H=D+xe.value.from-1,I=D+xe.value.to-1;for(let K=H;K<=I;K++)t[K].color=ce.value,t[K].editRange=!0;xe.value.includeFrom===!0&&(t[H].editRangeFrom=!0),xe.value.includeTo===!0&&(t[I].editRangeTo=!0)}b.value.year===A.value.year&&b.value.month===A.value.month&&(t[D+A.value.day-1].today=!0);const N=t.length%7;if(N>0){const H=7-N;for(let I=1;I<=H;I++)t.push({i:I,fill:!0})}return t.forEach(H=>{let I="q-date__calendar-item ";H.fill===!0?I+="q-date__calendar-item--fill":(I+=`q-date__calendar-item--${H.in===!0?"in":"out"}`,H.range!==void 0&&(I+=` q-date__range${H.rangeTo===!0?"-to":H.rangeFrom===!0?"-from":""}`),H.editRange===!0&&(I+=` q-date__edit-range${H.editRangeFrom===!0?"-from":""}${H.editRangeTo===!0?"-to":""}`),(H.range!==void 0||H.editRange===!0)&&(I+=` text-${H.color}`)),H.classes=I}),t}),be=h(()=>e.disable===!0?{"aria-disabled":"true"}:{});me(()=>e.modelValue,t=>{if(y===t)y=0;else{const i=Ve(q.value,M.value);Ae(i.year,i.month,i)}}),me(B,()=>{k.value!==null&&u.$el.contains(document.activeElement)===!0&&k.value.focus()}),me(()=>b.value.year+"|"+b.value.month,()=>{a("navigation",{year:b.value.year,month:b.value.month})}),me(oe,t=>{gt(t,M.value,"mask"),q.value=t}),me(T,t=>{gt(q.value,t,"locale"),M.value=t});function Oe(){const{year:t,month:i,day:d}=A.value,C={...b.value,year:t,month:i,day:d},D=Fe.value[Re(C)];(D===void 0||D.includes(C.day)===!1)&&tt(C),Ge(C.year,C.month)}function Je(t){Cl(t)===!0&&(B.value=t)}function Ot(t,i){["month","year"].includes(t)&&(t==="month"?We:ft)(i===!0?-1:1)}function Ge(t,i){B.value="Calendar",Ae(t,i)}function dt(t,i){if(e.range===!1||!t){G.value=null;return}const d=Object.assign({...b.value},t),C=i!==void 0?Object.assign({...b.value},i):d;G.value={init:d,initHash:Pe(d),final:C,finalHash:Pe(C)},Ge(d.year,d.month)}function wt(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function et(t,i,d){return ma(t,i,d,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function Ve(t,i){const d=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(d.length===0)return Te();const C=d[d.length-1],D=et(C.from!==void 0?C.from:C,t,i);return D.dateHash===null?Te():D}function Te(){let t,i;if(e.defaultYearMonth!==void 0){const d=e.defaultYearMonth.split("/");t=parseInt(d[0],10),i=parseInt(d[1],10)}else{const d=A.value!==void 0?A.value:c();t=d.year,i=d.month}return{year:t,month:i,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+J(i)+"/01"}}function We(t){let i=b.value.year,d=Number(b.value.month)+t;d===13?(d=1,i++):d===0&&(d=12,i--),Ae(i,d),ye.value===!0&&Ke("month")}function ft(t){const i=Number(b.value.year)+t;Ae(i,b.value.month),ye.value===!0&&Ke("year")}function vt(t){Ae(t,b.value.month),B.value=e.defaultView==="Years"?"Months":"Calendar",ye.value===!0&&Ke("year")}function xt(t){Ae(b.value.year,t),B.value="Calendar",ye.value===!0&&Ke("month")}function Mt(t,i){const d=Fe.value[i];(d!==void 0&&d.includes(t.day)===!0?ht:tt)(t)}function qe(t){return{year:t.year,month:t.month,day:t.day}}function Ae(t,i,d){if(te.value!==null&&t<=te.value.year&&((i<te.value.month||t<te.value.year)&&(i=te.value.month),t=te.value.year),ie.value!==null&&t>=ie.value.year&&((i>ie.value.month||t>ie.value.year)&&(i=ie.value.month),t=ie.value.year),d!==void 0){const{hour:D,minute:N,second:H,millisecond:I,timezoneOffset:K,timeHash:Ce}=d;Object.assign(b.value,{hour:D,minute:N,second:H,millisecond:I,timezoneOffset:K,timeHash:Ce})}const C=t+"/"+J(i)+"/01";C!==b.value.dateHash&&(R.value=b.value.dateHash<C==(r.lang.rtl!==!0)?"left":"right",t!==b.value.year&&(Q.value=R.value),pe(()=>{W.value=t-t%Qe-(t<0?Qe:0),Object.assign(b.value,{year:t,month:i,day:1,dateHash:C})}))}function mt(t,i,d){const C=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;y=C;const{reason:D,details:N}=Ct(i,d);a("update:modelValue",C,D,N)}function Ke(t){const i=E.value[0]!==void 0&&E.value[0].dateHash!==null?{...E.value[0]}:{...b.value};pe(()=>{i.year=b.value.year,i.month=b.value.month;const d=e.calendar!=="persian"?new Date(i.year,i.month,0).getDate():_t(i.year,i.month);i.day=Math.min(Math.max(1,i.day),d);const C=Be(i);y=C;const{details:D}=Ct("",i);a("update:modelValue",C,t,D)})}function Ct(t,i){return i.from!==void 0?{reason:`${t}-range`,details:{...qe(i.target),from:qe(i.from),to:qe(i.to)}}:{reason:`${t}-day`,details:qe(i)}}function Be(t,i,d){return t.from!==void 0?{from:Se.value(t.from,i,d),to:Se.value(t.to,i,d)}:Se.value(t,i,d)}function tt(t){let i;if(e.multiple===!0)if(t.from!==void 0){const d=Pe(t.from),C=Pe(t.to),D=E.value.filter(H=>H.dateHash<d||H.dateHash>C),N=U.value.filter(({from:H,to:I})=>I.dateHash<d||H.dateHash>C);i=D.concat(N).concat(t).map(H=>Be(H))}else{const d=ve.value.slice();d.push(Be(t)),i=d}else i=Be(t);mt(i,"add",t)}function ht(t){if(e.noUnset===!0)return;let i=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const d=Be(t);t.from!==void 0?i=e.modelValue.filter(C=>C.from!==void 0?C.from!==d.from&&C.to!==d.to:!0):i=e.modelValue.filter(C=>C!==d),i.length===0&&(i=null)}mt(i,"remove",t)}function gt(t,i,d){const C=E.value.concat(U.value).map(D=>Be(D,t,i)).filter(D=>D.from!==void 0?D.from.dateHash!==null&&D.to.dateHash!==null:D.dateHash!==null);a("update:modelValue",(e.multiple===!0?C:C[0])||null,d)}function lt(){if(e.minimal!==!0)return S("div",{class:"q-date__header "+v.value},[S("div",{class:"relative-position"},[S(it,{name:"q-transition--fade"},()=>S("div",{key:"h-yr-"+ne.value,class:"q-date__header-subtitle q-date__header-link "+(B.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:s.value,...m("vY",{onClick(){B.value="Years"},onKeyup(t){t.keyCode===13&&(B.value="Years")}})},[ne.value]))]),S("div",{class:"q-date__header-title relative-position flex no-wrap"},[S("div",{class:"relative-position col"},[S(it,{name:"q-transition--fade"},()=>S("div",{key:"h-sub"+p.value,class:"q-date__header-title-label q-date__header-link "+(B.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:s.value,...m("vC",{onClick(){B.value="Calendar"},onKeyup(t){t.keyCode===13&&(B.value="Calendar")}})},[p.value]))]),e.todayBtn===!0?S(Ie,{class:"q-date__header-today self-start",icon:r.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:s.value,onClick:Oe}):null])])}function Ee({label:t,type:i,key:d,dir:C,goTo:D,boundaries:N,cls:H}){return[S("div",{class:"row items-center q-date__arrow"},[S(Ie,{round:!0,dense:!0,size:"sm",flat:!0,icon:P.value[0],tabindex:s.value,disable:N.prev===!1,...m("go-#"+i,{onClick(){D(-1)}})})]),S("div",{class:"relative-position overflow-hidden flex flex-center"+H},[S(it,{name:"q-transition--jump-"+C},()=>S("div",{key:d},[S(Ie,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:s.value,...m("view#"+i,{onClick:()=>{B.value=i}})})]))]),S("div",{class:"row items-center q-date__arrow"},[S(Ie,{round:!0,dense:!0,size:"sm",flat:!0,icon:P.value[1],tabindex:s.value,disable:N.next===!1,...m("go+#"+i,{onClick(){D(1)}})})])]}const Le={Calendar:()=>[S("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[S("div",{class:"q-date__navigation row items-center no-wrap"},Ee({label:M.value.months[b.value.month-1],type:"Months",key:b.value.month,dir:R.value,goTo:We,boundaries:we.value.month,cls:" col"}).concat(Ee({label:b.value.year,type:"Years",key:b.value.year,dir:Q.value,goTo:ft,boundaries:we.value.year,cls:""}))),S("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},ue.value.map(t=>S("div",{class:"q-date__calendar-item"},[S("div",t)]))),S("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[S(it,{name:"q-transition--slide-"+R.value},()=>S("div",{key:he.value,class:"q-date__calendar-days fit"},Me.value.map(t=>S("div",{class:t.classes},[t.in===!0?S(Ie,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:s.value,...m("day#"+t.i,{onClick:()=>{Tt(t.i)},onMouseover:()=>{At(t.i)}})},t.event!==!1?()=>S("div",{class:"q-date__event bg-"+t.event}):null):S("div",""+t.i)]))))])])],Months(){const t=b.value.year===A.value.year,i=C=>te.value!==null&&b.value.year===te.value.year&&te.value.month>C||ie.value!==null&&b.value.year===ie.value.year&&ie.value.month<C,d=M.value.monthsShort.map((C,D)=>{const N=b.value.month===D+1;return S("div",{class:"q-date__months-item flex flex-center"},[S(Ie,{class:t===!0&&A.value.month===D+1?"q-date__today":null,flat:N!==!0,label:C,unelevated:N,color:N===!0?ce.value:null,textColor:N===!0?de.value:null,tabindex:s.value,disable:i(D+1),...m("month#"+D,{onClick:()=>{xt(D+1)}})})])});return e.yearsInMonthView===!0&&d.unshift(S("div",{class:"row no-wrap full-width"},[Ee({label:b.value.year,type:"Years",key:b.value.year,dir:Q.value,goTo:ft,boundaries:we.value.year,cls:" col"})])),S("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},d)},Years(){const t=W.value,i=t+Qe,d=[],C=D=>te.value!==null&&te.value.year>D||ie.value!==null&&ie.value.year<D;for(let D=t;D<=i;D++){const N=b.value.year===D;d.push(S("div",{class:"q-date__years-item flex flex-center"},[S(Ie,{key:"yr"+D,class:A.value.year===D?"q-date__today":null,flat:!N,label:D,dense:!0,unelevated:N,color:N===!0?ce.value:null,textColor:N===!0?de.value:null,tabindex:s.value,disable:C(D),...m("yr#"+D,{onClick:()=>{vt(D)}})})]))}return S("div",{class:"q-date__view q-date__years flex flex-center"},[S("div",{class:"col-auto"},[S(Ie,{round:!0,dense:!0,flat:!0,icon:P.value[0],tabindex:s.value,disable:C(t),...m("y-",{onClick:()=>{W.value-=Qe}})})]),S("div",{class:"q-date__years-content col self-stretch row items-center"},d),S("div",{class:"col-auto"},[S(Ie,{round:!0,dense:!0,flat:!0,icon:P.value[1],tabindex:s.value,disable:C(i),...m("y+",{onClick:()=>{W.value+=Qe}})})])])}};function Tt(t){const i={...b.value,day:t};if(e.range===!1){Mt(i,he.value);return}if(G.value===null){const d=Me.value.find(D=>D.fill!==!0&&D.i===t);if(e.noUnset!==!0&&d.range!==void 0){ht({target:i,from:d.range.from,to:d.range.to});return}if(d.selected===!0){ht(i);return}const C=Pe(i);G.value={init:i,initHash:C,final:i,finalHash:C},a("rangeStart",qe(i))}else{const d=G.value.initHash,C=Pe(i),D=d<=C?{from:G.value.init,to:i}:{from:i,to:G.value.init};G.value=null,tt(d===C?i:{target:i,...D}),a("rangeEnd",{from:qe(D.from),to:qe(D.to)})}}function At(t){if(G.value!==null){const i={...b.value,day:t};Object.assign(G.value,{final:i,finalHash:Pe(i)})}}return Object.assign(u,{setToday:Oe,setView:Je,offsetCalendar:Ot,setCalendarTo:Ge,setEditingRange:dt}),()=>{const t=[S("div",{class:"q-date__content col relative-position"},[S(it,{name:"q-transition--fade"},Le[B.value])])],i=kl(l.default);return i!==void 0&&t.push(S("div",{class:"q-date__actions"},i)),e.name!==void 0&&e.disable!==!0&&g(t,"push"),S("div",{class:se.value,...be.value},[lt(),S("div",{ref:k,class:"q-date__main col column",tabindex:-1},t)])}}}),Da=Xe({name:"QPopupProxy",props:{...Ol,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:l,emit:a,attrs:u}){const{proxy:r}=Ye(),{$q:o}=r,m=$(!1),s=$(null),v=h(()=>parseInt(e.breakpoint,10)),{canShow:x}=Tl({showing:m});function c(){return o.screen.width<v.value||o.screen.height<v.value?"dialog":"menu"}const y=$(c()),F=h(()=>y.value==="menu"?{maxHeight:"99vh"}:{});me(()=>c(),q=>{m.value!==!0&&(y.value=q)});function g(q){m.value=!0,a("show",q)}function k(q){m.value=!1,y.value=c(),a("hide",q)}return Object.assign(r,{show(q){x(q)===!0&&s.value.show(q)},hide(q){s.value.hide(q)},toggle(q){s.value.toggle(q)}}),Hl(r,"currentComponent",()=>({type:y.value,ref:s.value})),()=>{const q={ref:s,...F.value,...u,onShow:g,onHide:k};let M;return y.value==="dialog"?M=Vl:(M=El,Object.assign(q,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),S(M,q,l.default)}}});function ut(e,l,a,u){const r=[];return e.forEach(o=>{u(o)===!0?r.push(o):l.push({failedPropValidation:a,file:o})}),r}function pt(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),He(e)}const ya={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Sa=["rejected"];function ba({editable:e,dnd:l,getFileInput:a,addFilesToQueue:u}){const{props:r,emit:o,proxy:m}=Ye(),s=$(null),v=h(()=>r.accept!==void 0?r.accept.split(",").map(T=>(T=T.trim(),T==="*"?"*/":(T.endsWith("/*")&&(T=T.slice(0,T.length-1)),T.toUpperCase()))):null),x=h(()=>parseInt(r.maxFiles,10)),c=h(()=>parseInt(r.maxTotalSize,10));function y(T){if(e.value)if(T!==Object(T)&&(T={target:null}),T.target!==null&&T.target.matches('input[type="file"]')===!0)T.clientX===0&&T.clientY===0&&Ue(T);else{const A=a();A&&A!==T.target&&A.click(T)}}function F(T){e.value&&T&&u(null,T)}function g(T,A,b,B){let O=Array.from(A||T.target.files);const R=[],Q=()=>{R.length!==0&&o("rejected",R)};if(r.accept!==void 0&&v.value.indexOf("*/")===-1&&(O=ut(O,R,"accept",Y=>v.value.some(W=>Y.type.toUpperCase().startsWith(W)||Y.name.toUpperCase().endsWith(W))),O.length===0))return Q();if(r.maxFileSize!==void 0){const Y=parseInt(r.maxFileSize,10);if(O=ut(O,R,"max-file-size",W=>W.size<=Y),O.length===0)return Q()}if(r.multiple!==!0&&O.length!==0&&(O=[O[0]]),O.forEach(Y=>{Y.__key=Y.webkitRelativePath+Y.lastModified+Y.name+Y.size}),B===!0){const Y=b.map(W=>W.__key);O=ut(O,R,"duplicate",W=>Y.includes(W.__key)===!1)}if(O.length===0)return Q();if(r.maxTotalSize!==void 0){let Y=B===!0?b.reduce((W,G)=>W+G.size,0):0;if(O=ut(O,R,"max-total-size",W=>(Y+=W.size,Y<=c.value)),O.length===0)return Q()}if(typeof r.filter=="function"){const Y=r.filter(O);O=ut(O,R,"filter",W=>Y.includes(W))}if(r.maxFiles!==void 0){let Y=B===!0?b.length:0;if(O=ut(O,R,"max-files",()=>(Y++,Y<=x.value)),O.length===0)return Q()}if(Q(),O.length!==0)return O}function k(T){pt(T),l.value!==!0&&(l.value=!0)}function q(T){He(T),(T.relatedTarget!==null||pl.is.safari!==!0?T.relatedTarget!==s.value:document.elementsFromPoint(T.clientX,T.clientY).includes(s.value)===!1)===!0&&(l.value=!1)}function M(T){pt(T);const A=T.dataTransfer.files;A.length!==0&&u(null,A),l.value=!1}function oe(T){if(l.value===!0)return S("div",{ref:s,class:`q-${T}__dnd absolute-full`,onDragenter:pt,onDragover:pt,onDragleave:q,onDrop:M})}return Object.assign(m,{pickFiles:y,addFiles:F}),{pickFiles:y,addFiles:F,onDragover:k,onDragleave:q,processFiles:g,getDndNode:oe,maxFilesNumber:x,maxTotalSizeNumber:c}}const pa=Xe({name:"QFile",inheritAttrs:!1,props:{...Hn,...el,...ya,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Qt,...Sa],setup(e,{slots:l,emit:a,attrs:u}){const{proxy:r}=Ye(),o=Zt(),m=$(null),s=$(!1),v=_l(e),{pickFiles:x,onDragover:c,onDragleave:y,processFiles:F,getDndNode:g}=ba({editable:o.editable,dnd:s,getFileInput:se,addFilesToQueue:ce}),k=Fn(e),q=h(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),M=h(()=>Vt(q.value)),oe=h(()=>q.value.map(E=>E.name).join(", ")),T=h(()=>Bn(q.value.reduce((E,U)=>E+U.size,0))),A=h(()=>({totalSize:T.value,filesNumber:q.value.length,maxFiles:e.maxFiles})),b=h(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:v.value,...u,id:o.targetUid.value,disabled:o.editable.value!==!0})),B=h(()=>"q-file q-field--auto-height"+(s.value===!0?" q-file--dnd":"")),O=h(()=>e.multiple===!0&&e.append===!0);function R(E){const U=q.value.slice();U.splice(E,1),Y(U)}function Q(E){const U=q.value.indexOf(E);U!==-1&&R(U)}function Y(E){a("update:modelValue",e.multiple===!0?E:E[0])}function W(E){E.keyCode===13&&rt(E)}function G(E){(E.keyCode===13||E.keyCode===32)&&x(E)}function se(){return m.value}function ce(E,U){const ee=F(E,U,q.value,O.value),Se=se();Se!=null&&(Se.value=""),ee!==void 0&&((e.multiple===!0?e.modelValue&&ee.every(f=>q.value.includes(f)):e.modelValue===ee[0])||Y(O.value===!0?q.value.concat(ee):ee))}function de(){return[S("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function ye(){if(l.file!==void 0)return q.value.length===0?de():q.value.map((U,ee)=>l.file({index:ee,file:U,ref:this}));if(l.selected!==void 0)return q.value.length===0?de():l.selected({files:q.value,ref:this});if(e.useChips===!0)return q.value.length===0?de():q.value.map((U,ee)=>S(Fl,{key:"file-"+ee,removable:o.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{R(ee)}},()=>S("span",{class:"ellipsis",textContent:U.name})));const E=e.displayValue!==void 0?e.displayValue:oe.value;return E.length!==0?[S("div",{class:e.inputClass,style:e.inputStyle,textContent:E})]:de()}function ve(){const E={ref:m,...b.value,...k.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:ce};return e.multiple===!0&&(E.multiple=!0),S("input",E)}return Object.assign(o,{fieldClass:B,emitValue:Y,hasValue:M,inputRef:m,innerValue:q,floatingLabel:h(()=>M.value===!0||Vt(e.displayValue)),computedCounter:h(()=>{if(e.counterLabel!==void 0)return e.counterLabel(A.value);const E=e.maxFiles;return`${q.value.length}${E!==void 0?" / "+E:""} (${T.value})`}),getControlChild:()=>g("file"),getControl:()=>{const E={ref:o.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return o.editable.value===!0&&Object.assign(E,{onDragover:c,onDragleave:y,onKeydown:W,onKeyup:G}),S("div",E,[ve()].concat(ye()))}}),Object.assign(r,{removeAtIndex:R,removeFile:Q,getNativeElement:()=>m.value}),Hl(r,"nativeEl",()=>m.value),Ut(o)}});function Dl(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const l=parseInt(e,10);return isNaN(l)?0:l}const ka=On({name:"close-popup",beforeMount(e,{value:l}){const a={depth:Dl(l),handler(u){a.depth!==0&&setTimeout(()=>{const r=Tn(e);r!==void 0&&An(r,u,a.depth)})},handlerKey(u){Gt(u,13)===!0&&a.handler(u)}};e.__qclosepopup=a,e.addEventListener("click",a.handler),e.addEventListener("keyup",a.handlerKey)},updated(e,{value:l,oldValue:a}){l!==a&&(e.__qclosepopup.depth=Dl(l))},beforeUnmount(e){const l=e.__qclosepopup;e.removeEventListener("click",l.handler),e.removeEventListener("keyup",l.handlerKey),delete e.__qclosepopup}});export{ka as C,Ma as Q,Da as a,Ca as b,pa as c};
