import{T as I,r as b,c as F,o as r,i as P,e as a,b as t,d as l,n as H,Q as W,h as p,j as X,ac as C,ad as f,ae as Q,t as i,a as m,l as S,p as Y,af as Z,aa as ee,F as D,k as N,a5 as L,K as U,u as B}from"./app-DGSfB9v9.js";import{Q as j}from"./QSelect-pFVPNWUN.js";import{Q as te}from"./QBtnDropdown-BzoPAAqj.js";import{Q as q}from"./QBanner-TARCzsOb.js";import{Q as le,c as se,a as T}from"./QLayout-Bjn0ecJ_.js";import{Q as ae}from"./QPage-DRf7xX7V.js";import{A as ne}from"./Admin-DeMXaItS.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QMenu-DEZSvYCL.js";const ie={class:"flex justify-between items-center zcard q-pa-md"},re={class:"flex items-center q-gutter-md"},de={class:"row q-mt-sm"},ue={class:"page-title"},pe={class:"col-xs-12"},me={class:"table-auto border-collapse border border-gray-300 w-full mt-6 text-sm"},ce={class:"bg-gray-100"},xe={class:"px-4 py-2 text-left text-gray-600"},be=["checked"],fe={class:"px-4 py-2"},ve=["value"],ge={class:"px-4 py-2"},ye={class:"px-4 py-2"},_e={class:"px-4 py-2"},ke={class:"px-4 py-2"},Ce={class:"px-4 py-2"},he={class:"px-4 py-2"},Ae={class:"px-4 py-2"},we=["onClick"],Ve={class:"px-4 py-2"},Qe=["onClick"],Se={class:"text-h6 q-mb-md"},De={key:0},Ne={key:1},je={key:2},qe={class:"q-pa-sm"},Ee={class:"text-caption"},Ie={class:"text-h6"},Fe=Object.assign({layout:ne},{__name:"ApprovedApplications",props:["jobDetails","examCenters"],setup(y){const O=y,u=I({application_ids:[],status:""}),x=I({exam_center_id:[],application_ids:[]}),_=b(!1),v=b(!1),c=b(null);b(null);const o=b([]),$=F(()=>k.value.length>0&&k.value.every(n=>o.value.includes(n.id))),M=n=>{n.target.checked?o.value=k.value.map(e=>e.id):o.value=[]},z=n=>{c.value=n.applicant,_.value=!0},h=b(""),k=F(()=>O.jobDetails.applications.filter(n=>{var g;return(((g=n.applicant.user)==null?void 0:g.name.toLowerCase())||"").includes(h.value.toLowerCase())})),R=()=>{v.value=!0},J=()=>{if(!x.exam_center_id){alert("Please select an exam center.");return}x.application_ids=o.value,x.post(route("exams.allotCenters"),{onSuccess:()=>{v.value=!1,x.reset()},onError:n=>{console.error(n),alert("An error occurred while assigning exam centers.")}})},K=()=>{if(o.value.length===0){alert("Please select at least one applicant.");return}u.application_ids=o.value,u.status="pending",u.put(route("admin.applications.bulkChangeStatus"),{onSuccess:()=>{u.reset(),o.value=[]}})},G=()=>{if(o.value.length===0){alert("Please select at least one applicant.");return}u.application_ids=o.value,u.status="eligible",u.put(route("admin.applications.bulkChangeStatus"),{onSuccess:()=>{u.reset(),o.value=[]}})};return(n,e)=>(r(),P(ae,{padding:""},{default:a(()=>{var g;return[e[26]||(e[26]=t("p",{class:"page-title"},"QUALIFIED LIST",-1)),t("div",ie,[l(W,{modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=s=>h.value=s),dense:"",outlined:"",placeholder:"Search",style:{width:"240px"},onChange:n.handleSearch},{append:a(()=>[l(H,{name:"search"})]),_:1},8,["modelValue","onChange"]),t("div",re,[l(p,{onClick:R,color:"primary",disabled:o.value.length===0,label:"Assign Exam Center"},null,8,["disabled"]),l(p,{onClick:K,color:"primary",disabled:o.value.length===0,label:"Mark as Disqualified"},null,8,["disabled"]),l(p,{onClick:G,color:"primary",disabled:o.value.length===0,label:"Mark as Eligible"},null,8,["disabled"]),l(X,{vertical:""}),l(te,{class:"q-ma-xs q-pa-xs",color:"primary",flat:"","dropdown-icon":"sort"},{default:a(()=>[l(C,{class:"q-pa-sm",style:{"min-width":"280px"}},{default:a(()=>[l(f,null,{default:a(()=>e[10]||(e[10]=[t("p",{class:"q-ma-none ztext-lg"},"Filter",-1)])),_:1}),l(f,null,{default:a(()=>[l(j,{modelValue:n.filterData.job,"onUpdate:modelValue":e[1]||(e[1]=s=>n.filterData.job=s),options:n.jobs,class:"my-input",dense:"",label:"Job",outlined:""},null,8,["modelValue","options"])]),_:1}),l(f,null,{default:a(()=>[l(j,{modelValue:n.filterData.district,"onUpdate:modelValue":e[2]||(e[2]=s=>n.filterData.district=s),options:n.districts,class:"my-input",dense:"",label:"District",outlined:""},null,8,["modelValue","options"])]),_:1}),l(Q,null,{default:a(()=>[l(p,{flat:"",label:"Reset",onClick:n.resetFilter},null,8,["onClick"]),l(p,{color:"primary",label:"Filter",rounded:"",style:{"min-width":"100px"},onClick:n.doFilter},null,8,["onClick"])]),_:1})]),_:1})]),_:1})])]),t("div",de,[t("p",ue,i((g=y.jobDetails)==null?void 0:g.post_name)+" : APPLICATIONS",1),t("div",pe,[t("table",me,[t("thead",ce,[t("tr",null,[t("th",xe,[t("input",{type:"checkbox",onChange:e[3]||(e[3]=s=>M(s)),checked:$.value},null,40,be)]),e[11]||(e[11]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Applicant Name",-1)),e[12]||(e[12]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Roll No",-1)),e[13]||(e[13]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Parent Name",-1)),e[14]||(e[14]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Community",-1)),e[15]||(e[15]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Exam Center",-1)),e[16]||(e[16]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Status",-1)),e[17]||(e[17]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Actions",-1)),e[18]||(e[18]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Marks",-1))])]),t("tbody",null,[(r(!0),m(D,null,S(k.value,s=>{var A,d,w,E;return r(),m("tr",{key:s.id,class:"hover:bg-gray-50 transition duration-150"},[t("td",fe,[Y(t("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=V=>o.value=V),value:s.id},null,8,ve),[[Z,o.value]])]),t("td",ge,i(((A=s.applicant.user)==null?void 0:A.name)||"N/A"),1),t("td",ye,i(s.application_id||"N/A"),1),t("td",_e,i(((d=s.applicant)==null?void 0:d.parents_name)||"N/A"),1),t("td",ke,i(((w=s.applicant)==null?void 0:w.community)||"N/A"),1),t("td",Ce,i(((E=s.exam_center)==null?void 0:E.center_name)||"N/A"),1),t("td",he,[t("span",{class:ee(["px-2 py-1 rounded-full text-xs font-semibold",s.status==="approved"?"bg-green-100 text-green-800":s.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"])},i(s.status||"Pending"),3)]),t("td",Ae,[t("button",{onClick:V=>n.$inertia.get(n.route("admin.application.show_applicant_detail",{jobDetails:y.jobDetails.id,application:s.id})),class:"bg-blue-500 hover:bg-blue-700 text-white py-1 px-4 rounded mr-2 transition duration-150"}," OPEN ",8,we)]),t("td",Ve,[t("button",{onClick:V=>z(s),class:"bg-blue-500 hover:bg-blue-700 text-white py-1 px-4 rounded mr-2 transition duration-150"}," View Marks ",8,Qe)])])}),128))])])])]),l(U,{modelValue:_.value,"onUpdate:modelValue":e[6]||(e[6]=s=>_.value=s),persistent:""},{default:a(()=>[l(C,{style:{"min-width":"450px"}},{default:a(()=>[l(f,null,{default:a(()=>[t("div",Se,"Exam Details: "+i(c.value.user.name),1),c.value.exams.length===0?(r(),m("div",De,[l(q,{class:"bg-warning text-black q-mb-md"},{default:a(()=>e[19]||(e[19]=[t("div",null,"No exams found for this applicant.",-1)])),_:1})])):N("",!0),c.value.exam_marks.length===0?(r(),m("div",Ne,[l(q,{class:"bg-warning text-black q-mb-md"},{default:a(()=>e[20]||(e[20]=[t("div",null,"No marks assigned for the selected exams.",-1)])),_:1})])):N("",!0),c.value.exam_marks.length!==0?(r(),m("div",je,[(r(!0),m(D,null,S(c.value.exams,(s,A)=>(r(),m("div",{key:s.id,class:"q-mt-md"},[t("div",qe,[l(q,{class:"bg-primary text-white q-mb-md"},{default:a(()=>[t("div",null,[e[21]||(e[21]=t("strong",null,"Exam Name:",-1)),L(" "+i(s.exam_name)+" ",1),e[22]||(e[22]=t("br",null,null,-1)),e[23]||(e[23]=t("strong",null,"Exam Date:",-1)),L(" "+i(s.exam_date),1)])]),_:2},1024),l(C,{bordered:"",class:"q-pa-none"},{default:a(()=>[l(f,null,{default:a(()=>[e[24]||(e[24]=t("div",null,[t("strong",null,"Subjects:")],-1)),l(le,{class:"q-mt-sm"},{default:a(()=>[(r(!0),m(D,null,S(c.value.exam_marks.filter(d=>d.subject.exam_id===s.id),(d,w)=>(r(),P(se,{key:d.id,class:"q-mb-xs"},{default:a(()=>[l(T,null,{default:a(()=>[t("div",null,[t("strong",null,i(d.subject.subject_name),1)]),t("div",Ee,"Exam Date: "+i(d.subject.exam_date),1)]),_:2},1024),l(T,{side:""},{default:a(()=>[t("div",Ie,i(d.marks)+" Marks",1)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))])):N("",!0)]),_:1}),l(Q,null,{default:a(()=>[l(p,{flat:"",label:"Close",onClick:e[5]||(e[5]=s=>_.value=!1),color:"primary"})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(U,{modelValue:v.value,"onUpdate:modelValue":e[9]||(e[9]=s=>v.value=s),persistent:""},{default:a(()=>[l(C,{style:{"min-width":"450px"}},{default:a(()=>[l(f,null,{default:a(()=>[e[25]||(e[25]=t("div",{class:"text-h6 q-mb-md"},"Assign Exam Center to Selected Applicants",-1)),l(j,{modelValue:B(x).exam_center_id,"onUpdate:modelValue":e[7]||(e[7]=s=>B(x).exam_center_id=s),options:y.examCenters,label:"Select Exam Center",dense:"",outlined:"","option-label":"center_name","option-value":"id"},null,8,["modelValue","options"])]),_:1}),l(Q,null,{default:a(()=>[l(p,{flat:"",label:"Cancel",onClick:e[8]||(e[8]=s=>v.value=!1),color:"primary"}),l(p,{flat:"",label:"Assign",onClick:J,color:"primary"})]),_:1})]),_:1})]),_:1},8,["modelValue"])]}),_:1}))}}),Re=oe(Fe,[["__scopeId","data-v-e636778a"]]);export{Re as default};
