import{T as $,r as y,o as S,d as q,w as n,b as s,a as t,Q as d,u as i,m as C,n as f,g as r,c as R,p as z,t as b,F as L,l as O,_ as U,R as k,O as E,q as Q}from"./app-CuzPPIPR.js";import{Q as H,a as D,b as v,c as _}from"./QMarkupTable-D8HQyBiB.js";import{Q as G}from"./QForm-C6yjDqsx.js";import{Q as J}from"./QPage-DmKkAtEF.js";import{C as j}from"./ClosePopup-DrrFzrR1.js";import{A as K}from"./Admin-CW7AyIhf.js";import"./QLayout-UKjsXxgb.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"col-xs-12 col-sm-12"},X={class:"col-xs-12 col-sm-12 q-mb-md"},Y={class:"col-xs-12 col-sm-6"},Z={class:"col-xs-12 col-sm-6"},h={class:"col-xs-12 col-sm-6"},ee={class:"col-xs-12 col-sm-6"},le={class:"col-xs-12"},te={class:"col-xs-12 flex justify-between items-center"},ae={class:"col-xs-12"},se={class:"col-xs-12 col-sm-6"},ue={class:"col-xs-12"},ne={class:"col-xs-12 flex justify-center items-center q-gutter-sm"},oe={class:"flex justify-between items-center"},de={class:"flex q-gutter-sm"},ie={class:"flex justify-between items-center"},me={class:"flex q-gutter-sm"},ke=Object.assign({layout:K},{__name:"Edit",props:{exam:Object},setup(A){const p=A,u=$({exam_name:p.exam.exam_name,exam_date:p.exam.exam_date,description:p.exam.description,pass_mark:p.exam.pass_mark,full_mark:p.exam.full_mark,start_at:p.exam.start_at,end_at:p.exam.end_at,active:!!p.exam.active,subjects:p.exam.subjects.map(a=>({id:a.id,subject_name:a.subject_name,exam_date:a.exam_date,full_mark:a.full_mark,start_time:a.start_time,end_time:a.end_time}))}),x=y(!1),V=y(!1),o=y({id:"",subject_name:"",exam_date:"",full_mark:"",start_time:"",end_time:""}),m=y({id:"",subject_name:"",exam_date:"",full_mark:"",start_time:"",end_time:""});function N(){o.value={subject_name:"",exam_date:"",full_mark:"",start_time:"",end_time:""}}function I(){const a={id:null,subject_name:o.value.subject_name,exam_date:o.value.exam_date,full_mark:o.value.full_mark,start_time:o.value.start_time,end_time:o.value.end_time};u.subjects.push(a),N(),x.value=!1}function F(a){const l=u.subjects[a];m.value={...l},V.value=!0}function P(){const a=u.subjects.findIndex(l=>l.id===m.value.id);a!==-1&&(u.subjects[a]={...m.value},V.value=!1)}function T(a){u.subjects.splice(a,1)}const M=()=>{u.put(route("exams.update",p.exam.id))};function w(a){if(!a)return"";const[l,e]=a.split(":"),c=parseInt(l,10),g=c>=12;return`${c%12||12}:${e} ${g?"PM":"AM"}`}function B(a){if(!a)return"";const l=new Date(a),e={day:"2-digit",month:"long",year:"numeric"};return l.toLocaleDateString("en-IN",e)}return(a,l)=>(S(),q(J,{padding:""},{default:n(()=>[l[31]||(l[31]=s("p",{class:"page-title"},"Edit Examinations",-1)),t(G,{onSubmit:M,onReset:a.reset,class:"row q-col-gutter-sm zcard q-pa-md"},{default:n(()=>[s("div",W,[t(d,{modelValue:i(u).exam_name,"onUpdate:modelValue":l[0]||(l[0]=e=>i(u).exam_name=e),outlined:"",dense:"",class:"my-input",label:"Name of examination",rules:[e=>!!e||"Name is required"]},null,8,["modelValue","rules"])]),s("div",X,[t(d,{modelValue:i(u).description,"onUpdate:modelValue":l[1]||(l[1]=e=>i(u).description=e),type:"textarea",dense:"",outlined:"",class:"my-input",label:"Name of examination"},null,8,["modelValue"])]),s("div",Y,[t(d,{modelValue:i(u).pass_mark,"onUpdate:modelValue":l[2]||(l[2]=e=>i(u).pass_mark=e),outlined:"",dense:"",class:"my-input",label:"Pass mark",rules:[e=>!isNaN(e)||"Invalid format"]},null,8,["modelValue","rules"])]),s("div",Z,[t(d,{modelValue:i(u).full_mark,"onUpdate:modelValue":l[3]||(l[3]=e=>i(u).full_mark=e),outlined:"",dense:"",class:"my-input",label:"Full mark mark",rules:[e=>!isNaN(e)||"Invalid format"]},null,8,["modelValue","rules"])]),s("div",h,[t(d,{modelValue:i(u).start_at,"onUpdate:modelValue":l[4]||(l[4]=e=>i(u).start_at=e),type:"datetime-local",outlined:"",dense:"","stack-label":"",class:"my-input",label:"Start",rules:[e=>!!e||"Invalid Date time"]},null,8,["modelValue","rules"])]),s("div",ee,[t(d,{modelValue:i(u).end_at,"onUpdate:modelValue":l[5]||(l[5]=e=>i(u).end_at=e),type:"datetime-local","stack-label":"",outlined:"",dense:"",class:"my-input",label:"End",rules:[e=>!!e||"Invalid Date time"]},null,8,["modelValue","rules"])]),s("div",le,[t(C)]),s("div",te,[l[20]||(l[20]=s("div",{class:"text-grey-7"},"Click Add button to add paper",-1)),t(f,{onClick:l[6]||(l[6]=e=>x.value=!0),rounded:"",color:"primary",outline:"",label:"Add"})]),s("div",ae,[t(H,{flat:""},{default:n(()=>[t(D,null,{default:n(()=>[t(v,{align:"left",style:{width:"20%"}},{default:n(()=>l[21]||(l[21]=[r("Subject")])),_:1}),t(v,{align:"center",style:{width:"20%"}},{default:n(()=>l[22]||(l[22]=[r("Date")])),_:1}),t(v,{align:"center",style:{width:"15%"}},{default:n(()=>l[23]||(l[23]=[r("Pass Mark")])),_:1}),t(v,{align:"center",style:{width:"15%"}},{default:n(()=>l[24]||(l[24]=[r("Start")])),_:1}),t(v,{align:"center",style:{width:"20%"}},{default:n(()=>l[25]||(l[25]=[r("End")])),_:1}),t(v,{align:"center",style:{width:"10%"}},{default:n(()=>l[26]||(l[26]=[r("Action")])),_:1})]),_:1}),(S(!0),R(L,null,z(i(u).subjects,(e,c)=>(S(),q(D,{key:c},{default:n(()=>[t(_,{align:"left"},{default:n(()=>[r(b(e==null?void 0:e.subject_name),1)]),_:2},1024),t(_,{align:"center"},{default:n(()=>[r(b(B(e==null?void 0:e.exam_date)),1)]),_:2},1024),t(_,{align:"center"},{default:n(()=>[r(b(e==null?void 0:e.full_mark),1)]),_:2},1024),t(_,{align:"center"},{default:n(()=>[r(b(w(e==null?void 0:e.start_time)),1)]),_:2},1024),t(_,{align:"center"},{default:n(()=>[r(b(w(e==null?void 0:e.end_time)),1)]),_:2},1024),t(_,{align:"center"},{default:n(()=>[t(f,{flat:"",icon:"edit",onClick:g=>F(c)},null,8,["onClick"]),t(f,{flat:"",icon:"cancel",onClick:g=>T(c)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),s("div",se,[t(O,{modelValue:i(u).active,"onUpdate:modelValue":l[7]||(l[7]=e=>i(u).active=e),label:"Active"},null,8,["modelValue"])]),s("div",ue,[t(C)]),s("div",ne,[t(f,{type:"reset",label:"Cancel",flat:""}),t(f,{class:"q-px-lg",type:"submit",label:"Save",rounded:"",color:"primary"})])]),_:1},8,["onReset"]),t(Q,{modelValue:x.value,"onUpdate:modelValue":l[13]||(l[13]=e=>x.value=e)},{default:n(()=>[t(U,{class:"q-pa-md"},{default:n(()=>[s("div",oe,[l[27]||(l[27]=s("div",{class:"ztext-lg"},"New Subject",-1)),k(t(E,{name:"cancel",class:"cursor-pointer"},null,512),[[j]])]),l[28]||(l[28]=s("br",null,null,-1)),t(d,{modelValue:o.value.subject_name,"onUpdate:modelValue":l[8]||(l[8]=e=>o.value.subject_name=e),outlined:"",class:"my-input",rules:[e=>!!e||"Name is required"],label:"Paper Name"},null,8,["modelValue","rules"]),t(d,{modelValue:o.value.exam_date,"onUpdate:modelValue":l[9]||(l[9]=e=>o.value.exam_date=e),outlined:"",class:"my-input",rules:[e=>!!e||"Exam Date is required"],type:"date",label:"Date of Exam"},null,8,["modelValue","rules"]),t(d,{modelValue:o.value.full_mark,"onUpdate:modelValue":l[10]||(l[10]=e=>o.value.full_mark=e),outlined:"",dense:"",class:"my-input",label:"Full Mark",rules:[e=>!isNaN(e)||"Invalid format"]},null,8,["modelValue","rules"]),t(d,{modelValue:o.value.start_time,"onUpdate:modelValue":l[11]||(l[11]=e=>o.value.start_time=e),outlined:"",type:"time",class:"my-input",rules:[e=>!!e||"Start time is required"],label:"Start At"},null,8,["modelValue","rules"]),t(d,{modelValue:o.value.end_time,"onUpdate:modelValue":l[12]||(l[12]=e=>o.value.end_time=e),outlined:"",type:"time",class:"my-input",rules:[e=>!!e||"End tim is required"],label:"End At"},null,8,["modelValue","rules"]),s("div",de,[t(f,{type:"submit",style:{"min-width":"90px"},rounded:"",color:"primary",onClick:I,label:"Add"}),k(t(f,{rounded:"",color:"negative",outline:"",label:"Reset",onClick:N},null,512),[[j]])])]),_:1})]),_:1},8,["modelValue"]),t(Q,{modelValue:V.value,"onUpdate:modelValue":l[19]||(l[19]=e=>V.value=e)},{default:n(()=>[t(U,{class:"q-pa-md"},{default:n(()=>[s("div",ie,[l[29]||(l[29]=s("div",{class:"ztext-lg"},"Edit Subject",-1)),k(t(E,{name:"cancel",class:"cursor-pointer"},null,512),[[j]])]),l[30]||(l[30]=s("br",null,null,-1)),t(d,{modelValue:m.value.subject_name,"onUpdate:modelValue":l[14]||(l[14]=e=>m.value.subject_name=e),outlined:"",class:"my-input",rules:[e=>!!e||"Name is required"],label:"Paper Name"},null,8,["modelValue","rules"]),t(d,{modelValue:m.value.exam_date,"onUpdate:modelValue":l[15]||(l[15]=e=>m.value.exam_date=e),outlined:"",class:"my-input",rules:[e=>!!e||"Exam Date is required"],type:"date",label:"Date of Exam"},null,8,["modelValue","rules"]),t(d,{modelValue:m.value.full_mark,"onUpdate:modelValue":l[16]||(l[16]=e=>m.value.full_mark=e),outlined:"",dense:"",class:"my-input",label:"Full Mark",rules:[e=>!isNaN(e)||"Invalid format"]},null,8,["modelValue","rules"]),t(d,{modelValue:m.value.start_time,"onUpdate:modelValue":l[17]||(l[17]=e=>m.value.start_time=e),outlined:"",type:"time",class:"my-input",rules:[e=>!!e||"Start time is required"],label:"Start At"},null,8,["modelValue","rules"]),t(d,{modelValue:m.value.end_time,"onUpdate:modelValue":l[18]||(l[18]=e=>m.value.end_time=e),outlined:"",type:"time",class:"my-input",rules:[e=>!!e||"End time is required"],label:"End At"},null,8,["modelValue","rules"]),s("div",me,[t(f,{type:"submit",style:{"min-width":"90px"},rounded:"",color:"primary",onClick:P,label:"Save Changes"}),k(t(f,{rounded:"",color:"negative",outline:"",label:"Cancel",onClick:a.resetEditSubjectForm},null,8,["onClick"]),[[j]])])]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{ke as default};
