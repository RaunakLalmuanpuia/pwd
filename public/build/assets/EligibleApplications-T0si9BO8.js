import{T as O,r as v,c as D,o as r,i as V,e as a,b as e,d as s,n as $,Q as z,h as g,j as M,ac as w,ad as c,ae as q,t as n,a as u,l as A,p as R,af as G,aa as J,F as Q,k as S,a5 as E,K}from"./app-Aoxauc37.js";import{Q as I}from"./QSelect-Cmqjne4n.js";import{Q as H}from"./QBtnDropdown-C2bXYpYy.js";import{Q as N}from"./QBanner-C_J2Btxq.js";import{Q as W,c as X,a as L}from"./QLayout-Bk4bdxax.js";import{Q as Y}from"./QPage-D0hqg7TJ.js";import{A as Z}from"./Admin-eIZS02AA.js";import{_ as tt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QMenu-DKNhoKWU.js";const et={class:"flex justify-between items-center zcard q-pa-md"},lt={class:"flex items-center q-gutter-md"},st={class:"row q-mt-sm"},at={class:"page-title"},ot={class:"col-xs-12"},nt={class:"table-auto border-collapse border border-gray-300 w-full mt-6 text-sm"},it={class:"bg-gray-100"},dt={class:"px-4 py-2 text-left text-gray-600"},rt=["checked"],ut={class:"px-4 py-2"},pt=["value"],mt={class:"px-4 py-2"},ct={class:"px-4 py-2"},xt={class:"px-4 py-2"},bt={class:"px-4 py-2"},ft={class:"px-4 py-2"},vt={class:"px-4 py-2"},gt={class:"px-4 py-2"},yt=["onClick"],_t={class:"px-4 py-2"},kt=["onClick"],ht={class:"text-h6 q-mb-md"},Ct={key:0},wt={key:1},At={class:"q-pa-sm"},Qt={class:"text-caption"},Nt={class:"text-h6"},jt=Object.assign({layout:Z},{__name:"EligibleApplications",props:["jobDetails"],setup(y){const P=y,x=O({application_ids:[],status:""}),b=v(!1),p=v(null),i=v([]),B=D(()=>f.value.length>0&&f.value.every(o=>i.value.includes(o.id))),F=o=>{o.target.checked?i.value=f.value.map(t=>t.id):i.value=[]},_=v(""),f=D(()=>P.jobDetails.applications.filter(o=>{var m;return(((m=o.applicant.user)==null?void 0:m.name.toLowerCase())||"").includes(_.value.toLowerCase())})),T=o=>{p.value=o.applicant,b.value=!0},U=()=>{if(i.value.length===0){alert("Please select at least one applicant.");return}x.application_ids=i.value,x.status="approved",x.put(route("admin.applications.bulkChangeStatus"),{onSuccess:()=>{x.reset(),i.value=[]}})};return(o,t)=>(r(),V(Y,{padding:""},{default:a(()=>{var m;return[t[22]||(t[22]=e("p",{class:"page-title"},"ELIGIBLE APPLICATIONS",-1)),e("div",et,[s(z,{modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=l=>_.value=l),dense:"",outlined:"",placeholder:"Search",style:{width:"240px"},onChange:o.handleSearch},{append:a(()=>[s($,{name:"search"})]),_:1},8,["modelValue","onChange"]),e("div",lt,[s(g,{onClick:U,color:"primary",disabled:i.value.length===0,label:"Mark as Not Eligible"},null,8,["disabled"]),s(M,{vertical:""}),s(H,{class:"q-ma-xs q-pa-xs",color:"primary",flat:"","dropdown-icon":"sort"},{default:a(()=>[s(w,{class:"q-pa-sm",style:{"min-width":"280px"}},{default:a(()=>[s(c,null,{default:a(()=>t[7]||(t[7]=[e("p",{class:"q-ma-none ztext-lg"},"Filter",-1)])),_:1}),s(c,null,{default:a(()=>[s(I,{modelValue:o.filterData.job,"onUpdate:modelValue":t[1]||(t[1]=l=>o.filterData.job=l),options:o.jobs,class:"my-input",dense:"",label:"Job",outlined:""},null,8,["modelValue","options"])]),_:1}),s(c,null,{default:a(()=>[s(I,{modelValue:o.filterData.district,"onUpdate:modelValue":t[2]||(t[2]=l=>o.filterData.district=l),options:o.districts,class:"my-input",dense:"",label:"District",outlined:""},null,8,["modelValue","options"])]),_:1}),s(q,null,{default:a(()=>[s(g,{flat:"",label:"Reset",onClick:o.resetFilter},null,8,["onClick"]),s(g,{color:"primary",label:"Filter",rounded:"",style:{"min-width":"100px"},onClick:o.doFilter},null,8,["onClick"])]),_:1})]),_:1})]),_:1})])]),e("div",st,[e("p",at,"APPLICATIONS: "+n((m=y.jobDetails)==null?void 0:m.post_name),1),e("div",ot,[e("table",nt,[e("thead",it,[e("tr",null,[e("th",dt,[e("input",{type:"checkbox",onChange:t[3]||(t[3]=l=>F(l)),checked:B.value},null,40,rt)]),t[8]||(t[8]=e("th",{class:"px-4 py-2 text-left text-gray-600"},"Applicant Name",-1)),t[9]||(t[9]=e("th",{class:"px-4 py-2 text-left text-gray-600"},"Roll No",-1)),t[10]||(t[10]=e("th",{class:"px-4 py-2 text-left text-gray-600"},"Parent Name",-1)),t[11]||(t[11]=e("th",{class:"px-4 py-2 text-left text-gray-600"},"Community",-1)),t[12]||(t[12]=e("th",{class:"px-4 py-2 text-left text-gray-600"},"Exam Center",-1)),t[13]||(t[13]=e("th",{class:"px-4 py-2 text-left text-gray-600"},"Status",-1)),t[14]||(t[14]=e("th",{class:"px-4 py-2 text-left text-gray-600"},"Actions",-1)),t[15]||(t[15]=e("th",{class:"px-4 py-2 text-left text-gray-600"},"Marks",-1))])]),e("tbody",null,[(r(!0),u(Q,null,A(f.value,l=>{var k,d,h,j;return r(),u("tr",{key:l.id,class:"hover:bg-gray-50 transition duration-150"},[e("td",ut,[R(e("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=C=>i.value=C),value:l.id},null,8,pt),[[G,i.value]])]),e("td",mt,n(((k=l.applicant.user)==null?void 0:k.name)||"N/A"),1),e("td",ct,n(l.application_id||"N/A"),1),e("td",xt,n(((d=l.applicant)==null?void 0:d.parents_name)||"N/A"),1),e("td",bt,n(((h=l.applicant)==null?void 0:h.community)||"N/A"),1),e("td",ft,n(((j=l.exam_center)==null?void 0:j.center_name)||"N/A"),1),e("td",vt,[e("span",{class:J(["px-2 py-1 rounded-full text-xs font-semibold",l.status==="approved"?"bg-green-100 text-green-800":l.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"])},n(l.status||"Pending"),3)]),e("td",gt,[e("button",{onClick:C=>o.$inertia.get(o.route("admin.application.show_applicant_detail",{jobDetails:y.jobDetails.id,application:l.id})),class:"bg-blue-500 hover:bg-blue-700 text-white py-1 px-4 rounded mr-2 transition duration-150"}," Preview ",8,yt)]),e("td",_t,[e("button",{onClick:C=>T(l),class:"bg-blue-500 hover:bg-blue-700 text-white py-1 px-4 rounded mr-2 transition duration-150"}," View Marks ",8,kt)])])}),128))])])])]),s(K,{modelValue:b.value,"onUpdate:modelValue":t[6]||(t[6]=l=>b.value=l),persistent:""},{default:a(()=>[s(w,{style:{"min-width":"450px"}},{default:a(()=>[s(c,null,{default:a(()=>[e("div",ht,"Exam Details: "+n(p.value.user.name),1),p.value.exams.length===0?(r(),u("div",Ct,[s(N,{class:"bg-warning text-black q-mb-md"},{default:a(()=>t[16]||(t[16]=[e("div",null,"No exams found for this applicant.",-1)])),_:1})])):S("",!0),p.value.exam_marks.length===0?(r(),u("div",wt,[s(N,{class:"bg-warning text-black q-mb-md"},{default:a(()=>t[17]||(t[17]=[e("div",null,"No marks assigned for the selected exams.",-1)])),_:1})])):S("",!0),(r(!0),u(Q,null,A(p.value.exams,(l,k)=>(r(),u("div",{key:l.id,class:"q-mt-md"},[e("div",At,[s(N,{class:"bg-primary text-white q-mb-md"},{default:a(()=>[e("div",null,[t[18]||(t[18]=e("strong",null,"Exam Name:",-1)),E(" "+n(l.exam_name)+" ",1),t[19]||(t[19]=e("br",null,null,-1)),t[20]||(t[20]=e("strong",null,"Exam Date:",-1)),E(" "+n(l.exam_date),1)])]),_:2},1024),s(w,{bordered:"",class:"q-pa-none"},{default:a(()=>[s(c,null,{default:a(()=>[t[21]||(t[21]=e("div",null,[e("strong",null,"Subjects:")],-1)),s(W,{class:"q-mt-sm"},{default:a(()=>[(r(!0),u(Q,null,A(p.value.exam_marks.filter(d=>d.subject.exam_id===l.id),(d,h)=>(r(),V(X,{key:d.id,class:"q-mb-xs"},{default:a(()=>[s(L,null,{default:a(()=>[e("div",null,[e("strong",null,n(d.subject.subject_name),1)]),e("div",Qt,"Exam Date: "+n(d.subject.exam_date),1)]),_:2},1024),s(L,{side:""},{default:a(()=>[e("div",Nt,n(d.marks)+" Marks",1)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))]),_:1}),s(q,null,{default:a(()=>[s(g,{flat:"",label:"Close",onClick:t[5]||(t[5]=l=>b.value=!1),color:"primary"})]),_:1})]),_:1})]),_:1},8,["modelValue"])]}),_:1}))}}),Ft=tt(jt,[["__scopeId","data-v-06e533fd"]]);export{Ft as default};
