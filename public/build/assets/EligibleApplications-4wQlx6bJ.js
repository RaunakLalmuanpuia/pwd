import{r as m,T as H,w as B,c as W,o as p,i as F,e as o,b as t,d as a,n as X,Q as Z,h as k,j as ee,ad as A,ae as b,af as L,t as n,a as c,l as Q,p as te,ag as le,aa as ae,F as V,k as O,a5 as U,K as se,ah as oe}from"./app-DSYfDdqw.js";import{Q as j}from"./QSelect-CGnkjiYc.js";import{Q as ne}from"./QBtnDropdown-BjIFFcsP.js";import{Q as D}from"./QBanner-CwHHLxGd.js";import{Q as ie,c as de,a as R}from"./QLayout-7-8-rmqj.js";import{Q as re}from"./QPage-C3RQND_T.js";import{A as ue}from"./Admin-QNVA5adm.js";import{u as pe}from"./use-quasar-D558u8MW.js";import{_ as me}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QMenu-BcxSPqyz.js";const ce={class:"flex justify-between items-center zcard q-pa-md"},ge={class:"flex items-center q-gutter-md"},ve={class:"row q-mt-sm"},xe={class:"page-title"},be={class:"col-xs-12"},fe={class:"border-collapse border border-gray-300 w-full mt-4"},ye={class:"bg-gray-100"},_e={class:"px-4 py-2 text-left text-gray-600"},ke=["checked"],he={class:"px-4 py-2"},we=["value"],Ce={class:"px-4 py-2"},Pe={class:"px-4 py-2"},Ae={class:"px-4 py-2"},Qe={class:"px-4 py-2"},Ve={class:"px-4 py-2"},je={class:"px-4 py-2"},De={class:"px-4 py-2"},Ne=["onClick"],Se={class:"px-4 py-2"},qe=["onClick"],Ie={class:"flex justify-between items-center mt-4"},Ee=["disabled"],Be=["disabled"],Fe={class:"text-h6 q-mb-md"},Le={key:0},Oe={key:1},Ue={class:"q-pa-sm"},Re={class:"text-caption"},Te={class:"text-h6"},$e=Object.assign({layout:ue},{__name:"EligibleApplications",props:["jobDetails","applications"],setup(h){const N=pe(),T=h,f=m(""),r=m({data:[],last_page:1}),i=m({page:1,rowsPerPage:10}),S=m(!1),q=[10,20,50,100];i.value.rowsPerPage=q[0];const $=()=>{i.value.page=1,g()},y=H({application_ids:[],status:""}),g=()=>{S.value=!0;const s={page:i.value.page,per_page:i.value.rowsPerPage,search:f.value};oe.get(route("admin.applications.show_eligible",{jobDetails:T.jobDetails.id}),s,{preserveState:!0,preserveScroll:!0,onSuccess:({props:e})=>{r.value=e.applications,S.value=!1}})},z=()=>{i.value.page<r.value.last_page&&(i.value.page++,g())},M=()=>{i.value.page>1&&(i.value.page--,g())};B([i,f],g,{immediate:!0});const G=s=>({"bg-green-100 text-green-800":s==="approved","bg-red-100 text-red-800":s==="rejected","bg-yellow-100 text-yellow-800":s==="pending"}),_=m(!1),v=m(null),d=m([]),J=W({get:()=>r.value.data.length>0&&d.value.length===r.value.data.length,set:s=>I(s)});function I(s){d.value=s?r.value.data.map(e=>e.id):[]}B(()=>r.value.data,()=>{d.value=[]});const K=s=>{v.value=s.applicant,_.value=!0},Y=()=>{var s;if(d.value.length===0){alert("Please select at least one applicant.");return}y.application_ids=d.value,y.status="approved",N.dialog({title:"Confirmation",message:"Do you want to proceed with "+((s=d.value)==null?void 0:s.length)+" Applications",ok:"Yes",cancel:"No"}).onOk(()=>{y.put(route("admin.applications.bulkChangeStatus"),{onSuccess:()=>{var x;const e=((x=d.value)==null?void 0:x.length)+" Applications marked as not eligible";N.notify({type:"positive",message:e}),y.reset(),d.value=[],g()}})})};return(s,e)=>(p(),F(re,{padding:""},{default:o(()=>{var x;return[e[23]||(e[23]=t("p",{class:"page-title"},"ELIGIBLE APPLICATIONS",-1)),t("div",ce,[a(Z,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=l=>f.value=l),dense:"",outlined:"",placeholder:"Search",style:{width:"240px"},onInput:g},{append:o(()=>[a(X,{name:"search"})]),_:1},8,["modelValue"]),t("div",ge,[a(k,{onClick:Y,color:"primary",disabled:d.value.length===0,label:"Mark as Not Eligible"},null,8,["disabled"]),a(ee,{vertical:""}),a(ne,{class:"q-ma-xs q-pa-xs",color:"primary",flat:"","dropdown-icon":"sort"},{default:o(()=>[a(A,{class:"q-pa-sm",style:{"min-width":"280px"}},{default:o(()=>[a(b,null,{default:o(()=>e[8]||(e[8]=[t("p",{class:"q-ma-none ztext-lg"},"Filter",-1)])),_:1}),a(b,null,{default:o(()=>[a(j,{modelValue:s.filterData.job,"onUpdate:modelValue":e[1]||(e[1]=l=>s.filterData.job=l),options:s.jobs,class:"my-input",dense:"",label:"Job",outlined:""},null,8,["modelValue","options"])]),_:1}),a(b,null,{default:o(()=>[a(j,{modelValue:s.filterData.district,"onUpdate:modelValue":e[2]||(e[2]=l=>s.filterData.district=l),options:s.districts,class:"my-input",dense:"",label:"District",outlined:""},null,8,["modelValue","options"])]),_:1}),a(L,null,{default:o(()=>[a(k,{flat:"",label:"Reset",onClick:s.resetFilter},null,8,["onClick"]),a(k,{color:"primary",label:"Filter",rounded:"",style:{"min-width":"100px"},onClick:s.doFilter},null,8,["onClick"])]),_:1})]),_:1})]),_:1})])]),t("div",ve,[t("p",xe,"APPLICATIONS: "+n((x=h.jobDetails)==null?void 0:x.post_name),1),t("div",be,[t("table",fe,[t("thead",ye,[t("tr",null,[t("th",_e,[t("input",{type:"checkbox",onChange:e[3]||(e[3]=l=>I(l.target.checked)),checked:J.value},null,40,ke)]),e[9]||(e[9]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Applicant Name",-1)),e[10]||(e[10]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Roll No",-1)),e[11]||(e[11]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Parent Name",-1)),e[12]||(e[12]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Community",-1)),e[13]||(e[13]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Exam Center",-1)),e[14]||(e[14]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Status",-1)),e[15]||(e[15]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Actions",-1)),e[16]||(e[16]=t("th",{class:"px-4 py-2 text-left text-gray-600"},"Marks",-1))])]),t("tbody",null,[(p(!0),c(V,null,Q(r.value.data,l=>{var w,u,C,E;return p(),c("tr",{key:l.id,class:"hover:bg-gray-50"},[t("td",he,[te(t("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=P=>d.value=P),value:l.id},null,8,we),[[le,d.value]])]),t("td",Ce,n(((w=l.applicant.user)==null?void 0:w.name)||"N/A"),1),t("td",Pe,n(l.application_id||"N/A"),1),t("td",Ae,n(((u=l.applicant)==null?void 0:u.parents_name)||"N/A"),1),t("td",Qe,n(((C=l.applicant)==null?void 0:C.community)||"N/A"),1),t("td",Ve,n(((E=l.exam_center)==null?void 0:E.center_name)||"N/A"),1),t("td",je,[t("span",{class:ae(G(l.status))},n(l.status||"Pending"),3)]),t("td",De,[t("button",{onClick:P=>s.$inertia.get(s.route("admin.application.show_applicant_detail",{jobDetails:h.jobDetails.id,application:l.id})),class:"bg-blue-500 text-white py-1 px-4 rounded"}," Preview ",8,Ne)]),t("td",Se,[t("button",{onClick:P=>K(l),class:"bg-blue-500 text-white py-1 px-4 rounded"}," View Marks ",8,qe)])])}),128))])]),t("div",Ie,[a(j,{modelValue:i.value.rowsPerPage,"onUpdate:modelValue":[e[5]||(e[5]=l=>i.value.rowsPerPage=l),$],options:q,label:"Rows per page",dense:"",outlined:"",style:{width:"120px"}},null,8,["modelValue"]),t("div",null,[t("button",{onClick:M,disabled:i.value.page===1,class:"bg-gray-200 text-black py-1 px-4 rounded"}," Previous ",8,Ee),t("span",null,"Page "+n(i.value.page)+" of "+n(r.value.last_page),1),t("button",{onClick:z,disabled:i.value.page===r.value.last_page,class:"bg-gray-200 text-black py-1 px-4 rounded"}," Next ",8,Be)])])])]),a(se,{modelValue:_.value,"onUpdate:modelValue":e[7]||(e[7]=l=>_.value=l),persistent:""},{default:o(()=>[a(A,{style:{"min-width":"450px"}},{default:o(()=>[a(b,null,{default:o(()=>[t("div",Fe,"Exam Details: "+n(v.value.user.name),1),v.value.exams.length===0?(p(),c("div",Le,[a(D,{class:"bg-warning text-black q-mb-md"},{default:o(()=>e[17]||(e[17]=[t("div",null,"No exams found for this applicant.",-1)])),_:1})])):O("",!0),v.value.exam_marks.length===0?(p(),c("div",Oe,[a(D,{class:"bg-warning text-black q-mb-md"},{default:o(()=>e[18]||(e[18]=[t("div",null,"No marks assigned for the selected exams.",-1)])),_:1})])):O("",!0),(p(!0),c(V,null,Q(v.value.exams,(l,w)=>(p(),c("div",{key:l.id,class:"q-mt-md"},[t("div",Ue,[a(D,{class:"bg-primary text-white q-mb-md"},{default:o(()=>[t("div",null,[e[19]||(e[19]=t("strong",null,"Exam Name:",-1)),U(" "+n(l.exam_name)+" ",1),e[20]||(e[20]=t("br",null,null,-1)),e[21]||(e[21]=t("strong",null,"Exam Date:",-1)),U(" "+n(l.exam_date),1)])]),_:2},1024),a(A,{bordered:"",class:"q-pa-none"},{default:o(()=>[a(b,null,{default:o(()=>[e[22]||(e[22]=t("div",null,[t("strong",null,"Subjects:")],-1)),a(ie,{class:"q-mt-sm"},{default:o(()=>[(p(!0),c(V,null,Q(v.value.exam_marks.filter(u=>u.subject.exam_id===l.id),(u,C)=>(p(),F(de,{key:u.id,class:"q-mb-xs"},{default:o(()=>[a(R,null,{default:o(()=>[t("div",null,[t("strong",null,n(u.subject.subject_name),1)]),t("div",Re,"Exam Date: "+n(u.subject.exam_date),1)]),_:2},1024),a(R,{side:""},{default:o(()=>[t("div",Te,n(u.marks)+" Marks",1)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))]),_:1}),a(L,null,{default:o(()=>[a(k,{flat:"",label:"Close",onClick:e[6]||(e[6]=l=>_.value=!1),color:"primary"})]),_:1})]),_:1})]),_:1},8,["modelValue"])]}),_:1}))}}),et=me($e,[["__scopeId","data-v-bc69a1ca"]]);export{et as default};
