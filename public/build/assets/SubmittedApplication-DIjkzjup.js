import{Q as j}from"./QSpace-B9bq5LZ2.js";import{T as N,U as q,r as V,c as F,o as b,j as I,e as d,b as e,d as s,Q as U,V as B,L as T,i as u,h as $,X as O,Y as f,_ as L,t as p,a as P,l as R,O as z,$ as E,R as M,F as Y,W as y}from"./app-CBxBqPrd.js";import{Q as K}from"./QTabs-BnRN_Xtd.js";import{Q as x}from"./QSelect-BTg3Lz1e.js";import{Q as J}from"./QBtnDropdown-CYiiFYoH.js";import{Q as W}from"./QPage-DL2ugT8Z.js";import{A as X}from"./Admin-B0jRLtRZ.js";import{u as G}from"./use-quasar-DrUIM-jD.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QLayout-CSUJ40El.js";import"./rtl-DFPa-2ov.js";import"./QChip-B_4bSyla.js";import"./QMenu-D6F7Abx1.js";const Z={class:"flex justify-between items-center zcard q-pa-md"},tt={class:"flex items-center q-gutter-md"},et={class:"row q-mt-sm"},at={class:"page-title"},lt={class:"col-xs-12"},st={class:"table-auto border-collapse border border-gray-300 w-full mt-6 text-sm"},ot={class:"bg-gray-100"},it={class:"px-4 py-2 text-left text-gray-600"},nt=["checked"],rt={class:"px-4 py-2"},dt=["value"],pt={class:"px-4 py-2"},ut={class:"px-4 py-2"},ct={class:"px-4 py-2"},mt={class:"px-4 py-2"},gt={class:"px-4 py-2"},bt={class:"px-4 py-2"},ft=["onClick"],yt={class:"flex justify-between items-center mt-4"},xt={class:"flex items-center q-gutter-sm"},vt={class:"text-gray-600"},ht=Object.assign({layout:X},{__name:"SubmittedApplication",props:["jobDetails","applications","search","perPage"],setup(o){const v=G(),i=o,m=N({application_ids:[],status:""}),n=q({search:i==null?void 0:i.search,tab:route().current(),perPage:(i==null?void 0:i.perPage)||1});V("");const h=l=>{y.get(route("admin.applications.show_submission",i.jobDetails.id),{search:n.search,perPage:n.perPage})},S=l=>{y.get(route(l))},g=l=>{l&&y.get(l,{search:n.search,perPage:n.perPage})},r=V([]),D=F({get:()=>i.applications.data.length>0&&r.value.length===i.applications.data.length,set:l=>k(l)});function k(l){r.value=l?i.applications.data.map(t=>t.id):[]}const _=()=>{var l;m.application_ids=r.value,m.status="approved",v.dialog({title:"Confirmation",message:"Do you want to proceed with "+((l=r.value)==null?void 0:l.length)+" Applications",ok:"Yes",cancel:"No"}).onOk(()=>{m.put(route("admin.applications.bulkChangeStatus"),{onSuccess:()=>{var c;const t=((c=r.value)==null?void 0:c.length)+" Applications marked as Qualified";v.notify({type:"positive",message:t}),m.reset(),r.value=[]}})})};return(l,t)=>(b(),I(W,{padding:""},{default:d(()=>{var c;return[t[18]||(t[18]=e("p",{class:"page-title"},"SUBMITTED APPLICATIONS",-1)),e("div",Z,[s(K,{stretch:"",shrink:"",modelValue:n.tab,"onUpdate:modelValue":[t[1]||(t[1]=a=>n.tab=a),S],align:"start"},{default:d(()=>[s(j),s(U,{modelValue:n.search,"onUpdate:modelValue":t[0]||(t[0]=a=>n.search=a),autofocus:"",outlined:"",dense:"",onKeyup:B(h,["enter"]),"bg-color":"white",placeholder:"Search"},{append:d(()=>[s(T,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),e("div",tt,[s(u,{onClick:_,color:"primary",disabled:r.value.length===0,label:"Mark as Qualified"},null,8,["disabled"]),s($,{vertical:""}),s(J,{class:"q-ma-xs q-pa-xs",color:"primary",flat:"","dropdown-icon":"sort"},{default:d(()=>[s(O,{class:"q-pa-sm",style:{"min-width":"280px"}},{default:d(()=>[s(f,null,{default:d(()=>t[11]||(t[11]=[e("p",{class:"q-ma-none ztext-lg"},"Filter",-1)])),_:1}),s(f,null,{default:d(()=>[s(x,{modelValue:l.filterData.job,"onUpdate:modelValue":t[2]||(t[2]=a=>l.filterData.job=a),options:l.jobs,class:"my-input",dense:"",label:"Job",outlined:""},null,8,["modelValue","options"])]),_:1}),s(f,null,{default:d(()=>[s(x,{modelValue:l.filterData.district,"onUpdate:modelValue":t[3]||(t[3]=a=>l.filterData.district=a),options:l.districts,class:"my-input",dense:"",label:"District",outlined:""},null,8,["modelValue","options"])]),_:1}),s(L,null,{default:d(()=>[s(u,{flat:"",label:"Reset",onClick:l.resetFilter},null,8,["onClick"]),s(u,{color:"primary",label:"Filter",rounded:"",style:{"min-width":"100px"},onClick:l.doFilter},null,8,["onClick"])]),_:1})]),_:1})]),_:1})])]),e("div",et,[e("p",at,p((c=o.jobDetails)==null?void 0:c.post_name)+" : APPLICATIONS",1),e("div",lt,[e("table",st,[e("thead",ot,[e("tr",null,[e("th",it,[e("input",{type:"checkbox",onChange:t[4]||(t[4]=a=>k(a.target.checked)),checked:D.value},null,40,nt)]),t[12]||(t[12]=e("th",{class:"px-4 py-2 text-left text-gray-600"},"Applicant Name",-1)),t[13]||(t[13]=e("th",{class:"px-4 py-2 text-left text-gray-600"},"Roll No",-1)),t[14]||(t[14]=e("th",{class:"px-4 py-2 text-left text-gray-600"},"Community",-1)),t[15]||(t[15]=e("th",{class:"px-4 py-2 text-left text-gray-600"},"Disability",-1)),t[16]||(t[16]=e("th",{class:"px-4 py-2 text-left text-gray-600"},"Status",-1)),t[17]||(t[17]=e("th",{class:"px-4 py-2 text-left text-gray-600"},"Actions",-1))])]),e("tbody",null,[(b(!0),P(Y,null,R(o.applications.data,a=>{var C,Q,w;return b(),P("tr",{key:a.id,class:"hover:bg-gray-50 transition duration-150"},[e("td",rt,[z(e("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=A=>r.value=A),value:a.id},null,8,dt),[[E,r.value]])]),e("td",pt,p(((C=a.applicant.user)==null?void 0:C.name)||"N/A"),1),e("td",ut,p(a.application_id||"N/A"),1),e("td",ct,p(((Q=a.applicant)==null?void 0:Q.community)||"N/A"),1),e("td",mt,p((w=a.applicant)!=null&&w.disability?"Yes":"No"),1),e("td",gt,[e("span",{class:M(["px-2 py-1 rounded-full text-xs font-semibold",a.status==="approved"?"bg-green-100 text-green-800":a.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"])},p(a.status||"Pending"),3)]),e("td",bt,[e("button",{onClick:A=>l.$inertia.get(l.route("admin.application.show_applicant_detail",{jobDetails:o.jobDetails.id,application:a.id})),class:"bg-blue-500 hover:bg-blue-700 text-white py-1 px-4 rounded mr-2 transition duration-150"}," OPEN ",8,ft)])])}),128))])]),e("div",yt,[s(x,{modelValue:n.perPage,"onUpdate:modelValue":[t[6]||(t[6]=a=>n.perPage=a),h],dense:"",outlined:"",options:[5,10,20,25],label:"Results per page",style:{width:"150px"}},null,8,["modelValue"]),e("div",xt,[s(u,{disable:o.applications.current_page===1,onClick:t[7]||(t[7]=a=>g(o.applications.first_page_url)),flat:"",round:"",icon:"first_page"},null,8,["disable"]),s(u,{disable:!o.applications.prev_page_url,onClick:t[8]||(t[8]=a=>g(o.applications.prev_page_url)),flat:"",round:"",icon:"chevron_left"},null,8,["disable"]),e("span",vt," Page "+p(o.applications.current_page)+" of "+p(o.applications.last_page),1),s(u,{disable:!o.applications.next_page_url,onClick:t[9]||(t[9]=a=>g(o.applications.next_page_url)),flat:"",round:"",icon:"chevron_right"},null,8,["disable"]),s(u,{disable:o.applications.current_page===o.applications.last_page,onClick:t[10]||(t[10]=a=>g(o.applications.last_page_url)),flat:"",round:"",icon:"last_page"},null,8,["disable"])])])])])]}),_:1}))}}),Ft=H(ht,[["__scopeId","data-v-27325e15"]]);export{Ft as default};
