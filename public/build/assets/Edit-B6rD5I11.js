import{Q as ye}from"./QSpace-DTrDJuzj.js";import{Q as me,a as be}from"./QBreadcrumbs-mQbjbDk_.js";import{S as Ve,T as ve,r as xe,o as _,d as we,w as p,b as l,a as t,Q as n,u as o,m as c,c as ue,p as Se,W as f,X as pe,bo as qe,n as g,F as Ue,g as Be,P as ge,a0 as Pe}from"./app-Cd5YZrNO.js";import{Q as y}from"./QSelect-B2_vyOVG.js";import{Q as Qe}from"./QForm-BGYnrCnq.js";import{Q as Oe}from"./QPage-CV7yxS4Y.js";import{A as De}from"./Admin-BFqidMhZ.js";import{u as $e}from"./use-quasar-CCFMcgmy.js";import"./QChip-D1sw4eZt.js";import"./QLayout-CfpDi0SV.js";import"./QMenu-C5Tigr11.js";import"./rtl-DFPa-2ov.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Ce={class:"flex flex-inline items-center"},Ae={class:"row q-col-gutter-sm"},Ne={class:"col-xs-12"},ke={class:"col-xs-12"},Fe={class:"col-xs-12"},Le={class:"col-xs-12"},Re={class:"col-xs-12"},je={class:"col-xs-12"},Ee={class:"col-xs-12"},Ge={class:"col-xs-12"},Te={class:"col-xs-12"},Me={class:"col-xs-12"},Je={class:"col-xs-12"},ze={class:"col-xs-12"},He={class:"col-xs-12"},Ie={class:"col-xs-12"},We={class:"col-xs-12"},Xe=["onUpdate:modelValue"],Ke=["onUpdate:modelValue"],Ye=["onUpdate:modelValue"],Ze={class:"col-xs-12"},he={class:"col-xs-12"},er={class:"col-xs-12"},rr={class:"col-xs-12"},cr=Object.assign({layout:De},{__name:"Edit",props:["data","current_department","departments"],setup(b){var v,x,w,S,q,U,B,P,Q,O,D,$,C,A,N,k;const V=$e(),a=b;Ve({submitting:!1});const e=ve({post_name:(v=a.data)==null?void 0:v.post_name,code:(x=a.data)==null?void 0:x.code,category:(w=a.data)==null?void 0:w.category,departments:(S=a==null?void 0:a.current_department)==null?void 0:S.name,no_of_post:(q=a.data)==null?void 0:q.no_of_post,salary:(U=a.data)==null?void 0:U.salary,upper_age_limit:(B=a.data)==null?void 0:B.upper_age_limit,lower_age_limit:(P=a.data)==null?void 0:P.lower_age_limit,age_relaxation:(Q=a.data)==null?void 0:Q.age_relaxation,application_fee_general:(O=a.data)==null?void 0:O.application_fee_general,application_fee_other:(D=a.data)==null?void 0:D.application_fee_other,qualification:($=a.data)==null?void 0:$.qualification,application_deadline:(C=a.data)==null?void 0:C.application_deadline,active:(A=a.data)==null?void 0:A.active,description:(N=a.data)==null?void 0:N.description,documents:((k=a.data)==null?void 0:k.documents.map(i=>({id:i.id,job_detail_id:i.job_detail_id,name:i.document_name,description:i.document_description,is_mandatory:i.is_mandatory})))||[]});console.log(e.documents),xe({});const _e=()=>{e.documents.push({name:"",description:"",is_mandatory:1})},ce=i=>{e.documents.splice(i,1)},fe=i=>{var s;e.transform(d=>{var u;return{department_id:((u=d==null?void 0:d.departments)==null?void 0:u.value)||null,...d}}).put(route("job.update",(s=a.data)==null?void 0:s.id),{onStart:d=>V.loading.show({message:"Updating..."}),onFinish:d=>V.loading.hide()})};return(i,s)=>(_(),we(Oe,{padding:""},{default:p(()=>[l("div",Ce,[s[29]||(s[29]=l("p",{class:"page-title"},"Edit Job profile",-1)),t(ye),t(be,{align:"right",gutter:"xs"},{default:p(()=>[t(me,{to:{name:"job-profile:read"},label:"Jobs"}),t(me,{label:"Edit "})]),_:1})]),t(Qe,{class:"zcard q-pa-md",onReset:i.resetForm,onSubmit:fe},{default:p(()=>{var d,u,F,L,R,j,E,G,T,M,J,z,H,I,W,X,K,Y,Z,h,ee,re,oe,se,le,te,ae,ne,ie;return[l("div",Ae,[s[33]||(s[33]=l("div",{class:"col-xs-12 primary-title q-my-md"},"Job profile",-1)),l("div",Ne,[t(n,{modelValue:o(e).code,"onUpdate:modelValue":s[0]||(s[0]=r=>o(e).code=r),class:"my-input",dense:"",label:"Code",outlined:"",error:o(e).errors.hasOwnProperty("code"),"error-message":(u=(d=o(e).errors)==null?void 0:d.code)==null?void 0:u.toString(),onBlur:s[1]||(s[1]=r=>delete o(e).errors.code),rules:[r=>!!r||"Code is required"]},null,8,["modelValue","error","error-message","rules"])]),l("div",ke,[t(n,{modelValue:o(e).post_name,"onUpdate:modelValue":s[2]||(s[2]=r=>o(e).post_name=r),class:"my-input",dense:"",label:"Name",outlined:"",error:o(e).errors.hasOwnProperty("post_name"),"error-message":(L=(F=o(e).errors)==null?void 0:F.post_name)==null?void 0:L.toString(),onBlur:s[3]||(s[3]=r=>delete o(e).errors.post_name),rules:[r=>!!r||"Name is required"]},null,8,["modelValue","error","error-message","rules"])]),l("div",Fe,[t(y,{modelValue:o(e).departments,"onUpdate:modelValue":s[4]||(s[4]=r=>o(e).departments=r),clearable:"",error:!!((R=o(e).errors)!=null&&R.departments),"error-message":(E=(j=o(e).errors)==null?void 0:j.departments)==null?void 0:E.toString(),options:b.departments,"bg-color":"white",label:"Department","no-error-icon":"",outlined:""},null,8,["modelValue","error","error-message","options"])]),l("div",Le,[t(y,{modelValue:o(e).category,"onUpdate:modelValue":s[5]||(s[5]=r=>o(e).category=r),class:"my-input",options:["A","B","C","D"],dense:"",label:"Group",outlined:"",error:o(e).errors.hasOwnProperty("category"),"error-message":(T=(G=o(e).errors)==null?void 0:G.category)==null?void 0:T.toString(),onBlur:s[6]||(s[6]=r=>delete o(e).errors.category),rules:[r=>!!r||"Group is required"]},null,8,["modelValue","error","error-message","rules"])]),l("div",Re,[t(n,{modelValue:o(e).description,"onUpdate:modelValue":s[7]||(s[7]=r=>o(e).description=r),class:"my-input",dense:"",label:"Description",outlined:"",error:o(e).errors.hasOwnProperty("description"),"error-message":(J=(M=o(e).errors)==null?void 0:M.description)==null?void 0:J.toString(),onBlur:s[8]||(s[8]=r=>delete o(e).errors.description),rules:[r=>!!r||"Description is required"]},null,8,["modelValue","error","error-message","rules"])]),l("div",je,[t(n,{modelValue:o(e).salary,"onUpdate:modelValue":s[9]||(s[9]=r=>o(e).salary=r),class:"my-input",dense:"",label:"Salary",outlined:"",error:o(e).errors.hasOwnProperty("salary"),"error-message":(H=(z=o(e).errors)==null?void 0:z.salary)==null?void 0:H.toString(),onBlur:s[10]||(s[10]=r=>delete o(e).errors.salary),rules:[r=>!!r||"Salary is required"]},null,8,["modelValue","error","error-message","rules"])]),l("div",Ee,[t(n,{modelValue:o(e).no_of_post,"onUpdate:modelValue":s[11]||(s[11]=r=>o(e).no_of_post=r),class:"my-input",dense:"",label:"POST",outlined:"",error:o(e).errors.hasOwnProperty("no_of_post"),"error-message":(W=(I=o(e).errors)==null?void 0:I.no_of_post)==null?void 0:W.toString(),onBlur:s[12]||(s[12]=r=>delete o(e).errors.no_of_post),rules:[r=>Number(r)||"Post must be number"]},null,8,["modelValue","error","error-message","rules"])]),l("div",Ge,[t(n,{modelValue:o(e).application_deadline,"onUpdate:modelValue":s[13]||(s[13]=r=>o(e).application_deadline=r),class:"my-input",dense:"",type:"date",label:"Application Deadline",outlined:"",error:o(e).errors.hasOwnProperty("application_deadline"),"error-message":(K=(X=o(e).errors)==null?void 0:X.application_deadline)==null?void 0:K.toString(),onBlur:s[14]||(s[14]=r=>delete o(e).errors.application_deadline),rules:[r=>!!r||"Deadline is required"]},null,8,["modelValue","error","error-message","rules"])]),l("div",Te,[t(n,{modelValue:o(e).upper_age_limit,"onUpdate:modelValue":s[15]||(s[15]=r=>o(e).upper_age_limit=r),class:"my-input",dense:"",label:"Upper Age Limit",outlined:"",error:o(e).errors.hasOwnProperty("upper_age_limit"),"error-message":(Z=(Y=o(e).errors)==null?void 0:Y.upper_age_limit)==null?void 0:Z.toString(),onBlur:s[16]||(s[16]=r=>delete o(e).errors.upper_age_limit),rules:[r=>Number(r)||"Age must be number"]},null,8,["modelValue","error","error-message","rules"])]),l("div",Me,[t(n,{modelValue:o(e).lower_age_limit,"onUpdate:modelValue":s[17]||(s[17]=r=>o(e).lower_age_limit=r),class:"my-input",dense:"",label:"Lower Age Limit",outlined:"",error:o(e).errors.hasOwnProperty("lower_age_limit"),"error-message":(ee=(h=o(e).errors)==null?void 0:h.lower_age_limit)==null?void 0:ee.toString(),onBlur:s[18]||(s[18]=r=>delete o(e).errors.lower_age_limit),rules:[r=>Number(r)||"Age must be number"]},null,8,["modelValue","error","error-message","rules"])]),l("div",Je,[t(n,{modelValue:o(e).age_relaxation,"onUpdate:modelValue":s[19]||(s[19]=r=>o(e).age_relaxation=r),class:"my-input",dense:"",label:"Age Relaxation",outlined:"",error:o(e).errors.hasOwnProperty("age_relaxation"),"error-message":(oe=(re=o(e).errors)==null?void 0:re.age_relaxation)==null?void 0:oe.toString(),onBlur:s[20]||(s[20]=r=>delete o(e).errors.age_relaxation),rules:[r=>Number(r)||"Age must be number"]},null,8,["modelValue","error","error-message","rules"])]),l("div",ze,[t(n,{modelValue:o(e).application_fee_other,"onUpdate:modelValue":s[21]||(s[21]=r=>o(e).application_fee_other=r),class:"my-input",dense:"",label:"Fee for SC/ST/OBC",outlined:"",error:o(e).errors.hasOwnProperty("application_fee_other"),"error-message":(le=(se=o(e).errors)==null?void 0:se.application_fee_other)==null?void 0:le.toString(),onBlur:s[22]||(s[22]=r=>delete o(e).errors.application_fee_other),rules:[r=>Number(r)||"Fee must be number"]},null,8,["modelValue","error","error-message","rules"])]),l("div",He,[t(n,{modelValue:o(e).application_fee_general,"onUpdate:modelValue":s[23]||(s[23]=r=>o(e).application_fee_general=r),class:"my-input",dense:"",label:"Fee for General",outlined:"",error:o(e).errors.hasOwnProperty("application_fee_general"),"error-message":(ae=(te=o(e).errors)==null?void 0:te.application_fee_general)==null?void 0:ae.toString(),onBlur:s[24]||(s[24]=r=>delete o(e).errors.application_fee_general),rules:[r=>Number(r)||"Fee must be number"]},null,8,["modelValue","error","error-message","rules"])]),l("div",Ie,[t(y,{modelValue:o(e).qualification,"onUpdate:modelValue":s[25]||(s[25]=r=>o(e).qualification=r),class:"my-input",options:["HSLC","HSSLC","Graduate","Post Graduate","PhD"],dense:"",label:"Minimum Qualification",outlined:"",error:o(e).errors.hasOwnProperty("qualification"),"error-message":(ie=(ne=o(e).errors)==null?void 0:ne.qualification)==null?void 0:ie.toString(),onBlur:s[26]||(s[26]=r=>delete o(e).errors.qualification),rules:[r=>!!r||"Please select Qualification"]},null,8,["modelValue","error","error-message","rules"])]),l("div",We,[t(c,{class:"q-my-md"})]),l("div",null,[s[31]||(s[31]=l("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Required Documents",-1)),(_(!0),ue(Ue,null,Se(o(e).documents,(r,de)=>(_(),ue("div",{key:de,class:"flex space-x-4 items-center mb-3"},[f(l("input",{type:"text","onUpdate:modelValue":m=>r.name=m,placeholder:"Document Name",class:"flex-1 block rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:""},null,8,Xe),[[pe,r.name]]),f(l("input",{type:"text","onUpdate:modelValue":m=>r.description=m,placeholder:"Document Description",class:"flex-1 block rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:""},null,8,Ke),[[pe,r.description]]),f(l("select",{"onUpdate:modelValue":m=>r.is_mandatory=m,class:"block rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},s[30]||(s[30]=[l("option",{value:"1"},"Mandatory",-1),l("option",{value:"0"},"Optional",-1)]),8,Ye),[[qe,r.is_mandatory]]),t(g,{round:"",color:"red",style:{"font-size":"12px"},onClick:m=>ce(de),icon:"delete"},null,8,["onClick"])]))),128))]),l("div",Ze,[t(g,{outline:"",color:"primary",onClick:_e},{default:p(()=>s[32]||(s[32]=[Be(" Add Document ")])),_:1})]),l("div",he,[t(c,{class:"q-my-md"})]),l("div",er,[t(ge,{modelValue:o(e).active,"onUpdate:modelValue":s[27]||(s[27]=r=>o(e).active=r),val:1,label:"Open"},null,8,["modelValue"]),t(ge,{modelValue:o(e).active,"onUpdate:modelValue":s[28]||(s[28]=r=>o(e).active=r),val:0,label:"Closed"},null,8,["modelValue"])])]),l("div",rr,[t(c,{class:"q-my-md"})]),t(Pe,{class:"q-mt-md"},{default:p(()=>[t(g,{color:"primary",flat:"",type:"submit",label:"Save"}),t(g,{color:"negative",flat:"",type:"reset",label:"Reset"})]),_:1})]}),_:1},8,["onReset"])]),_:1}))}});export{cr as default};
