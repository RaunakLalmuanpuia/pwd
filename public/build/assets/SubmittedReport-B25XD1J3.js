import{d as D,a as v,c as f}from"./QLayout-DMxazfGy.js";import{Q as P}from"./QTabs-D0_mmU00.js";import{Q as m}from"./QSelect-Cvwm6CsV.js";import{r as g,O as R,T as U,o as d,c as E,a as s,w as n,F as q,Y as V,d as c,g as y,$ as w,b as o,u as r,m as C,n as I,V as x,s as B,aj as Q}from"./app-BqZ5vi9Q.js";import{Q as j}from"./QForm-CBsrYB9g.js";import{Q as F}from"./QPage-l2tOw9iN.js";import{A as L}from"./Admin-DNEszxUW.js";import{u as N}from"./use-quasar-C9aLArF3.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./rtl-DFPa-2ov.js";import"./QChip-gcgf5XCt.js";import"./QMenu-NL4fuW62.js";const $={class:"col-xs-12 col-sm-6"},M={class:"col-xs-12 col-sm-6"},G={class:"col-xs-12 col-sm-6"},J={key:0},z={key:2},X={class:"col-xs-12 col-sm-6"},Y={class:"col-xs-12 col-sm-6"},H={class:"col-xs-12 col-sm-6"},K={class:"col-xs-12"},W={class:"col-xs-12"},Z=Object.assign({layout:L},{__name:"SubmittedReport",props:["departments","jobs"],setup(b){g("mails");const p=N();R();const a=U({status:"",state:"",district:"",gender:"",posts:""}),i=g(null);g(null);const S=()=>{i.value&&x.get(route("report.submitted"),{department:i.value.value},{preserveState:!0,replace:!0})},k=[{value:["ELIGIBLE"],label:"Eligible"},{value:["SUBMITTED"],label:"Pending"},{value:["APPROVED"],label:"Approved"},{value:["REJECTED"],label:"Rejected"},{value:["ELIGIBLE","SUBMITTED","APPROVED","REJECTED"],label:"All"}],A=[{value:"Male",label:"Male"},{value:"Female",label:"Female"}],T=()=>{p.loading.show(),(!i||!a.posts)&&(p.notify({type:"warning",message:i?"No Job Avaliable for the selected department.":"Please select a department.",position:"bottom"}),p.loading.hide());const l=route("report.application.download");B.post(l,a,{responseType:"blob"}).then(e=>{const t=window.URL.createObjectURL(new Blob([e.data])),u=document.createElement("a");u.href=t,u.setAttribute("download",Date.now()+".xlsx"),u.click()}).catch(e=>{var t,u;p.notify({type:"negative",message:((u=(t=e.response)==null?void 0:t.data)==null?void 0:u.message)||"Failed to download file"})}).finally(()=>{p.loading.hide()})};return(l,e)=>(d(),E(q,null,[s(D,{padding:"",class:"card justify-center"},{default:n(()=>[s(P,{padding:""},{default:n(()=>[V((d(),c(f,{clickable:"",active:l.route().current()==="report.submitted",class:w({"q-item--active":l.route().current()==="report.submitted"}),onClick:e[0]||(e[0]=t=>l.$inertia.get(l.route("report.submitted")))},{default:n(()=>[s(v,null,{default:n(()=>e[9]||(e[9]=[y(" APPLICATIONS ")])),_:1})]),_:1},8,["active","class"])),[[Q]]),V((d(),c(f,{clickable:"",class:w({"q-item--active":l.route().current()==="report.writtenExam"}),active:l.route().current()==="report.writtenExam",onClick:e[1]||(e[1]=t=>l.$inertia.get(l.route("report.writtenExam")))},{default:n(()=>[s(v,null,{default:n(()=>e[10]||(e[10]=[y(" EXAM REPORT ")])),_:1})]),_:1},8,["class","active"])),[[Q]]),V((d(),c(f,{clickable:"",class:w({"q-item--active":l.route().current()==="report.exam_center"}),active:l.route().current()==="report.exam_center",onClick:e[2]||(e[2]=t=>l.$inertia.get(l.route("report.exam_center")))},{default:n(()=>[s(v,null,{default:n(()=>e[11]||(e[11]=[y(" EXAM CENTER ")])),_:1})]),_:1},8,["class","active"])),[[Q]])]),_:1})]),_:1}),s(F,{padding:""},{default:n(()=>[e[14]||(e[14]=o("p",{class:"q-ma-none page-title py-3"}," Applications",-1)),e[15]||(e[15]=o("br",null,null,-1)),s(j,{onSubmit:T,class:"row q-col-gutter-md q-pa-md"},{default:n(()=>[o("div",$,[s(m,{modelValue:i.value,"onUpdate:modelValue":[e[3]||(e[3]=t=>i.value=t),S],outlined:"",dense:"",options:b.departments,clearable:"",label:"Select Department",rules:[t=>!!t||"Department is required"]},null,8,["modelValue","options","rules"])]),o("div",M,[s(m,{modelValue:r(a).status,"onUpdate:modelValue":e[4]||(e[4]=t=>r(a).status=t),outlined:"",class:"my-input",dense:"",label:"Application Status",options:k,rules:[t=>!!t||"Status is required"]},null,8,["modelValue","rules"])]),o("div",G,[i.value?b.jobs.length>0?(d(),c(m,{key:1,modelValue:r(a).posts,"onUpdate:modelValue":e[5]||(e[5]=t=>r(a).posts=t),outlined:"",class:"my-input",dense:"",options:b.jobs,clearable:"",label:"Post",rules:[t=>!!t||"Post is required"]},null,8,["modelValue","options","rules"])):(d(),E("p",z,"No jobs available for the selected department.")):(d(),E("p",J,"Please select a department."))]),e[12]||(e[12]=o("div",{class:"col-xs-12 col-sm-6"},null,-1)),e[13]||(e[13]=o("div",{class:"col-xs-12"},[o("p",{class:"ztext q-ma-none"},"optional")],-1)),o("div",X,[s(m,{modelValue:r(a).state,"onUpdate:modelValue":[e[6]||(e[6]=t=>r(a).state=t),l.onStateChange],outlined:"",class:"my-input",dense:"",options:l.states,clearable:"",label:"State"},null,8,["modelValue","onUpdate:modelValue","options"])]),o("div",Y,[s(m,{modelValue:r(a).district,"onUpdate:modelValue":e[7]||(e[7]=t=>r(a).district=t),outlined:"",class:"my-input",dense:"",options:l.districts,clearable:"",label:"District"},null,8,["modelValue","options"])]),o("div",H,[s(m,{modelValue:r(a).gender,"onUpdate:modelValue":e[8]||(e[8]=t=>r(a).gender=t),outlined:"",class:"my-input",dense:"",options:A,clearable:"",label:"Gender"},null,8,["modelValue"])]),o("div",K,[s(C)]),o("div",W,[s(I,{type:"submit",color:"primary",rounded:"",label:"Generate"})])]),_:1})]),_:1})],64))}}),ue=O(Z,[["__scopeId","data-v-2c96e849"]]);export{ue as default};
